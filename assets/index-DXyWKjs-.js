var ts=Object.defineProperty;var es=(k,s,L)=>s in k?ts(k,s,{enumerable:!0,configurable:!0,writable:!0,value:L}):k[s]=L;var ee=(k,s,L)=>(es(k,typeof s!="symbol"?s+"":s,L),L),Ne=(k,s,L)=>{if(!s.has(k))throw TypeError("Cannot "+L)};var t=(k,s,L)=>(Ne(k,s,"read from private field"),L?L.call(k):s.get(k)),U=(k,s,L)=>{if(s.has(k))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(k):s.set(k,L)},it=(k,s,L,r)=>(Ne(k,s,"write to private field"),r?r.call(k,L):s.set(k,L),L);var ge=(k,s,L,r)=>({set _(u){it(k,s,u,L)},get _(){return t(k,s,r)}}),X=(k,s,L)=>(Ne(k,s,"access private method"),L);import{m as getAugmentedNamespace,l as getDefaultExportFromCjs,r as reactExports,R as React,j as jsxRuntimeExports,c as classNames}from"./index-DHY9pNOM.js";import{u as useResizeObserver}from"./bundle.esm-CypwYhxs.js";import{L as Loader}from"./index-DlIqo8TW.js";import{c as clsx}from"./clsx-B-dksMZM.js";import{B as Button}from"./index-P44HKHY3.js";import{F as Fade}from"./index-DoM9EaxA.js";import"./index-tCF1fC3z.js";function _mergeNamespaces(k,s){for(var L=0;L<s.length;L++){const r=s[L];if(typeof r!="string"&&!Array.isArray(r)){for(const u in r)if(u!=="default"&&!(u in k)){const G=Object.getOwnPropertyDescriptor(r,u);G&&Object.defineProperty(k,u,G.get?G:{enumerable:!0,get:()=>r[u]})}}}return Object.freeze(Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}))}const pdf$2="/assets/jasonsmith-frontend-CXvyx-td.pdf";function commonjsRequire(k){throw new Error('Could not dynamically require "'+k+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(s,L){module.exports=s.pdfjsLib=L()})(globalThis,()=>(()=>{var __webpack_modules__=[,(k,s)=>{var Vt;Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.TextRenderingMode=s.RenderingIntentFlag=s.PromiseCapability=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.MAX_IMAGE_SIZE_TO_CACHE=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.BASELINE_FACTOR=s.AnnotationType=s.AnnotationReplyType=s.AnnotationPrefix=s.AnnotationMode=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.assert=ct,s.bytesToString=j,s.createValidAbsoluteUrl=Et,s.getModificationDate=Pt,s.getUuid=Gt,s.getVerbosityLevel=q,s.info=nt,s.isArrayBuffer=ft,s.isArrayEqual=wt,s.isNodeJS=void 0,s.normalizeUnicode=qt,s.objectFromMap=dt,s.objectSize=rt,s.setVerbosityLevel=S,s.shadow=Tt,s.string32=Z,s.stringToBytes=st,s.stringToPDFString=gt,s.stringToUTF8String=tt,s.unreachable=$,s.utf8StringToString=et,s.warn=ot;const L=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");s.isNodeJS=L;const r=[1,0,0,1,0,0];s.IDENTITY_MATRIX=r;const u=[.001,0,0,.001,0,0];s.FONT_IDENTITY_MATRIX=u;const G=1e7;s.MAX_IMAGE_SIZE_TO_CACHE=G;const W=1.35;s.LINE_FACTOR=W;const ut=.35;s.LINE_DESCENT_FACTOR=ut;const F=ut/W;s.BASELINE_FACTOR=F;const w={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};s.RenderingIntentFlag=w;const g={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};s.AnnotationMode=g;const O="pdfjs_internal_editor_";s.AnnotationEditorPrefix=O;const I={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};s.AnnotationEditorType=I;const x={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};s.AnnotationEditorParamsType=x;const v={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};s.PermissionFlag=v;const A={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};s.TextRenderingMode=A;const f={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};s.ImageKind=f;const _={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};s.AnnotationType=_;const P={GROUP:"Group",REPLY:"R"};s.AnnotationReplyType=P;const T={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};s.AnnotationFlag=T;const y={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};s.AnnotationFieldFlag=y;const o={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};s.AnnotationBorderStyleType=o;const h={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};s.AnnotationActionEventType=h;const M={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};s.DocumentActionEventType=M;const m={O:"PageOpen",C:"PageClose"};s.PageActionEventType=m;const l={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=l;const R={NONE:0,BINARY:1};s.CMapCompressionType=R;const p={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};s.OPS=p;const H={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};s.PasswordResponses=H;let V=l.WARNINGS;function S(ht){Number.isInteger(ht)&&(V=ht)}function q(){return V}function nt(ht){V>=l.INFOS&&console.log("Info: ".concat(ht))}function ot(ht){V>=l.WARNINGS&&console.log("Warning: ".concat(ht))}function $(ht){throw new Error(ht)}function ct(ht,Q){ht||$(Q)}function mt(ht){switch(ht==null?void 0:ht.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Et(ht,Q=null,Y=null){if(!ht)return null;try{if(Y&&typeof ht=="string"){if(Y.addDefaultProtocol&&ht.startsWith("www.")){const At=ht.match(/\./g);(At==null?void 0:At.length)>=2&&(ht="http://".concat(ht))}if(Y.tryConvertEncoding)try{ht=tt(ht)}catch{}}const _t=Q?new URL(ht,Q):new URL(ht);if(mt(_t))return _t}catch{}return null}function Tt(ht,Q,Y,_t=!1){return Object.defineProperty(ht,Q,{value:Y,enumerable:!_t,configurable:!0,writable:!1}),Y}const C=function(){function Q(Y,_t){this.constructor===Q&&$("Cannot initialize BaseException."),this.message=Y,this.name=_t}return Q.prototype=new Error,Q.constructor=Q,Q}();s.BaseException=C;class n extends C{constructor(Q,Y){super(Q,"PasswordException"),this.code=Y}}s.PasswordException=n;class a extends C{constructor(Q,Y){super(Q,"UnknownErrorException"),this.details=Y}}s.UnknownErrorException=a;class i extends C{constructor(Q){super(Q,"InvalidPDFException")}}s.InvalidPDFException=i;class c extends C{constructor(Q){super(Q,"MissingPDFException")}}s.MissingPDFException=c;class d extends C{constructor(Q,Y){super(Q,"UnexpectedResponseException"),this.status=Y}}s.UnexpectedResponseException=d;class E extends C{constructor(Q){super(Q,"FormatError")}}s.FormatError=E;class D extends C{constructor(Q){super(Q,"AbortException")}}s.AbortException=D;function j(ht){(typeof ht!="object"||(ht==null?void 0:ht.length)===void 0)&&$("Invalid argument for bytesToString");const Q=ht.length,Y=8192;if(Q<Y)return String.fromCharCode.apply(null,ht);const _t=[];for(let At=0;At<Q;At+=Y){const te=Math.min(At+Y,Q),Zt=ht.subarray(At,te);_t.push(String.fromCharCode.apply(null,Zt))}return _t.join("")}function st(ht){typeof ht!="string"&&$("Invalid argument for stringToBytes");const Q=ht.length,Y=new Uint8Array(Q);for(let _t=0;_t<Q;++_t)Y[_t]=ht.charCodeAt(_t)&255;return Y}function Z(ht){return String.fromCharCode(ht>>24&255,ht>>16&255,ht>>8&255,ht&255)}function rt(ht){return Object.keys(ht).length}function dt(ht){const Q=Object.create(null);for(const[Y,_t]of ht)Q[Y]=_t;return Q}function pt(){const ht=new Uint8Array(4);return ht[0]=1,new Uint32Array(ht.buffer,0,1)[0]===1}function lt(){try{return new Function(""),!0}catch{return!1}}class Ct{static get isLittleEndian(){return Tt(this,"isLittleEndian",pt())}static get isEvalSupported(){return Tt(this,"isEvalSupported",lt())}static get isOffscreenCanvasSupported(){return Tt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Tt(this,"platform",{isWin:!1,isMac:!1}):Tt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Q,Y;return Tt(this,"isCSSRoundSupported",(Y=(Q=globalThis.CSS)==null?void 0:Q.supports)==null?void 0:Y.call(Q,"width: round(1.5px, 1px)"))}}s.FeatureTest=Ct;const Ot=[...Array(256).keys()].map(ht=>ht.toString(16).padStart(2,"0"));class vt{static makeHexColor(Q,Y,_t){return"#".concat(Ot[Q]).concat(Ot[Y]).concat(Ot[_t])}static scaleMinMax(Q,Y){let _t;Q[0]?(Q[0]<0&&(_t=Y[0],Y[0]=Y[1],Y[1]=_t),Y[0]*=Q[0],Y[1]*=Q[0],Q[3]<0&&(_t=Y[2],Y[2]=Y[3],Y[3]=_t),Y[2]*=Q[3],Y[3]*=Q[3]):(_t=Y[0],Y[0]=Y[2],Y[2]=_t,_t=Y[1],Y[1]=Y[3],Y[3]=_t,Q[1]<0&&(_t=Y[2],Y[2]=Y[3],Y[3]=_t),Y[2]*=Q[1],Y[3]*=Q[1],Q[2]<0&&(_t=Y[0],Y[0]=Y[1],Y[1]=_t),Y[0]*=Q[2],Y[1]*=Q[2]),Y[0]+=Q[4],Y[1]+=Q[4],Y[2]+=Q[5],Y[3]+=Q[5]}static transform(Q,Y){return[Q[0]*Y[0]+Q[2]*Y[1],Q[1]*Y[0]+Q[3]*Y[1],Q[0]*Y[2]+Q[2]*Y[3],Q[1]*Y[2]+Q[3]*Y[3],Q[0]*Y[4]+Q[2]*Y[5]+Q[4],Q[1]*Y[4]+Q[3]*Y[5]+Q[5]]}static applyTransform(Q,Y){const _t=Q[0]*Y[0]+Q[1]*Y[2]+Y[4],At=Q[0]*Y[1]+Q[1]*Y[3]+Y[5];return[_t,At]}static applyInverseTransform(Q,Y){const _t=Y[0]*Y[3]-Y[1]*Y[2],At=(Q[0]*Y[3]-Q[1]*Y[2]+Y[2]*Y[5]-Y[4]*Y[3])/_t,te=(-Q[0]*Y[1]+Q[1]*Y[0]+Y[4]*Y[1]-Y[5]*Y[0])/_t;return[At,te]}static getAxialAlignedBoundingBox(Q,Y){const _t=this.applyTransform(Q,Y),At=this.applyTransform(Q.slice(2,4),Y),te=this.applyTransform([Q[0],Q[3]],Y),Zt=this.applyTransform([Q[2],Q[1]],Y);return[Math.min(_t[0],At[0],te[0],Zt[0]),Math.min(_t[1],At[1],te[1],Zt[1]),Math.max(_t[0],At[0],te[0],Zt[0]),Math.max(_t[1],At[1],te[1],Zt[1])]}static inverseTransform(Q){const Y=Q[0]*Q[3]-Q[1]*Q[2];return[Q[3]/Y,-Q[1]/Y,-Q[2]/Y,Q[0]/Y,(Q[2]*Q[5]-Q[4]*Q[3])/Y,(Q[4]*Q[1]-Q[5]*Q[0])/Y]}static singularValueDecompose2dScale(Q){const Y=[Q[0],Q[2],Q[1],Q[3]],_t=Q[0]*Y[0]+Q[1]*Y[2],At=Q[0]*Y[1]+Q[1]*Y[3],te=Q[2]*Y[0]+Q[3]*Y[2],Zt=Q[2]*Y[1]+Q[3]*Y[3],J=(_t+Zt)/2,St=Math.sqrt((_t+Zt)**2-4*(_t*Zt-te*At))/2,Lt=J+St||1,Rt=J-St||1;return[Math.sqrt(Lt),Math.sqrt(Rt)]}static normalizeRect(Q){const Y=Q.slice(0);return Q[0]>Q[2]&&(Y[0]=Q[2],Y[2]=Q[0]),Q[1]>Q[3]&&(Y[1]=Q[3],Y[3]=Q[1]),Y}static intersect(Q,Y){const _t=Math.max(Math.min(Q[0],Q[2]),Math.min(Y[0],Y[2])),At=Math.min(Math.max(Q[0],Q[2]),Math.max(Y[0],Y[2]));if(_t>At)return null;const te=Math.max(Math.min(Q[1],Q[3]),Math.min(Y[1],Y[3])),Zt=Math.min(Math.max(Q[1],Q[3]),Math.max(Y[1],Y[3]));return te>Zt?null:[_t,te,At,Zt]}static bezierBoundingBox(Q,Y,_t,At,te,Zt,J,St){const Lt=[],Rt=[[],[]];let Nt,Bt,Jt,yt,Yt,It,N,e;for(let K=0;K<2;++K){if(K===0?(Bt=6*Q-12*_t+6*te,Nt=-3*Q+9*_t-9*te+3*J,Jt=3*_t-3*Q):(Bt=6*Y-12*At+6*Zt,Nt=-3*Y+9*At-9*Zt+3*St,Jt=3*At-3*Y),Math.abs(Nt)<1e-12){if(Math.abs(Bt)<1e-12)continue;yt=-Jt/Bt,0<yt&&yt<1&&Lt.push(yt);continue}N=Bt*Bt-4*Jt*Nt,e=Math.sqrt(N),!(N<0)&&(Yt=(-Bt+e)/(2*Nt),0<Yt&&Yt<1&&Lt.push(Yt),It=(-Bt-e)/(2*Nt),0<It&&It<1&&Lt.push(It))}let b=Lt.length,B;const z=b;for(;b--;)yt=Lt[b],B=1-yt,Rt[0][b]=B*B*B*Q+3*B*B*yt*_t+3*B*yt*yt*te+yt*yt*yt*J,Rt[1][b]=B*B*B*Y+3*B*B*yt*At+3*B*yt*yt*Zt+yt*yt*yt*St;return Rt[0][z]=Q,Rt[1][z]=Y,Rt[0][z+1]=J,Rt[1][z+1]=St,Rt[0].length=Rt[1].length=z+2,[Math.min(...Rt[0]),Math.min(...Rt[1]),Math.max(...Rt[0]),Math.max(...Rt[1])]}}s.Util=vt;const Dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function gt(ht){if(ht[0]>="ï"){let Y;if(ht[0]==="þ"&&ht[1]==="ÿ"?Y="utf-16be":ht[0]==="ÿ"&&ht[1]==="þ"?Y="utf-16le":ht[0]==="ï"&&ht[1]==="»"&&ht[2]==="¿"&&(Y="utf-8"),Y)try{const _t=new TextDecoder(Y,{fatal:!0}),At=st(ht);return _t.decode(At)}catch(_t){ot('stringToPDFString: "'.concat(_t,'".'))}}const Q=[];for(let Y=0,_t=ht.length;Y<_t;Y++){const At=Dt[ht.charCodeAt(Y)];Q.push(At?String.fromCharCode(At):ht.charAt(Y))}return Q.join("")}function tt(ht){return decodeURIComponent(escape(ht))}function et(ht){return unescape(encodeURIComponent(ht))}function ft(ht){return typeof ht=="object"&&(ht==null?void 0:ht.byteLength)!==void 0}function wt(ht,Q){if(ht.length!==Q.length)return!1;for(let Y=0,_t=ht.length;Y<_t;Y++)if(ht[Y]!==Q[Y])return!1;return!0}function Pt(ht=new Date){return[ht.getUTCFullYear().toString(),(ht.getUTCMonth()+1).toString().padStart(2,"0"),ht.getUTCDate().toString().padStart(2,"0"),ht.getUTCHours().toString().padStart(2,"0"),ht.getUTCMinutes().toString().padStart(2,"0"),ht.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ht{constructor(){U(this,Vt,!1);this.promise=new Promise((Q,Y)=>{this.resolve=_t=>{it(this,Vt,!0),Q(_t)},this.reject=_t=>{it(this,Vt,!0),Y(_t)}})}get settled(){return t(this,Vt)}}Vt=new WeakMap,s.PromiseCapability=Ht;let $t=null,jt=null;function qt(ht){return $t||($t=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,jt=new Map([["ﬅ","ſt"]])),ht.replaceAll($t,(Q,Y,_t)=>Y?Y.normalize("NFKC"):jt.get(_t))}function Gt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ht=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ht);else for(let Q=0;Q<32;Q++)ht[Q]=Math.floor(Math.random()*255);return j(ht)}const Wt="pdfjs_internal_id_";s.AnnotationPrefix=Wt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var k,L,r,u,he,W,Se,F,w,g,O,I,x,v,A,f,Te,P,T,Be,o,h;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(m){var Ht,$t;if(typeof m=="string"||m instanceof URL?m={url:m}:(0,_util.isArrayBuffer)(m)&&(m={data:m}),typeof m!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!m.url&&!m.data&&!m.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const l=new PDFDocumentLoadingTask,{docId:R}=l,p=m.url?getUrlProp(m.url):null,H=m.data?getDataProp(m.data):null,V=m.httpHeaders||null,S=m.withCredentials===!0,q=(Ht=m.password)!=null?Ht:null,nt=m.range instanceof PDFDataRangeTransport?m.range:null,ot=Number.isInteger(m.rangeChunkSize)&&m.rangeChunkSize>0?m.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let $=m.worker instanceof PDFWorker?m.worker:null;const ct=m.verbosity,mt=typeof m.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(m.docBaseUrl)?m.docBaseUrl:null,Et=typeof m.cMapUrl=="string"?m.cMapUrl:null,Tt=m.cMapPacked!==!1,C=m.CMapReaderFactory||DefaultCMapReaderFactory,n=typeof m.standardFontDataUrl=="string"?m.standardFontDataUrl:null,a=m.StandardFontDataFactory||DefaultStandardFontDataFactory,i=m.stopAtErrors!==!0,c=Number.isInteger(m.maxImageSize)&&m.maxImageSize>-1?m.maxImageSize:-1,d=m.isEvalSupported!==!1,E=typeof m.isOffscreenCanvasSupported=="boolean"?m.isOffscreenCanvasSupported:!_util.isNodeJS,D=Number.isInteger(m.canvasMaxAreaInBytes)?m.canvasMaxAreaInBytes:-1,j=typeof m.disableFontFace=="boolean"?m.disableFontFace:_util.isNodeJS,st=m.fontExtraProperties===!0,Z=m.enableXfa===!0,rt=m.ownerDocument||globalThis.document,dt=m.disableRange===!0,pt=m.disableStream===!0,lt=m.disableAutoFetch===!0,Ct=m.pdfBug===!0,Ot=nt?nt.length:($t=m.length)!=null?$t:NaN,vt=typeof m.useSystemFonts=="boolean"?m.useSystemFonts:!_util.isNodeJS&&!j,Dt=typeof m.useWorkerFetch=="boolean"?m.useWorkerFetch:C===_display_utils.DOMCMapReaderFactory&&a===_display_utils.DOMStandardFontDataFactory&&Et&&n&&(0,_display_utils.isValidFetchUrl)(Et,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(n,document.baseURI),gt=m.canvasFactory||new DefaultCanvasFactory({ownerDocument:rt}),tt=m.filterFactory||new DefaultFilterFactory({docId:R,ownerDocument:rt}),et=null;(0,_util.setVerbosityLevel)(ct);const ft={canvasFactory:gt,filterFactory:tt};if(Dt||(ft.cMapReaderFactory=new C({baseUrl:Et,isCompressed:Tt}),ft.standardFontDataFactory=new a({baseUrl:n})),!$){const jt={verbosity:ct,port:_worker_options.GlobalWorkerOptions.workerPort};$=jt.port?PDFWorker.fromPort(jt):new PDFWorker(jt),l._worker=$}const wt={docId:R,apiVersion:"3.11.174",data:H,password:q,disableAutoFetch:lt,rangeChunkSize:ot,length:Ot,docBaseUrl:mt,enableXfa:Z,evaluatorOptions:{maxImageSize:c,disableFontFace:j,ignoreErrors:i,isEvalSupported:d,isOffscreenCanvasSupported:E,canvasMaxAreaInBytes:D,fontExtraProperties:st,useSystemFonts:vt,cMapUrl:Dt?Et:null,standardFontDataUrl:Dt?n:null}},Pt={ignoreErrors:i,isEvalSupported:d,disableFontFace:j,fontExtraProperties:st,enableXfa:Z,ownerDocument:rt,disableAutoFetch:lt,pdfBug:Ct,styleElement:et};return $.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const jt=_fetchDocument($,wt),qt=new Promise(function(Gt){let Wt;nt?Wt=new _transport_stream.PDFDataTransportStream({length:Ot,initialData:nt.initialData,progressiveDone:nt.progressiveDone,contentDispositionFilename:nt.contentDispositionFilename,disableRange:dt,disableStream:pt},nt):H||(Wt=(ht=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(ht):(0,_display_utils.isValidFetchUrl)(ht.url)?new _displayFetch_stream.PDFFetchStream(ht):new _displayNetwork.PDFNetworkStream(ht))({url:p,length:Ot,httpHeaders:V,withCredentials:S,rangeChunkSize:ot,disableRange:dt,disableStream:pt})),Gt(Wt)});return Promise.all([jt,qt]).then(function([Gt,Wt]){if(l.destroyed)throw new Error("Loading aborted");const Vt=new _message_handler.MessageHandler(R,Gt,$.port),ht=new WorkerTransport(Vt,l,Wt,Pt,ft);l._transport=ht,Vt.send("Ready",null)})}).catch(l._capability.reject),l}async function _fetchDocument(m,l){if(m.destroyed)throw new Error("Worker was destroyed");const R=await m.messageHandler.sendWithPromise("GetDocRequest",l,l.data?[l.data.buffer]:null);if(m.destroyed)throw new Error("Worker was destroyed");return R}function getUrlProp(m){if(m instanceof URL)return m.href;try{return new URL(m,window.location).href}catch{if(_util.isNodeJS&&typeof m=="string")return m}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(m){if(_util.isNodeJS&&typeof Buffer<"u"&&m instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength)return m;if(typeof m=="string")return(0,_util.stringToBytes)(m);if(typeof m=="object"&&!isNaN(m==null?void 0:m.length)||(0,_util.isArrayBuffer)(m))return new Uint8Array(m);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const s=class s{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId="d".concat(ge(s,k)._++),this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var l,R,p;this.destroyed=!0;try{(l=this._worker)!=null&&l.port&&(this._worker._pendingDestroy=!0),await((R=this._transport)==null?void 0:R.destroy())}catch(H){throw(p=this._worker)!=null&&p.port&&delete this._worker._pendingDestroy,H}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};k=new WeakMap,U(s,k,0);let PDFDocumentLoadingTask=s;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,R,p=!1,H=null){this.length=l,this.initialData=R,this.progressiveDone=p,this.contentDispositionFilename=H,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,R){for(const p of this._rangeListeners)p(l,R)}onDataProgress(l,R){this._readyCapability.promise.then(()=>{for(const p of this._progressListeners)p(l,R)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const R of this._progressiveReadListeners)R(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,R){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,R){this._pdfInfo=l,this._transport=R,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(p=>{if(!p)return p;const H=[];for(const V in p)H.push(...p[V]);return H}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(l,R,p,H=!1){U(this,u);U(this,W);U(this,L,null);U(this,r,!1);this._pageIndex=l,this._pageInfo=R,this._transport=p,this._stats=H?new _display_utils.StatTimer:null,this._pdfBug=H,this.commonObjs=p.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:R=this.rotate,offsetX:p=0,offsetY:H=0,dontFlip:V=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:R,offsetX:p,offsetY:H,dontFlip:V})}getAnnotations({intent:l="display"}={}){const R=this._transport.getRenderingIntent(l);return this._transport.getAnnotations(this._pageIndex,R.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var l;return((l=this._transport._htmlForXfa)==null?void 0:l.children[this._pageIndex])||null}render({canvasContext:l,viewport:R,intent:p="display",annotationMode:H=_util.AnnotationMode.ENABLE,transform:V=null,background:S=null,optionalContentConfigPromise:q=null,annotationCanvasMap:nt=null,pageColors:ot=null,printAnnotationStorage:$=null}){var a,i;(a=this._stats)==null||a.time("Overall");const ct=this._transport.getRenderingIntent(p,H,$);it(this,r,!1),X(this,W,Se).call(this),q||(q=this._transport.getOptionalContentConfig());let mt=this._intentStates.get(ct.cacheKey);mt||(mt=Object.create(null),this._intentStates.set(ct.cacheKey,mt)),mt.streamReaderCancelTimeout&&(clearTimeout(mt.streamReaderCancelTimeout),mt.streamReaderCancelTimeout=null);const Et=!!(ct.renderingIntent&_util.RenderingIntentFlag.PRINT);mt.displayReadyCapability||(mt.displayReadyCapability=new _util.PromiseCapability,mt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(i=this._stats)==null||i.time("Page Request"),this._pumpOperatorList(ct));const Tt=c=>{var d,E;mt.renderTasks.delete(C),(this._maybeCleanupAfterRender||Et)&&it(this,r,!0),X(this,u,he).call(this,!Et),c?(C.capability.reject(c),this._abortOperatorList({intentState:mt,reason:c instanceof Error?c:new Error(c)})):C.capability.resolve(),(d=this._stats)==null||d.timeEnd("Rendering"),(E=this._stats)==null||E.timeEnd("Overall")},C=new InternalRenderTask({callback:Tt,params:{canvasContext:l,viewport:R,transform:V,background:S},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:nt,operatorList:mt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Et,pdfBug:this._pdfBug,pageColors:ot});(mt.renderTasks||(mt.renderTasks=new Set)).add(C);const n=C.task;return Promise.all([mt.displayReadyCapability.promise,q]).then(([c,d])=>{var E;if(this.destroyed){Tt();return}(E=this._stats)==null||E.time("Rendering"),C.initializeGraphics({transparency:c,optionalContentConfig:d}),C.operatorListChanged()}).catch(Tt),n}getOperatorList({intent:l="display",annotationMode:R=_util.AnnotationMode.ENABLE,printAnnotationStorage:p=null}={}){var nt;function H(){S.operatorList.lastChunk&&(S.opListReadCapability.resolve(S.operatorList),S.renderTasks.delete(q))}const V=this._transport.getRenderingIntent(l,R,p,!0);let S=this._intentStates.get(V.cacheKey);S||(S=Object.create(null),this._intentStates.set(V.cacheKey,S));let q;return S.opListReadCapability||(q=Object.create(null),q.operatorListChanged=H,S.opListReadCapability=new _util.PromiseCapability,(S.renderTasks||(S.renderTasks=new Set)).add(q),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(nt=this._stats)==null||nt.time("Page Request"),this._pumpOperatorList(V)),S.opListReadCapability.promise}streamTextContent({includeMarkedContent:l=!1,disableNormalization:R=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:l===!0,disableNormalization:R===!0},{highWaterMark:100,size(H){return H.items.length}})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(p=>_xfa_text.XfaText.textContent(p));const R=this.streamTextContent(l);return new Promise(function(p,H){function V(){S.read().then(function({value:nt,done:ot}){if(ot){p(q);return}Object.assign(q.styles,nt.styles),q.items.push(...nt.items),V()},H)}const S=R.getReader(),q={items:[],styles:Object.create(null)};V()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const l=[];for(const R of this._intentStates.values())if(this._abortOperatorList({intentState:R,reason:new Error("Page was destroyed."),force:!0}),!R.opListReadCapability)for(const p of R.renderTasks)l.push(p.completed),p.cancel();return this.objs.clear(),it(this,r,!1),X(this,W,Se).call(this),Promise.all(l)}cleanup(l=!1){it(this,r,!0);const R=X(this,u,he).call(this,!1);return l&&R&&this._stats&&(this._stats=new _display_utils.StatTimer),R}_startRenderPage(l,R){var H,V;const p=this._intentStates.get(R);p&&((H=this._stats)==null||H.timeEnd("Page Request"),(V=p.displayReadyCapability)==null||V.resolve(l))}_renderPageChunk(l,R){for(let p=0,H=l.length;p<H;p++)R.operatorList.fnArray.push(l.fnArray[p]),R.operatorList.argsArray.push(l.argsArray[p]);R.operatorList.lastChunk=l.lastChunk,R.operatorList.separateAnnots=l.separateAnnots;for(const p of R.renderTasks)p.operatorListChanged();l.lastChunk&&X(this,u,he).call(this,!0)}_pumpOperatorList({renderingIntent:l,cacheKey:R,annotationStorageSerializable:p}){const{map:H,transfers:V}=p,q=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:R,annotationStorage:H},V).getReader(),nt=this._intentStates.get(R);nt.streamReader=q;const ot=()=>{q.read().then(({value:$,done:ct})=>{if(ct){nt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk($,nt),ot())},$=>{if(nt.streamReader=null,!this._transport.destroyed){if(nt.operatorList){nt.operatorList.lastChunk=!0;for(const ct of nt.renderTasks)ct.operatorListChanged();X(this,u,he).call(this,!0)}if(nt.displayReadyCapability)nt.displayReadyCapability.reject($);else if(nt.opListReadCapability)nt.opListReadCapability.reject($);else throw $}})};ot()}_abortOperatorList({intentState:l,reason:R,force:p=!1}){if(l.streamReader){if(l.streamReaderCancelTimeout&&(clearTimeout(l.streamReaderCancelTimeout),l.streamReaderCancelTimeout=null),!p){if(l.renderTasks.size>0)return;if(R instanceof _display_utils.RenderingCancelledException){let H=RENDERING_CANCELLED_TIMEOUT;R.extraDelay>0&&R.extraDelay<1e3&&(H+=R.extraDelay),l.streamReaderCancelTimeout=setTimeout(()=>{l.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:l,reason:R,force:!0})},H);return}}if(l.streamReader.cancel(new _util.AbortException(R.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[H,V]of this._intentStates)if(V===l){this._intentStates.delete(H);break}this.cleanup()}}}get stats(){return this._stats}}L=new WeakMap,r=new WeakMap,u=new WeakSet,he=function(l=!1){if(X(this,W,Se).call(this),!t(this,r)||this.destroyed)return!1;if(l)return it(this,L,setTimeout(()=>{it(this,L,null),X(this,u,he).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:R,operatorList:p}of this._intentStates.values())if(R.size>0||!p.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),it(this,r,!1),!0},W=new WeakSet,Se=function(){t(this,L)&&(clearTimeout(t(this,L)),it(this,L,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){U(this,F,new Set);U(this,w,Promise.resolve())}postMessage(l,R){const p={data:structuredClone(l,R?{transfer:R}:null)};t(this,w).then(()=>{for(const H of t(this,F))H.call(this,p)})}addEventListener(l,R){t(this,F).add(R)}removeEventListener(l,R){t(this,F).delete(R)}terminate(){t(this,F).clear()}}F=new WeakMap,w=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const m=(g=document==null?void 0:document.currentScript)==null?void 0:g.src;m&&(PDFWorkerUtil.fallbackWorkerSrc=m.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(m,l){let R;try{if(R=new URL(m),!R.origin||R.origin==="null")return!1}catch{return!1}const p=new URL(l,R);return R.origin===p.origin},PDFWorkerUtil.createCDNWrapper=function(m){const l='importScripts("'.concat(m,'");');return URL.createObjectURL(new Blob([l]))}}const _PDFWorker=class _PDFWorker{constructor({name:m=null,port:l=null,verbosity:R=(0,_util.getVerbosityLevel)()}={}){var p;if(this.name=m,this.destroyed=!1,this.verbosity=R,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,l){if((p=t(_PDFWorker,O))!=null&&p.has(l))throw new Error("Cannot use more than one PDFWorker per port.");(t(_PDFWorker,O)||it(_PDFWorker,O,new WeakMap)).set(l,this),this._initializeFromPort(l);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(m){this._port=m,this._messageHandler=new _message_handler.MessageHandler("main","worker",m),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:m}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,m)||(m=PDFWorkerUtil.createCDNWrapper(new URL(m,window.location).href));const l=new Worker(m),R=new _message_handler.MessageHandler("main","worker",l),p=()=>{l.removeEventListener("error",H),R.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},H=()=>{this._webWorker||p()};l.addEventListener("error",H),R.on("test",S=>{if(l.removeEventListener("error",H),this.destroyed){p();return}S?(this._messageHandler=R,this._port=l,this._webWorker=l,this._readyCapability.resolve(),R.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),R.destroy(),l.terminate())}),R.on("ready",S=>{if(l.removeEventListener("error",H),this.destroyed){p();return}try{V()}catch{this._setupFakeWorker()}});const V=()=>{const S=new Uint8Array;R.send("test",S,[S.buffer])};V();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(m=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const l=new LoopbackPort;this._port=l;const R="fake".concat(PDFWorkerUtil.fakeWorkerId++),p=new _message_handler.MessageHandler(R+"_worker",R,l);m.setup(p,l);const H=new _message_handler.MessageHandler(R,R+"_worker",l);this._messageHandler=H,this._readyCapability.resolve(),H.send("configure",{verbosity:this.verbosity})}).catch(m=>{this._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(m.message,'".')))})}destroy(){var m;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(m=t(_PDFWorker,O))==null||m.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(m){var R;if(!(m!=null&&m.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const l=(R=t(this,O))==null?void 0:R.get(m.port);if(l){if(l._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return l}return new _PDFWorker(m)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var m;try{return((m=globalThis.pdfjsWorker)==null?void 0:m.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};O=new WeakMap,U(_PDFWorker,O,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(l,R,p,H,V){U(this,f);U(this,I,new Map);U(this,x,new Map);U(this,v,new Map);U(this,A,null);this.messageHandler=l,this.loadingTask=R,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:H.ownerDocument,styleElement:H.styleElement}),this._params=H,this.canvasFactory=V.canvasFactory,this.filterFactory=V.filterFactory,this.cMapReaderFactory=V.cMapReaderFactory,this.standardFontDataFactory=V.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=p,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(l,R=_util.AnnotationMode.ENABLE,p=null,H=!1){let V=_util.RenderingIntentFlag.DISPLAY,S=_annotation_storage.SerializableEmpty;switch(l){case"any":V=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":V=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(l))}switch(R){case _util.AnnotationMode.DISABLE:V+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:V+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:V+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,S=(V&_util.RenderingIntentFlag.PRINT&&p instanceof _annotation_storage.PrintAnnotationStorage?p:this.annotationStorage).serializable;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(R))}return H&&(V+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:V,cacheKey:"".concat(V,"_").concat(S.hash),annotationStorageSerializable:S}}destroy(){var p;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(p=t(this,A))==null||p.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const H of t(this,x).values())l.push(H._destroy());t(this,x).clear(),t(this,v).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const R=this.messageHandler.sendWithPromise("Terminate",null);return l.push(R),Promise.all(l).then(()=>{var H;this.commonObjs.clear(),this.fontLoader.clear(),t(this,I).clear(),this.filterFactory.destroy(),(H=this._networkStream)==null||H.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:R}=this;l.on("GetReader",(p,H)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=V=>{this._lastProgress={loaded:V.loaded,total:V.total}},H.onPull=()=>{this._fullReader.read().then(function({value:V,done:S}){if(S){H.close();return}(0,_util.assert)(V instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),H.enqueue(new Uint8Array(V),1,[V])}).catch(V=>{H.error(V)})},H.onCancel=V=>{this._fullReader.cancel(V),H.ready.catch(S=>{if(!this.destroyed)throw S})}}),l.on("ReaderHeadersReady",p=>{const H=new _util.PromiseCapability,V=this._fullReader;return V.headersReady.then(()=>{var S;(!V.isStreamingSupported||!V.isRangeSupported)&&(this._lastProgress&&((S=R.onProgress)==null||S.call(R,this._lastProgress)),V.onProgress=q=>{var nt;(nt=R.onProgress)==null||nt.call(R,{loaded:q.loaded,total:q.total})}),H.resolve({isStreamingSupported:V.isStreamingSupported,isRangeSupported:V.isRangeSupported,contentLength:V.contentLength})},H.reject),H.promise}),l.on("GetRangeReader",(p,H)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const V=this._networkStream.getRangeReader(p.begin,p.end);if(!V){H.close();return}H.onPull=()=>{V.read().then(function({value:S,done:q}){if(q){H.close();return}(0,_util.assert)(S instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),H.enqueue(new Uint8Array(S),1,[S])}).catch(S=>{H.error(S)})},H.onCancel=S=>{V.cancel(S),H.ready.catch(q=>{if(!this.destroyed)throw q})}}),l.on("GetDoc",({pdfInfo:p})=>{this._numPages=p.numPages,this._htmlForXfa=p.htmlForXfa,delete p.htmlForXfa,R._capability.resolve(new PDFDocumentProxy(p,this))}),l.on("DocException",function(p){let H;switch(p.name){case"PasswordException":H=new _util.PasswordException(p.message,p.code);break;case"InvalidPDFException":H=new _util.InvalidPDFException(p.message);break;case"MissingPDFException":H=new _util.MissingPDFException(p.message);break;case"UnexpectedResponseException":H=new _util.UnexpectedResponseException(p.message,p.status);break;case"UnknownErrorException":H=new _util.UnknownErrorException(p.message,p.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}R._capability.reject(H)}),l.on("PasswordRequest",p=>{if(it(this,A,new _util.PromiseCapability),R.onPassword){const H=V=>{V instanceof Error?t(this,A).reject(V):t(this,A).resolve({password:V})};try{R.onPassword(H,p.code)}catch(V){t(this,A).reject(V)}}else t(this,A).reject(new _util.PasswordException(p.message,p.code));return t(this,A).promise}),l.on("DataLoaded",p=>{var H;(H=R.onProgress)==null||H.call(R,{loaded:p.length,total:p.length}),this.downloadInfoCapability.resolve(p)}),l.on("StartRenderPage",p=>{if(this.destroyed)return;t(this,x).get(p.pageIndex)._startRenderPage(p.transparency,p.cacheKey)}),l.on("commonobj",([p,H,V])=>{var S;if(!this.destroyed&&!this.commonObjs.has(p))switch(H){case"Font":const q=this._params;if("error"in V){const $=V.error;(0,_util.warn)("Error during font loading: ".concat($)),this.commonObjs.resolve(p,$);break}const nt=q.pdfBug&&((S=globalThis.FontInspector)!=null&&S.enabled)?($,ct)=>globalThis.FontInspector.fontAdded($,ct):null,ot=new _font_loader.FontFaceObject(V,{isEvalSupported:q.isEvalSupported,disableFontFace:q.disableFontFace,ignoreErrors:q.ignoreErrors,inspectFont:nt});this.fontLoader.bind(ot).catch($=>l.sendWithPromise("FontFallback",{id:p})).finally(()=>{!q.fontExtraProperties&&ot.data&&(ot.data=null),this.commonObjs.resolve(p,ot)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(p,V);break;default:throw new Error("Got unknown common object type ".concat(H))}}),l.on("obj",([p,H,V,S])=>{var nt;if(this.destroyed)return;const q=t(this,x).get(H);if(!q.objs.has(p))switch(V){case"Image":if(q.objs.resolve(p,S),S){let ot;if(S.bitmap){const{width:$,height:ct}=S;ot=$*ct*4}else ot=((nt=S.data)==null?void 0:nt.length)||0;ot>_util.MAX_IMAGE_SIZE_TO_CACHE&&(q._maybeCleanupAfterRender=!0)}break;case"Pattern":q.objs.resolve(p,S);break;default:throw new Error("Got unknown object type ".concat(V))}}),l.on("DocProgress",p=>{var H;this.destroyed||(H=R.onProgress)==null||H.call(R,{loaded:p.loaded,total:p.total})}),l.on("FetchBuiltInCMap",p=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(p):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",p=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(p):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var p,H;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:l,transfers:R}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:l,filename:(H=(p=this._fullReader)==null?void 0:p.filename)!=null?H:null},R).finally(()=>{this.annotationStorage.resetModified()})}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const R=l-1,p=t(this,v).get(R);if(p)return p;const H=this.messageHandler.sendWithPromise("GetPage",{pageIndex:R}).then(V=>{if(this.destroyed)throw new Error("Transport destroyed");const S=new PDFPageProxy(R,V,this,this._params.pdfBug);return t(this,x).set(R,S),S});return t(this,v).set(R,H),H}getPageIndex(l){return typeof l!="object"||l===null||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,R){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:R})}getFieldObjects(){return X(this,f,Te).call(this,"GetFieldObjects")}hasJSActions(){return X(this,f,Te).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return typeof l!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return X(this,f,Te).call(this,"GetDocJSActions")}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const l="GetMetadata",R=t(this,I).get(l);if(R)return R;const p=this.messageHandler.sendWithPromise(l,null).then(H=>{var V,S,q,nt;return{info:H[0],metadata:H[1]?new _metadata.Metadata(H[1]):null,contentDispositionFilename:(S=(V=this._fullReader)==null?void 0:V.filename)!=null?S:null,contentLength:(nt=(q=this._fullReader)==null?void 0:q.contentLength)!=null?nt:null}});return t(this,I).set(l,p),p}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(l=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const R of t(this,x).values())if(!R.cleanup())throw new Error("startCleanup: Page ".concat(R.pageNumber," is currently rendering."));this.commonObjs.clear(),l||this.fontLoader.clear(),t(this,I).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:l,enableXfa:R}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l,enableXfa:R})}}I=new WeakMap,x=new WeakMap,v=new WeakMap,A=new WeakMap,f=new WeakSet,Te=function(l,R=null){const p=t(this,I).get(l);if(p)return p;const H=this.messageHandler.sendWithPromise(l,R);return t(this,I).set(l,H),H};class PDFObjects{constructor(){U(this,T);U(this,P,Object.create(null))}get(l,R=null){if(R){const H=X(this,T,Be).call(this,l);return H.capability.promise.then(()=>R(H.data)),null}const p=t(this,P)[l];if(!(p!=null&&p.capability.settled))throw new Error("Requesting object that isn't resolved yet ".concat(l,"."));return p.data}has(l){const R=t(this,P)[l];return(R==null?void 0:R.capability.settled)||!1}resolve(l,R=null){const p=X(this,T,Be).call(this,l);p.data=R,p.capability.resolve()}clear(){var l;for(const R in t(this,P)){const{data:p}=t(this,P)[R];(l=p==null?void 0:p.bitmap)==null||l.close()}it(this,P,Object.create(null))}}P=new WeakMap,T=new WeakSet,Be=function(l){var R;return(R=t(this,P))[l]||(R[l]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(l){U(this,o,null);it(this,o,l),this.onContinue=null}get promise(){return t(this,o).capability.promise}cancel(l=0){t(this,o).cancel(null,l)}get separateAnnots(){const{separateAnnots:l}=t(this,o).operatorList;if(!l)return!1;const{annotationCanvasMap:R}=t(this,o);return l.form||l.canvas&&(R==null?void 0:R.size)>0}}o=new WeakMap,exports.RenderTask=RenderTask;const M=class M{constructor({callback:l,params:R,objs:p,commonObjs:H,annotationCanvasMap:V,operatorList:S,pageIndex:q,canvasFactory:nt,filterFactory:ot,useRequestAnimationFrame:$=!1,pdfBug:ct=!1,pageColors:mt=null}){this.callback=l,this.params=R,this.objs=p,this.commonObjs=H,this.annotationCanvasMap=V,this.operatorListIdx=null,this.operatorList=S,this._pageIndex=q,this.canvasFactory=nt,this.filterFactory=ot,this._pdfBug=ct,this.pageColors=mt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=$===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=R.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:R}){var q,nt;if(this.cancelled)return;if(this._canvas){if(t(M,h).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(M,h).add(this._canvas)}this._pdfBug&&((q=globalThis.StepperManager)!=null&&q.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:p,viewport:H,transform:V,background:S}=this.params;this.gfx=new _canvas.CanvasGraphics(p,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:R},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:V,viewport:H,transparency:l,background:S}),this.operatorListIdx=0,this.graphicsReady=!0,(nt=this.graphicsReadyCallback)==null||nt.call(this)}cancel(l=null,R=0){var p;this.running=!1,this.cancelled=!0,(p=this.gfx)==null||p.endDrawing(),t(M,h).delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),R))}operatorListChanged(){var l;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(l=this.stepper)==null||l.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(M,h).delete(this._canvas),this.callback())))}};h=new WeakMap,U(M,h,new WeakSet);let InternalRenderTask=M;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(k,s,L)=>{var w,g,O,An,x;Object.defineProperty(s,"__esModule",{value:!0}),s.SerializableEmpty=s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var r=L(1),u=L(4),G=L(8);const W=Object.freeze({map:null,hash:"",transfers:void 0});s.SerializableEmpty=W;class ut{constructor(){U(this,O);U(this,w,!1);U(this,g,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(A,f){const _=t(this,g).get(A);return _===void 0?f:Object.assign(f,_)}getRawValue(A){return t(this,g).get(A)}remove(A){if(t(this,g).delete(A),t(this,g).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const f of t(this,g).values())if(f instanceof u.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(A,f){const _=t(this,g).get(A);let P=!1;if(_!==void 0)for(const[T,y]of Object.entries(f))_[T]!==y&&(P=!0,_[T]=y);else P=!0,t(this,g).set(A,f);P&&X(this,O,An).call(this),f instanceof u.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(f.constructor._type)}has(A){return t(this,g).has(A)}getAll(){return t(this,g).size>0?(0,r.objectFromMap)(t(this,g)):null}setAll(A){for(const[f,_]of Object.entries(A))this.setValue(f,_)}get size(){return t(this,g).size}resetModified(){t(this,w)&&(it(this,w,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new F(this)}get serializable(){if(t(this,g).size===0)return W;const A=new Map,f=new G.MurmurHash3_64,_=[],P=Object.create(null);let T=!1;for(const[y,o]of t(this,g)){const h=o instanceof u.AnnotationEditor?o.serialize(!1,P):o;h&&(A.set(y,h),f.update("".concat(y,":").concat(JSON.stringify(h))),T||(T=!!h.bitmap))}if(T)for(const y of A.values())y.bitmap&&_.push(y.bitmap);return A.size>0?{map:A,hash:f.hexdigest(),transfers:_}:W}}w=new WeakMap,g=new WeakMap,O=new WeakSet,An=function(){t(this,w)||(it(this,w,!0),typeof this.onSetModified=="function"&&this.onSetModified())},s.AnnotationStorage=ut;class F extends ut{constructor(f){super();U(this,x,void 0);const{map:_,hash:P,transfers:T}=f.serializable,y=structuredClone(_,T?{transfer:T}:null);it(this,x,{map:y,hash:P,transfers:T})}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,x)}}x=new WeakMap,s.PrintAnnotationStorage=F},(k,s,L)=>{var F,w,g,O,I,x,v,A,f,_,P,T,y,o,h,je,m,Ue,R,We,H,He,S,vn,nt,En,$,Sn,mt,$e,Tt,Tn;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var r=L(5),u=L(1),G=L(6);const n=class n{constructor(i){U(this,h);U(this,m);U(this,H);U(this,S);U(this,nt);U(this,$);U(this,mt);U(this,Tt);U(this,F,"");U(this,w,!1);U(this,g,null);U(this,O,null);U(this,I,null);U(this,x,!1);U(this,v,null);U(this,A,this.focusin.bind(this));U(this,f,this.focusout.bind(this));U(this,_,!1);U(this,P,!1);U(this,T,!1);ee(this,"_initialOptions",Object.create(null));ee(this,"_uiManager",null);ee(this,"_focusEventsAllowed",!0);ee(this,"_l10nPromise",null);U(this,y,!1);U(this,o,n._zIndex++);this.constructor===n&&(0,u.unreachable)("Cannot initialize AnnotationEditor."),this.parent=i.parent,this.id=i.id,this.width=this.height=null,this.pageIndex=i.parent.pageIndex,this.name=i.name,this.div=null,this._uiManager=i.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=i.isCentered,this._structTreeParentId=null;const{rotation:c,rawDims:{pageWidth:d,pageHeight:E,pageX:D,pageY:j}}=this.parent.viewport;this.rotation=c,this.pageRotation=(360+c-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[d,E],this.pageTranslation=[D,j];const[st,Z]=this.parentDimensions;this.x=i.x/st,this.y=i.y/Z,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,u.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(i){const c=new ut({id:i.parent.getNextId(),parent:i.parent,uiManager:i._uiManager});c.annotationElementId=i.annotationElementId,c.deleted=!0,c._uiManager.addToAnnotationStorage(c)}static initialize(i,c=null){if(n._l10nPromise||(n._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(E=>[E,i.get(E)]))),c!=null&&c.strings)for(const E of c.strings)n._l10nPromise.set(E,i.get(E));if(n._borderLineWidth!==-1)return;const d=getComputedStyle(document.documentElement);n._borderLineWidth=parseFloat(d.getPropertyValue("--outline-width"))||0}static updateDefaultParams(i,c){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(i){return!1}static paste(i,c){(0,u.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,y)}set _isDraggable(i){var c;it(this,y,i),(c=this.div)==null||c.classList.toggle("draggable",i)}center(){const[i,c]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*c/(i*2),this.y+=this.width*i/(c*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*c/(i*2),this.y-=this.width*i/(c*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(i){this._uiManager.addCommands(i)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,o)}setParent(i){i!==null&&(this.pageIndex=i.pageIndex,this.pageDimensions=i.pageDimensions),this.parent=i}focusin(i){this._focusEventsAllowed&&(t(this,_)?it(this,_,!1):this.parent.setSelected(this))}focusout(i){var d;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const c=i.relatedTarget;c!=null&&c.closest("#".concat(this.id))||(i.preventDefault(),(d=this.parent)!=null&&d.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(i,c,d,E){const[D,j]=this.parentDimensions;[d,E]=this.screenToPageTranslation(d,E),this.x=(i+d)/D,this.y=(c+E)/j,this.fixAndSetPosition()}translate(i,c){X(this,h,je).call(this,this.parentDimensions,i,c)}translateInPage(i,c){X(this,h,je).call(this,this.pageDimensions,i,c),this.div.scrollIntoView({block:"nearest"})}drag(i,c){const[d,E]=this.parentDimensions;if(this.x+=i/d,this.y+=c/E,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:rt,y:dt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,rt,dt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:D,y:j}=this;const[st,Z]=X(this,m,Ue).call(this);D+=st,j+=Z,this.div.style.left="".concat((100*D).toFixed(2),"%"),this.div.style.top="".concat((100*j).toFixed(2),"%"),this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[i,c]=this.pageDimensions;let{x:d,y:E,width:D,height:j}=this;switch(D*=i,j*=c,d*=i,E*=c,this.rotation){case 0:d=Math.max(0,Math.min(i-D,d)),E=Math.max(0,Math.min(c-j,E));break;case 90:d=Math.max(0,Math.min(i-j,d)),E=Math.min(c,Math.max(D,E));break;case 180:d=Math.min(i,Math.max(D,d)),E=Math.min(c,Math.max(j,E));break;case 270:d=Math.min(i,Math.max(j,d)),E=Math.max(0,Math.min(c-D,E));break}this.x=d/=i,this.y=E/=c;const[st,Z]=X(this,m,Ue).call(this);d+=st,E+=Z;const{style:rt}=this.div;rt.left="".concat((100*d).toFixed(2),"%"),rt.top="".concat((100*E).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(i,c){var d;return X(d=n,R,We).call(d,i,c,this.parentRotation)}pageTranslationToScreen(i,c){var d;return X(d=n,R,We).call(d,i,c,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:i,pageDimensions:[c,d]}=this,E=c*i,D=d*i;return u.FeatureTest.isCSSRoundSupported?[Math.round(E),Math.round(D)]:[E,D]}setDims(i,c){var D;const[d,E]=this.parentDimensions;this.div.style.width="".concat((100*i/d).toFixed(2),"%"),t(this,x)||(this.div.style.height="".concat((100*c/E).toFixed(2),"%")),(D=t(this,g))==null||D.classList.toggle("small",i<n.SMALL_EDITOR_SIZE||c<n.SMALL_EDITOR_SIZE)}fixDims(){const{style:i}=this.div,{height:c,width:d}=i,E=d.endsWith("%"),D=!t(this,x)&&c.endsWith("%");if(E&&D)return;const[j,st]=this.parentDimensions;E||(i.width="".concat((100*parseFloat(d)/j).toFixed(2),"%")),!t(this,x)&&!D&&(i.height="".concat((100*parseFloat(c)/st).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(t(this,g))return;const i=it(this,g,document.createElement("button"));i.className="altText";const c=await n._l10nPromise.get("editor_alt_text_button_label");i.textContent=c,i.setAttribute("aria-label",c),i.tabIndex="0",i.addEventListener("contextmenu",G.noContextMenu),i.addEventListener("pointerdown",d=>d.stopPropagation()),i.addEventListener("click",d=>{d.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),i.addEventListener("keydown",d=>{d.target===i&&d.key==="Enter"&&(d.preventDefault(),this._uiManager.editAltText(this))}),X(this,mt,$e).call(this),this.div.append(i),n.SMALL_EDITOR_SIZE||(n.SMALL_EDITOR_SIZE=Math.min(128,Math.round(i.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:t(this,F),decorative:t(this,w)}}set altTextData({altText:i,decorative:c}){t(this,F)===i&&t(this,w)===c||(it(this,F,i),it(this,w,c),X(this,mt,$e).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,A)),this.div.addEventListener("focusout",t(this,f));const[i,c]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth="".concat((100*c/i).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*i/c).toFixed(2),"%"));const[d,E]=this.getInitialTranslation();return this.translate(d,E),(0,r.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(i){const{isMac:c}=u.FeatureTest.platform;if(i.button!==0||i.ctrlKey&&c){i.preventDefault();return}it(this,_,!0),X(this,Tt,Tn).call(this,i)}moveInDOM(){var i;(i=this.parent)==null||i.moveEditorInDOM(this)}_setParentAndPosition(i,c,d){i.changeParent(this),this.x=c,this.y=d,this.fixAndSetPosition()}getRect(i,c){const d=this.parentScale,[E,D]=this.pageDimensions,[j,st]=this.pageTranslation,Z=i/d,rt=c/d,dt=this.x*E,pt=this.y*D,lt=this.width*E,Ct=this.height*D;switch(this.rotation){case 0:return[dt+Z+j,D-pt-rt-Ct+st,dt+Z+lt+j,D-pt-rt+st];case 90:return[dt+rt+j,D-pt+Z+st,dt+rt+Ct+j,D-pt+Z+lt+st];case 180:return[dt-Z-lt+j,D-pt+rt+st,dt-Z+j,D-pt+rt+Ct+st];case 270:return[dt-rt-Ct+j,D-pt-Z-lt+st,dt-rt+j,D-pt-Z+st];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(i,c){const[d,E,D,j]=i,st=D-d,Z=j-E;switch(this.rotation){case 0:return[d,c-j,st,Z];case 90:return[d,c-E,Z,st];case 180:return[D,c-E,st,Z];case 270:return[D,c-j,Z,st];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){it(this,T,!0)}disableEditMode(){it(this,T,!1)}isInEditMode(){return t(this,T)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var i,c;(i=this.div)==null||i.addEventListener("focusin",t(this,A)),(c=this.div)==null||c.addEventListener("focusout",t(this,f))}serialize(i=!1,c=null){(0,u.unreachable)("An editor must be serializable")}static deserialize(i,c,d){const E=new this.prototype.constructor({parent:c,id:c.getNextId(),uiManager:d});E.rotation=i.rotation;const[D,j]=E.pageDimensions,[st,Z,rt,dt]=E.getRectInCurrentCoords(i.rect,j);return E.x=st/D,E.y=Z/j,E.width=rt/D,E.height=dt/j,E}remove(){var i;this.div.removeEventListener("focusin",t(this,A)),this.div.removeEventListener("focusout",t(this,f)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(i=t(this,g))==null||i.remove(),it(this,g,null),it(this,O,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(X(this,S,vn).call(this),t(this,v).classList.remove("hidden"))}select(){var i;this.makeResizable(),(i=this.div)==null||i.classList.add("selectedEditor")}unselect(){var i,c,d;(i=t(this,v))==null||i.classList.add("hidden"),(c=this.div)==null||c.classList.remove("selectedEditor"),(d=this.div)!=null&&d.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(i,c){}disableEditing(){t(this,g)&&(t(this,g).hidden=!0)}enableEditing(){t(this,g)&&(t(this,g).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,P)}set isEditing(i){it(this,P,i),this.parent&&(i?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(i,c){it(this,x,!0);const d=i/c,{style:E}=this.div;E.aspectRatio=d,E.height="auto"}static get MIN_SIZE(){return 16}};F=new WeakMap,w=new WeakMap,g=new WeakMap,O=new WeakMap,I=new WeakMap,x=new WeakMap,v=new WeakMap,A=new WeakMap,f=new WeakMap,_=new WeakMap,P=new WeakMap,T=new WeakMap,y=new WeakMap,o=new WeakMap,h=new WeakSet,je=function([i,c],d,E){[d,E]=this.screenToPageTranslation(d,E),this.x+=d/i,this.y+=E/c,this.fixAndSetPosition()},m=new WeakSet,Ue=function(){const[i,c]=this.parentDimensions,{_borderLineWidth:d}=n,E=d/i,D=d/c;switch(this.rotation){case 90:return[-E,D];case 180:return[E,D];case 270:return[E,-D];default:return[-E,-D]}},R=new WeakSet,We=function(i,c,d){switch(d){case 90:return[c,-i];case 180:return[-i,-c];case 270:return[-c,i];default:return[i,c]}},H=new WeakSet,He=function(i){switch(i){case 90:{const[c,d]=this.pageDimensions;return[0,-c/d,d/c,0]}case 180:return[-1,0,0,-1];case 270:{const[c,d]=this.pageDimensions;return[0,c/d,-d/c,0]}default:return[1,0,0,1]}},S=new WeakSet,vn=function(){if(t(this,v))return;it(this,v,document.createElement("div")),t(this,v).classList.add("resizers");const i=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||i.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const c of i){const d=document.createElement("div");t(this,v).append(d),d.classList.add("resizer",c),d.addEventListener("pointerdown",X(this,nt,En).bind(this,c)),d.addEventListener("contextmenu",G.noContextMenu)}this.div.prepend(t(this,v))},nt=new WeakSet,En=function(i,c){c.preventDefault();const{isMac:d}=u.FeatureTest.platform;if(c.button!==0||c.ctrlKey&&d)return;const E=X(this,$,Sn).bind(this,i),D=this._isDraggable;this._isDraggable=!1;const j={passive:!0,capture:!0};window.addEventListener("pointermove",E,j);const st=this.x,Z=this.y,rt=this.width,dt=this.height,pt=this.parent.div.style.cursor,lt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(c.target).cursor;const Ct=()=>{this._isDraggable=D,window.removeEventListener("pointerup",Ct),window.removeEventListener("blur",Ct),window.removeEventListener("pointermove",E,j),this.parent.div.style.cursor=pt,this.div.style.cursor=lt;const Ot=this.x,vt=this.y,Dt=this.width,gt=this.height;Ot===st&&vt===Z&&Dt===rt&&gt===dt||this.addCommands({cmd:()=>{this.width=Dt,this.height=gt,this.x=Ot,this.y=vt;const[tt,et]=this.parentDimensions;this.setDims(tt*Dt,et*gt),this.fixAndSetPosition()},undo:()=>{this.width=rt,this.height=dt,this.x=st,this.y=Z;const[tt,et]=this.parentDimensions;this.setDims(tt*rt,et*dt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Ct),window.addEventListener("blur",Ct)},$=new WeakSet,Sn=function(i,c){const[d,E]=this.parentDimensions,D=this.x,j=this.y,st=this.width,Z=this.height,rt=n.MIN_SIZE/d,dt=n.MIN_SIZE/E,pt=_t=>Math.round(_t*1e4)/1e4,lt=X(this,H,He).call(this,this.rotation),Ct=(_t,At)=>[lt[0]*_t+lt[2]*At,lt[1]*_t+lt[3]*At],Ot=X(this,H,He).call(this,360-this.rotation),vt=(_t,At)=>[Ot[0]*_t+Ot[2]*At,Ot[1]*_t+Ot[3]*At];let Dt,gt,tt=!1,et=!1;switch(i){case"topLeft":tt=!0,Dt=(_t,At)=>[0,0],gt=(_t,At)=>[_t,At];break;case"topMiddle":Dt=(_t,At)=>[_t/2,0],gt=(_t,At)=>[_t/2,At];break;case"topRight":tt=!0,Dt=(_t,At)=>[_t,0],gt=(_t,At)=>[0,At];break;case"middleRight":et=!0,Dt=(_t,At)=>[_t,At/2],gt=(_t,At)=>[0,At/2];break;case"bottomRight":tt=!0,Dt=(_t,At)=>[_t,At],gt=(_t,At)=>[0,0];break;case"bottomMiddle":Dt=(_t,At)=>[_t/2,At],gt=(_t,At)=>[_t/2,0];break;case"bottomLeft":tt=!0,Dt=(_t,At)=>[0,At],gt=(_t,At)=>[_t,0];break;case"middleLeft":et=!0,Dt=(_t,At)=>[0,At/2],gt=(_t,At)=>[_t,At/2];break}const ft=Dt(st,Z),wt=gt(st,Z);let Pt=Ct(...wt);const Ht=pt(D+Pt[0]),$t=pt(j+Pt[1]);let jt=1,qt=1,[Gt,Wt]=this.screenToPageTranslation(c.movementX,c.movementY);if([Gt,Wt]=vt(Gt/d,Wt/E),tt){const _t=Math.hypot(st,Z);jt=qt=Math.max(Math.min(Math.hypot(wt[0]-ft[0]-Gt,wt[1]-ft[1]-Wt)/_t,1/st,1/Z),rt/st,dt/Z)}else et?jt=Math.max(rt,Math.min(1,Math.abs(wt[0]-ft[0]-Gt)))/st:qt=Math.max(dt,Math.min(1,Math.abs(wt[1]-ft[1]-Wt)))/Z;const Vt=pt(st*jt),ht=pt(Z*qt);Pt=Ct(...gt(Vt,ht));const Q=Ht-Pt[0],Y=$t-Pt[1];this.width=Vt,this.height=ht,this.x=Q,this.y=Y,this.setDims(d*Vt,E*ht),this.fixAndSetPosition()},mt=new WeakSet,$e=async function(){var d;const i=t(this,g);if(!i)return;if(!t(this,F)&&!t(this,w)){i.classList.remove("done"),(d=t(this,O))==null||d.remove();return}n._l10nPromise.get("editor_alt_text_edit_button_label").then(E=>{i.setAttribute("aria-label",E)});let c=t(this,O);if(!c){it(this,O,c=document.createElement("span")),c.className="tooltip",c.setAttribute("role","tooltip");const E=c.id="alt-text-tooltip-".concat(this.id);i.setAttribute("aria-describedby",E);const D=100;i.addEventListener("mouseenter",()=>{it(this,I,setTimeout(()=>{it(this,I,null),t(this,O).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},D))}),i.addEventListener("mouseleave",()=>{var j;clearTimeout(t(this,I)),it(this,I,null),(j=t(this,O))==null||j.classList.remove("show")})}i.classList.add("done"),c.innerText=t(this,w)?await n._l10nPromise.get("editor_alt_text_decorative_tooltip"):t(this,F),c.parentNode||i.append(c)},Tt=new WeakSet,Tn=function(i){if(!this._isDraggable)return;const c=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let d,E;c&&(d={passive:!0,capture:!0},E=j=>{const[st,Z]=this.screenToPageTranslation(j.movementX,j.movementY);this._uiManager.dragSelectedEditors(st,Z)},window.addEventListener("pointermove",E,d));const D=()=>{if(window.removeEventListener("pointerup",D),window.removeEventListener("blur",D),c&&window.removeEventListener("pointermove",E,d),it(this,_,!1),!this._uiManager.endDragSession()){const{isMac:j}=u.FeatureTest.platform;i.ctrlKey&&!j||i.shiftKey||i.metaKey&&j?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",D),window.addEventListener("blur",D)},U(n,R),ee(n,"_borderLineWidth",-1),ee(n,"_colorManager",new r.ColorManager),ee(n,"_zIndex",1),ee(n,"SMALL_EDITOR_SIZE",0);let W=n;s.AnnotationEditor=W;class ut extends W{constructor(i){super(i),this.annotationElementId=i.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(k,s,L)=>{var x,v,A,f,_,Ge,y,o,h,M,m,wn,p,H,V,S,q,nt,ot,$,ct,mt,Et,Tt,C,n,a,i,c,d,E,D,j,st,Z,rt,dt,pt,lt,Ct,Ot,vt,Dt,gt,tt,et,ft,Pn,Pt,Ve,$t,ze,qt,we,Wt,qe,ht,Xe,Y,re,At,me,Zt,xn,St,Cn,Rt,Ye,Bt,be,yt,Ke;Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=G,s.opacityToHex=W;var r=L(1),u=L(6);function G(N,e,b){for(const B of b)e.addEventListener(B,N[B].bind(N))}function W(N){return Math.round(Math.min(255,Math.max(1,255*N))).toString(16).padStart(2,"0")}class ut{constructor(){U(this,x,0)}getId(){return"".concat(r.AnnotationEditorPrefix).concat(ge(this,x)._++)}}x=new WeakMap;const T=class T{constructor(){U(this,_);U(this,v,(0,r.getUuid)());U(this,A,0);U(this,f,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',B=new OffscreenCanvas(1,3).getContext("2d"),z=new Image;z.src=e;const K=z.decode().then(()=>(B.drawImage(z,0,0,1,1,0,0,1,3),new Uint32Array(B.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,r.shadow)(this,"_isSVGFittingCanvas",K)}async getFromFile(e){const{lastModified:b,name:B,size:z,type:K}=e;return X(this,_,Ge).call(this,"".concat(b,"_").concat(B,"_").concat(z,"_").concat(K),e)}async getFromUrl(e){return X(this,_,Ge).call(this,e,e)}async getFromId(e){t(this,f)||it(this,f,new Map);const b=t(this,f).get(e);return b?b.bitmap?(b.refCounter+=1,b):b.file?this.getFromFile(b.file):this.getFromUrl(b.url):null}getSvgUrl(e){const b=t(this,f).get(e);return b!=null&&b.isSvg?b.svgUrl:null}deleteId(e){t(this,f)||it(this,f,new Map);const b=t(this,f).get(e);b&&(b.refCounter-=1,b.refCounter===0&&(b.bitmap=null))}isValidId(e){return e.startsWith("image_".concat(t(this,v),"_"))}};v=new WeakMap,A=new WeakMap,f=new WeakMap,_=new WeakSet,Ge=async function(e,b){t(this,f)||it(this,f,new Map);let B=t(this,f).get(e);if(B===null)return null;if(B!=null&&B.bitmap)return B.refCounter+=1,B;try{B||(B={bitmap:null,id:"image_".concat(t(this,v),"_").concat(ge(this,A)._++),refCounter:0,isSvg:!1});let z;if(typeof b=="string"){B.url=b;const K=await fetch(b);if(!K.ok)throw new Error(K.statusText);z=await K.blob()}else z=B.file=b;if(z.type==="image/svg+xml"){const K=T._isSVGFittingCanvas,at=new FileReader,bt=new Image,xt=new Promise((kt,zt)=>{bt.onload=()=>{B.bitmap=bt,B.isSvg=!0,kt()},at.onload=async()=>{const Ft=B.svgUrl=at.result;bt.src=await K?"".concat(Ft,"#svgView(preserveAspectRatio(none))"):Ft},bt.onerror=at.onerror=zt});at.readAsDataURL(z),await xt}else B.bitmap=await createImageBitmap(z);B.refCounter=1}catch(z){console.error(z),B=null}return t(this,f).set(e,B),B&&t(this,f).set(B.id,B),B};let F=T;class w{constructor(e=128){U(this,y,[]);U(this,o,!1);U(this,h,void 0);U(this,M,-1);it(this,h,e)}add({cmd:e,undo:b,mustExec:B,type:z=NaN,overwriteIfSameType:K=!1,keepUndo:at=!1}){if(B&&e(),t(this,o))return;const bt={cmd:e,undo:b,type:z};if(t(this,M)===-1){t(this,y).length>0&&(t(this,y).length=0),it(this,M,0),t(this,y).push(bt);return}if(K&&t(this,y)[t(this,M)].type===z){at&&(bt.undo=t(this,y)[t(this,M)].undo),t(this,y)[t(this,M)]=bt;return}const xt=t(this,M)+1;xt===t(this,h)?t(this,y).splice(0,1):(it(this,M,xt),xt<t(this,y).length&&t(this,y).splice(xt)),t(this,y).push(bt)}undo(){t(this,M)!==-1&&(it(this,o,!0),t(this,y)[t(this,M)].undo(),it(this,o,!1),it(this,M,t(this,M)-1))}redo(){t(this,M)<t(this,y).length-1&&(it(this,M,t(this,M)+1),it(this,o,!0),t(this,y)[t(this,M)].cmd(),it(this,o,!1))}hasSomethingToUndo(){return t(this,M)!==-1}hasSomethingToRedo(){return t(this,M)<t(this,y).length-1}destroy(){it(this,y,null)}}y=new WeakMap,o=new WeakMap,h=new WeakMap,M=new WeakMap,s.CommandManager=w;class g{constructor(e){U(this,m);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:b}=r.FeatureTest.platform;for(const[B,z,K={}]of e)for(const at of B){const bt=at.startsWith("mac+");b&&bt?(this.callbacks.set(at.slice(4),{callback:z,options:K}),this.allKeys.add(at.split("+").at(-1))):!b&&!bt&&(this.callbacks.set(at,{callback:z,options:K}),this.allKeys.add(at.split("+").at(-1)))}}exec(e,b){if(!this.allKeys.has(b.key))return;const B=this.callbacks.get(X(this,m,wn).call(this,b));if(!B)return;const{callback:z,options:{bubbles:K=!1,args:at=[],checker:bt=null}}=B;bt&&!bt(e,b)||(z.bind(e,...at)(),K||(b.stopPropagation(),b.preventDefault()))}}m=new WeakSet,wn=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const b=this.buffer.join("+");return this.buffer.length=0,b},s.KeyboardManager=g;const R=class R{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,u.getColorValues)(e),(0,r.shadow)(this,"_colors",e)}convert(e){const b=(0,u.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return b;for(const[B,z]of this._colors)if(z.every((K,at)=>K===b[at]))return R._colorsMapping.get(B);return b}getHexCode(e){const b=this._colors.get(e);return b?r.Util.makeHexColor(...b):e}};ee(R,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let O=R;s.ColorManager=O;const It=class It{constructor(e,b,B,z,K,at){U(this,ft);U(this,Pt);U(this,$t);U(this,qt);U(this,Wt);U(this,ht);U(this,Y);U(this,At);U(this,Zt);U(this,St);U(this,Rt);U(this,Bt);U(this,yt);U(this,p,null);U(this,H,new Map);U(this,V,new Map);U(this,S,null);U(this,q,null);U(this,nt,new w);U(this,ot,0);U(this,$,new Set);U(this,ct,null);U(this,mt,null);U(this,Et,new Set);U(this,Tt,null);U(this,C,new ut);U(this,n,!1);U(this,a,!1);U(this,i,null);U(this,c,r.AnnotationEditorType.NONE);U(this,d,new Set);U(this,E,null);U(this,D,this.blur.bind(this));U(this,j,this.focus.bind(this));U(this,st,this.copy.bind(this));U(this,Z,this.cut.bind(this));U(this,rt,this.paste.bind(this));U(this,dt,this.keydown.bind(this));U(this,pt,this.onEditingAction.bind(this));U(this,lt,this.onPageChanging.bind(this));U(this,Ct,this.onScaleChanging.bind(this));U(this,Ot,this.onRotationChanging.bind(this));U(this,vt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});U(this,Dt,[0,0]);U(this,gt,null);U(this,tt,null);U(this,et,null);it(this,tt,e),it(this,et,b),it(this,S,B),this._eventBus=z,this._eventBus._on("editingaction",t(this,pt)),this._eventBus._on("pagechanging",t(this,lt)),this._eventBus._on("scalechanging",t(this,Ct)),this._eventBus._on("rotationchanging",t(this,Ot)),it(this,q,K.annotationStorage),it(this,Tt,K.filterFactory),it(this,E,at),this.viewParameters={realScale:u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const e=It.prototype,b=K=>{const{activeElement:at}=document;return at&&t(K,tt).contains(at)&&K.hasSomethingToControl()},B=this.TRANSLATE_SMALL,z=this.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new g([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-B,0],checker:b}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-z,0],checker:b}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[B,0],checker:b}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[z,0],checker:b}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-B],checker:b}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-z],checker:b}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,B],checker:b}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,z],checker:b}]]))}destroy(){X(this,qt,we).call(this),X(this,Pt,Ve).call(this),this._eventBus._off("editingaction",t(this,pt)),this._eventBus._off("pagechanging",t(this,lt)),this._eventBus._off("scalechanging",t(this,Ct)),this._eventBus._off("rotationchanging",t(this,Ot));for(const e of t(this,V).values())e.destroy();t(this,V).clear(),t(this,H).clear(),t(this,Et).clear(),it(this,p,null),t(this,d).clear(),t(this,nt).destroy(),t(this,S).destroy()}get hcmFilter(){return(0,r.shadow)(this,"hcmFilter",t(this,E)?t(this,Tt).addHCMFilter(t(this,E).foreground,t(this,E).background):"none")}get direction(){return(0,r.shadow)(this,"direction",getComputedStyle(t(this,tt)).direction)}editAltText(e){var b;(b=t(this,S))==null||b.editAltText(this,e)}onPageChanging({pageNumber:e}){it(this,ot,e-1)}focusMainContainer(){t(this,tt).focus()}findParent(e,b){for(const B of t(this,V).values()){const{x:z,y:K,width:at,height:bt}=B.div.getBoundingClientRect();if(e>=z&&e<=z+at&&b>=K&&b<=K+bt)return B}return null}disableUserSelect(e=!1){t(this,et).classList.toggle("noUserSelect",e)}addShouldRescale(e){t(this,Et).add(e)}removeShouldRescale(e){t(this,Et).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*u.PixelsPerInch.PDF_TO_CSS_UNITS;for(const b of t(this,Et))b.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){!e.isEmpty()&&t(this,q)&&!t(this,q).has(e.id)&&t(this,q).setValue(e.id,e)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const b of t(this,d))if(b.div.contains(e)){it(this,i,[b,e]),b._focusEventsAllowed=!1;break}}focus(){if(!t(this,i))return;const[e,b]=t(this,i);it(this,i,null),b.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),b.focus()}addEditListeners(){X(this,$t,ze).call(this),X(this,Wt,qe).call(this)}removeEditListeners(){X(this,qt,we).call(this),X(this,ht,Xe).call(this)}copy(e){var B;if(e.preventDefault(),(B=t(this,p))==null||B.commitOrRemove(),!this.hasSelection)return;const b=[];for(const z of t(this,d)){const K=z.serialize(!0);K&&b.push(K)}b.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(b))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:b}=e;for(const K of b.items)for(const at of t(this,mt))if(at.isHandlingMimeForPasting(K.type)){at.paste(K,this.currentLayer);return}let B=b.getData("application/pdfjs");if(!B)return;try{B=JSON.parse(B)}catch(K){(0,r.warn)('paste: "'.concat(K.message,'".'));return}if(!Array.isArray(B))return;this.unselectAll();const z=this.currentLayer;try{const K=[];for(const xt of B){const kt=z.deserialize(xt);if(!kt)return;K.push(kt)}const at=()=>{for(const xt of K)X(this,Rt,Ye).call(this,xt);X(this,yt,Ke).call(this,K)},bt=()=>{for(const xt of K)xt.remove()};this.addCommands({cmd:at,undo:bt,mustExec:!0})}catch(K){(0,r.warn)('paste: "'.concat(K.message,'".'))}}keydown(e){var b;(b=this.getActive())!=null&&b.shouldGetKeyboardEvents()||It._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}setEditingState(e){e?(X(this,ft,Pn).call(this),X(this,$t,ze).call(this),X(this,Wt,qe).call(this),X(this,Y,re).call(this,{isEditing:t(this,c)!==r.AnnotationEditorType.NONE,isEmpty:X(this,Bt,be).call(this),hasSomethingToUndo:t(this,nt).hasSomethingToUndo(),hasSomethingToRedo:t(this,nt).hasSomethingToRedo(),hasSelectedEditor:!1})):(X(this,Pt,Ve).call(this),X(this,qt,we).call(this),X(this,ht,Xe).call(this),X(this,Y,re).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!t(this,mt)){it(this,mt,e);for(const b of t(this,mt))X(this,At,me).call(this,b.defaultPropertiesToUpdate)}}getId(){return t(this,C).getId()}get currentLayer(){return t(this,V).get(t(this,ot))}getLayer(e){return t(this,V).get(e)}get currentPageIndex(){return t(this,ot)}addLayer(e){t(this,V).set(e.pageIndex,e),t(this,n)?e.enable():e.disable()}removeLayer(e){t(this,V).delete(e.pageIndex)}updateMode(e,b=null){if(t(this,c)!==e){if(it(this,c,e),e===r.AnnotationEditorType.NONE){this.setEditingState(!1),X(this,St,Cn).call(this);return}this.setEditingState(!0),X(this,Zt,xn).call(this),this.unselectAll();for(const B of t(this,V).values())B.updateMode(e);if(b){for(const B of t(this,H).values())if(B.annotationElementId===b){this.setSelected(B),B.enterInEditMode();break}}}}updateToolbar(e){e!==t(this,c)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,b){if(t(this,mt)){if(e===r.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(e);return}for(const B of t(this,d))B.updateParams(e,b);for(const B of t(this,mt))B.updateDefaultParams(e,b)}}enableWaiting(e=!1){if(t(this,a)!==e){it(this,a,e);for(const b of t(this,V).values())e?b.disableClick():b.enableClick(),b.div.classList.toggle("waiting",e)}}getEditors(e){const b=[];for(const B of t(this,H).values())B.pageIndex===e&&b.push(B);return b}getEditor(e){return t(this,H).get(e)}addEditor(e){t(this,H).set(e.id,e)}removeEditor(e){var b;t(this,H).delete(e.id),this.unselect(e),(!e.annotationElementId||!t(this,$).has(e.annotationElementId))&&((b=t(this,q))==null||b.remove(e.id))}addDeletedAnnotationElement(e){t(this,$).add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return t(this,$).has(e)}removeDeletedAnnotationElement(e){t(this,$).delete(e.annotationElementId),e.deleted=!1}setActiveEditor(e){t(this,p)!==e&&(it(this,p,e),e&&X(this,At,me).call(this,e.propertiesToUpdate))}toggleSelected(e){if(t(this,d).has(e)){t(this,d).delete(e),e.unselect(),X(this,Y,re).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,d).add(e),e.select(),X(this,At,me).call(this,e.propertiesToUpdate),X(this,Y,re).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const b of t(this,d))b!==e&&b.unselect();t(this,d).clear(),t(this,d).add(e),e.select(),X(this,At,me).call(this,e.propertiesToUpdate),X(this,Y,re).call(this,{hasSelectedEditor:!0})}isSelected(e){return t(this,d).has(e)}unselect(e){e.unselect(),t(this,d).delete(e),X(this,Y,re).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,d).size!==0}undo(){t(this,nt).undo(),X(this,Y,re).call(this,{hasSomethingToUndo:t(this,nt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:X(this,Bt,be).call(this)})}redo(){t(this,nt).redo(),X(this,Y,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,nt).hasSomethingToRedo(),isEmpty:X(this,Bt,be).call(this)})}addCommands(e){t(this,nt).add(e),X(this,Y,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:X(this,Bt,be).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...t(this,d)],b=()=>{for(const z of e)z.remove()},B=()=>{for(const z of e)X(this,Rt,Ye).call(this,z)};this.addCommands({cmd:b,undo:B,mustExec:!0})}commitOrRemove(){var e;(e=t(this,p))==null||e.commitOrRemove()}hasSomethingToControl(){return t(this,p)||this.hasSelection}selectAll(){for(const e of t(this,d))e.commit();X(this,yt,Ke).call(this,t(this,H).values())}unselectAll(){if(t(this,p)){t(this,p).commitOrRemove();return}if(this.hasSelection){for(const e of t(this,d))e.unselect();t(this,d).clear(),X(this,Y,re).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,b,B=!1){if(B||this.commitOrRemove(),!this.hasSelection)return;t(this,Dt)[0]+=e,t(this,Dt)[1]+=b;const[z,K]=t(this,Dt),at=[...t(this,d)],bt=1e3;t(this,gt)&&clearTimeout(t(this,gt)),it(this,gt,setTimeout(()=>{it(this,gt,null),t(this,Dt)[0]=t(this,Dt)[1]=0,this.addCommands({cmd:()=>{for(const xt of at)t(this,H).has(xt.id)&&xt.translateInPage(z,K)},undo:()=>{for(const xt of at)t(this,H).has(xt.id)&&xt.translateInPage(-z,-K)},mustExec:!1})},bt));for(const xt of at)xt.translateInPage(e,b)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),it(this,ct,new Map);for(const e of t(this,d))t(this,ct).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,ct))return!1;this.disableUserSelect(!1);const e=t(this,ct);it(this,ct,null);let b=!1;for(const[{x:z,y:K,pageIndex:at},bt]of e)bt.newX=z,bt.newY=K,bt.newPageIndex=at,b||(b=z!==bt.savedX||K!==bt.savedY||at!==bt.savedPageIndex);if(!b)return!1;const B=(z,K,at,bt)=>{if(t(this,H).has(z.id)){const xt=t(this,V).get(bt);xt?z._setParentAndPosition(xt,K,at):(z.pageIndex=bt,z.x=K,z.y=at)}};return this.addCommands({cmd:()=>{for(const[z,{newX:K,newY:at,newPageIndex:bt}]of e)B(z,K,at,bt)},undo:()=>{for(const[z,{savedX:K,savedY:at,savedPageIndex:bt}]of e)B(z,K,at,bt)},mustExec:!0}),!0}dragSelectedEditors(e,b){if(t(this,ct))for(const B of t(this,ct).keys())B.drag(e,b)}rebuild(e){if(e.parent===null){const b=this.getLayer(e.pageIndex);b?(b.changeParent(e),b.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return t(this,p)===e}getActive(){return t(this,p)}getMode(){return t(this,c)}get imageManager(){return(0,r.shadow)(this,"imageManager",new F)}};p=new WeakMap,H=new WeakMap,V=new WeakMap,S=new WeakMap,q=new WeakMap,nt=new WeakMap,ot=new WeakMap,$=new WeakMap,ct=new WeakMap,mt=new WeakMap,Et=new WeakMap,Tt=new WeakMap,C=new WeakMap,n=new WeakMap,a=new WeakMap,i=new WeakMap,c=new WeakMap,d=new WeakMap,E=new WeakMap,D=new WeakMap,j=new WeakMap,st=new WeakMap,Z=new WeakMap,rt=new WeakMap,dt=new WeakMap,pt=new WeakMap,lt=new WeakMap,Ct=new WeakMap,Ot=new WeakMap,vt=new WeakMap,Dt=new WeakMap,gt=new WeakMap,tt=new WeakMap,et=new WeakMap,ft=new WeakSet,Pn=function(){window.addEventListener("focus",t(this,j)),window.addEventListener("blur",t(this,D))},Pt=new WeakSet,Ve=function(){window.removeEventListener("focus",t(this,j)),window.removeEventListener("blur",t(this,D))},$t=new WeakSet,ze=function(){window.addEventListener("keydown",t(this,dt),{capture:!0})},qt=new WeakSet,we=function(){window.removeEventListener("keydown",t(this,dt),{capture:!0})},Wt=new WeakSet,qe=function(){document.addEventListener("copy",t(this,st)),document.addEventListener("cut",t(this,Z)),document.addEventListener("paste",t(this,rt))},ht=new WeakSet,Xe=function(){document.removeEventListener("copy",t(this,st)),document.removeEventListener("cut",t(this,Z)),document.removeEventListener("paste",t(this,rt))},Y=new WeakSet,re=function(e){Object.entries(e).some(([B,z])=>t(this,vt)[B]!==z)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,vt),e)})},At=new WeakSet,me=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},Zt=new WeakSet,xn=function(){if(!t(this,n)){it(this,n,!0);for(const e of t(this,V).values())e.enable()}},St=new WeakSet,Cn=function(){if(this.unselectAll(),t(this,n)){it(this,n,!1);for(const e of t(this,V).values())e.disable()}},Rt=new WeakSet,Ye=function(e){const b=t(this,V).get(e.pageIndex);b?b.addOrRebuild(e):this.addEditor(e)},Bt=new WeakSet,be=function(){if(t(this,H).size===0)return!0;if(t(this,H).size===1)for(const e of t(this,H).values())return e.isEmpty();return!1},yt=new WeakSet,Ke=function(e){t(this,d).clear();for(const b of e)b.isEmpty()||(t(this,d).add(b),b.select());X(this,Y,re).call(this,{hasSelectedEditor:!0})},ee(It,"TRANSLATE_SMALL",1),ee(It,"TRANSLATE_BIG",10);let I=It;s.AnnotationEditorUIManager=I},(k,s,L)=>{var ot,$,ct,mt,Et,Tt,C,n,a,i,c,d,de,D,ue,st,Je,rt,Pe,pt,xe,Ct,_e,vt,ye;Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMFilterFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=void 0,s.deprecated=M,s.getColorValues=H,s.getCurrentTransform=V,s.getCurrentTransformInverse=S,s.getFilenameFromUrl=_,s.getPdfFilenameFromUrl=P,s.getRGB=p,s.getXfaPageViewport=R,s.isDataScheme=A,s.isPdfFile=f,s.isValidFetchUrl=y,s.loadScript=h,s.noContextMenu=o,s.setLayerDimensions=q;var r=L(7),u=L(1);const G="http://www.w3.org/2000/svg",nt=class nt{};ee(nt,"CSS",96),ee(nt,"PDF",72),ee(nt,"PDF_TO_CSS_UNITS",nt.CSS/nt.PDF);let W=nt;s.PixelsPerInch=W;class ut extends r.BaseFilterFactory{constructor({docId:et,ownerDocument:ft=globalThis.document}={}){super();U(this,d);U(this,D);U(this,st);U(this,rt);U(this,pt);U(this,Ct);U(this,vt);U(this,ot,void 0);U(this,$,void 0);U(this,ct,void 0);U(this,mt,void 0);U(this,Et,void 0);U(this,Tt,void 0);U(this,C,void 0);U(this,n,void 0);U(this,a,void 0);U(this,i,void 0);U(this,c,0);it(this,ct,et),it(this,mt,ft)}addFilter(et){if(!et)return"none";let ft=t(this,d,de).get(et);if(ft)return ft;let wt,Pt,Ht,$t;if(et.length===1){const Wt=et[0],Vt=new Array(256);for(let ht=0;ht<256;ht++)Vt[ht]=Wt[ht]/255;$t=wt=Pt=Ht=Vt.join(",")}else{const[Wt,Vt,ht]=et,Q=new Array(256),Y=new Array(256),_t=new Array(256);for(let At=0;At<256;At++)Q[At]=Wt[At]/255,Y[At]=Vt[At]/255,_t[At]=ht[At]/255;wt=Q.join(","),Pt=Y.join(","),Ht=_t.join(","),$t="".concat(wt).concat(Pt).concat(Ht)}if(ft=t(this,d,de).get($t),ft)return t(this,d,de).set(et,ft),ft;const jt="g_".concat(t(this,ct),"_transfer_map_").concat(ge(this,c)._++),qt="url(#".concat(jt,")");t(this,d,de).set(et,qt),t(this,d,de).set($t,qt);const Gt=X(this,rt,Pe).call(this,jt);return X(this,Ct,_e).call(this,wt,Pt,Ht,Gt),qt}addHCMFilter(et,ft){var Vt;const wt="".concat(et,"-").concat(ft);if(t(this,Tt)===wt)return t(this,C);if(it(this,Tt,wt),it(this,C,"none"),(Vt=t(this,Et))==null||Vt.remove(),!et||!ft)return t(this,C);const Pt=X(this,vt,ye).call(this,et);et=u.Util.makeHexColor(...Pt);const Ht=X(this,vt,ye).call(this,ft);if(ft=u.Util.makeHexColor(...Ht),t(this,D,ue).style.color="",et==="#000000"&&ft==="#ffffff"||et===ft)return t(this,C);const $t=new Array(256);for(let ht=0;ht<=255;ht++){const Q=ht/255;$t[ht]=Q<=.03928?Q/12.92:((Q+.055)/1.055)**2.4}const jt=$t.join(","),qt="g_".concat(t(this,ct),"_hcm_filter"),Gt=it(this,n,X(this,rt,Pe).call(this,qt));X(this,Ct,_e).call(this,jt,jt,jt,Gt),X(this,st,Je).call(this,Gt);const Wt=(ht,Q)=>{const Y=Pt[ht]/255,_t=Ht[ht]/255,At=new Array(Q+1);for(let te=0;te<=Q;te++)At[te]=Y+te/Q*(_t-Y);return At.join(",")};return X(this,Ct,_e).call(this,Wt(0,5),Wt(1,5),Wt(2,5),Gt),it(this,C,"url(#".concat(qt,")")),t(this,C)}addHighlightHCMFilter(et,ft,wt,Pt){var _t;const Ht="".concat(et,"-").concat(ft,"-").concat(wt,"-").concat(Pt);if(t(this,a)===Ht)return t(this,i);if(it(this,a,Ht),it(this,i,"none"),(_t=t(this,n))==null||_t.remove(),!et||!ft)return t(this,i);const[$t,jt]=[et,ft].map(X(this,vt,ye).bind(this));let qt=Math.round(.2126*$t[0]+.7152*$t[1]+.0722*$t[2]),Gt=Math.round(.2126*jt[0]+.7152*jt[1]+.0722*jt[2]),[Wt,Vt]=[wt,Pt].map(X(this,vt,ye).bind(this));Gt<qt&&([qt,Gt,Wt,Vt]=[Gt,qt,Vt,Wt]),t(this,D,ue).style.color="";const ht=(At,te,Zt)=>{const J=new Array(256),St=(Gt-qt)/Zt,Lt=At/255,Rt=(te-At)/(255*Zt);let Nt=0;for(let Bt=0;Bt<=Zt;Bt++){const Jt=Math.round(qt+Bt*St),yt=Lt+Bt*Rt;for(let Yt=Nt;Yt<=Jt;Yt++)J[Yt]=yt;Nt=Jt+1}for(let Bt=Nt;Bt<256;Bt++)J[Bt]=J[Nt-1];return J.join(",")},Q="g_".concat(t(this,ct),"_hcm_highlight_filter"),Y=it(this,n,X(this,rt,Pe).call(this,Q));return X(this,st,Je).call(this,Y),X(this,Ct,_e).call(this,ht(Wt[0],Vt[0],5),ht(Wt[1],Vt[1],5),ht(Wt[2],Vt[2],5),Y),it(this,i,"url(#".concat(Q,")")),t(this,i)}destroy(et=!1){et&&(t(this,C)||t(this,i))||(t(this,$)&&(t(this,$).parentNode.parentNode.remove(),it(this,$,null)),t(this,ot)&&(t(this,ot).clear(),it(this,ot,null)),it(this,c,0))}}ot=new WeakMap,$=new WeakMap,ct=new WeakMap,mt=new WeakMap,Et=new WeakMap,Tt=new WeakMap,C=new WeakMap,n=new WeakMap,a=new WeakMap,i=new WeakMap,c=new WeakMap,d=new WeakSet,de=function(){return t(this,ot)||it(this,ot,new Map)},D=new WeakSet,ue=function(){if(!t(this,$)){const et=t(this,mt).createElement("div"),{style:ft}=et;ft.visibility="hidden",ft.contain="strict",ft.width=ft.height=0,ft.position="absolute",ft.top=ft.left=0,ft.zIndex=-1;const wt=t(this,mt).createElementNS(G,"svg");wt.setAttribute("width",0),wt.setAttribute("height",0),it(this,$,t(this,mt).createElementNS(G,"defs")),et.append(wt),wt.append(t(this,$)),t(this,mt).body.append(et)}return t(this,$)},st=new WeakSet,Je=function(et){const ft=t(this,mt).createElementNS(G,"feColorMatrix");ft.setAttribute("type","matrix"),ft.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),et.append(ft)},rt=new WeakSet,Pe=function(et){const ft=t(this,mt).createElementNS(G,"filter");return ft.setAttribute("color-interpolation-filters","sRGB"),ft.setAttribute("id",et),t(this,D,ue).append(ft),ft},pt=new WeakSet,xe=function(et,ft,wt){const Pt=t(this,mt).createElementNS(G,ft);Pt.setAttribute("type","discrete"),Pt.setAttribute("tableValues",wt),et.append(Pt)},Ct=new WeakSet,_e=function(et,ft,wt,Pt){const Ht=t(this,mt).createElementNS(G,"feComponentTransfer");Pt.append(Ht),X(this,pt,xe).call(this,Ht,"feFuncR",et),X(this,pt,xe).call(this,Ht,"feFuncG",ft),X(this,pt,xe).call(this,Ht,"feFuncB",wt)},vt=new WeakSet,ye=function(et){return t(this,D,ue).style.color=et,p(getComputedStyle(t(this,D,ue)).getPropertyValue("color"))},s.DOMFilterFactory=ut;class F extends r.BaseCanvasFactory{constructor({ownerDocument:tt=globalThis.document}={}){super(),this._document=tt}_createCanvas(tt,et){const ft=this._document.createElement("canvas");return ft.width=tt,ft.height=et,ft}}s.DOMCanvasFactory=F;async function w(gt,tt=!1){if(y(gt,document.baseURI)){const et=await fetch(gt);if(!et.ok)throw new Error(et.statusText);return tt?new Uint8Array(await et.arrayBuffer()):(0,u.stringToBytes)(await et.text())}return new Promise((et,ft)=>{const wt=new XMLHttpRequest;wt.open("GET",gt,!0),tt&&(wt.responseType="arraybuffer"),wt.onreadystatechange=()=>{if(wt.readyState===XMLHttpRequest.DONE){if(wt.status===200||wt.status===0){let Pt;if(tt&&wt.response?Pt=new Uint8Array(wt.response):!tt&&wt.responseText&&(Pt=(0,u.stringToBytes)(wt.responseText)),Pt){et(Pt);return}}ft(new Error(wt.statusText))}},wt.send(null)})}class g extends r.BaseCMapReaderFactory{_fetchData(tt,et){return w(tt,this.isCompressed).then(ft=>({cMapData:ft,compressionType:et}))}}s.DOMCMapReaderFactory=g;class O extends r.BaseStandardFontDataFactory{_fetchData(tt){return w(tt,!0)}}s.DOMStandardFontDataFactory=O;class I extends r.BaseSVGFactory{_createSVG(tt){return document.createElementNS(G,tt)}}s.DOMSVGFactory=I;class x{constructor({viewBox:tt,scale:et,rotation:ft,offsetX:wt=0,offsetY:Pt=0,dontFlip:Ht=!1}){this.viewBox=tt,this.scale=et,this.rotation=ft,this.offsetX=wt,this.offsetY=Pt;const $t=(tt[2]+tt[0])/2,jt=(tt[3]+tt[1])/2;let qt,Gt,Wt,Vt;switch(ft%=360,ft<0&&(ft+=360),ft){case 180:qt=-1,Gt=0,Wt=0,Vt=1;break;case 90:qt=0,Gt=1,Wt=1,Vt=0;break;case 270:qt=0,Gt=-1,Wt=-1,Vt=0;break;case 0:qt=1,Gt=0,Wt=0,Vt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ht&&(Wt=-Wt,Vt=-Vt);let ht,Q,Y,_t;qt===0?(ht=Math.abs(jt-tt[1])*et+wt,Q=Math.abs($t-tt[0])*et+Pt,Y=(tt[3]-tt[1])*et,_t=(tt[2]-tt[0])*et):(ht=Math.abs($t-tt[0])*et+wt,Q=Math.abs(jt-tt[1])*et+Pt,Y=(tt[2]-tt[0])*et,_t=(tt[3]-tt[1])*et),this.transform=[qt*et,Gt*et,Wt*et,Vt*et,ht-qt*et*$t-Wt*et*jt,Q-Gt*et*$t-Vt*et*jt],this.width=Y,this.height=_t}get rawDims(){const{viewBox:tt}=this;return(0,u.shadow)(this,"rawDims",{pageWidth:tt[2]-tt[0],pageHeight:tt[3]-tt[1],pageX:tt[0],pageY:tt[1]})}clone({scale:tt=this.scale,rotation:et=this.rotation,offsetX:ft=this.offsetX,offsetY:wt=this.offsetY,dontFlip:Pt=!1}={}){return new x({viewBox:this.viewBox.slice(),scale:tt,rotation:et,offsetX:ft,offsetY:wt,dontFlip:Pt})}convertToViewportPoint(tt,et){return u.Util.applyTransform([tt,et],this.transform)}convertToViewportRectangle(tt){const et=u.Util.applyTransform([tt[0],tt[1]],this.transform),ft=u.Util.applyTransform([tt[2],tt[3]],this.transform);return[et[0],et[1],ft[0],ft[1]]}convertToPdfPoint(tt,et){return u.Util.applyInverseTransform([tt,et],this.transform)}}s.PageViewport=x;class v extends u.BaseException{constructor(tt,et=0){super(tt,"RenderingCancelledException"),this.extraDelay=et}}s.RenderingCancelledException=v;function A(gt){const tt=gt.length;let et=0;for(;et<tt&&gt[et].trim()==="";)et++;return gt.substring(et,et+5).toLowerCase()==="data:"}function f(gt){return typeof gt=="string"&&/\.pdf$/i.test(gt)}function _(gt,tt=!1){return tt||([gt]=gt.split(/[#?]/,1)),gt.substring(gt.lastIndexOf("/")+1)}function P(gt,tt="document.pdf"){if(typeof gt!="string")return tt;if(A(gt))return(0,u.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),tt;const et=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ft=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,wt=et.exec(gt);let Pt=ft.exec(wt[1])||ft.exec(wt[2])||ft.exec(wt[3]);if(Pt&&(Pt=Pt[0],Pt.includes("%")))try{Pt=ft.exec(decodeURIComponent(Pt))[0]}catch{}return Pt||tt}class T{constructor(){ee(this,"started",Object.create(null));ee(this,"times",[])}time(tt){tt in this.started&&(0,u.warn)("Timer is already running for ".concat(tt)),this.started[tt]=Date.now()}timeEnd(tt){tt in this.started||(0,u.warn)("Timer has not been started for ".concat(tt)),this.times.push({name:tt,start:this.started[tt],end:Date.now()}),delete this.started[tt]}toString(){const tt=[];let et=0;for(const{name:ft}of this.times)et=Math.max(ft.length,et);for(const{name:ft,start:wt,end:Pt}of this.times)tt.push("".concat(ft.padEnd(et)," ").concat(Pt-wt,"ms\n"));return tt.join("")}}s.StatTimer=T;function y(gt,tt){try{const{protocol:et}=tt?new URL(gt,tt):new URL(gt);return et==="http:"||et==="https:"}catch{return!1}}function o(gt){gt.preventDefault()}function h(gt,tt=!1){return new Promise((et,ft)=>{const wt=document.createElement("script");wt.src=gt,wt.onload=function(Pt){tt&&wt.remove(),et(Pt)},wt.onerror=function(){ft(new Error("Cannot load script at: ".concat(wt.src)))},(document.head||document.documentElement).append(wt)})}function M(gt){console.log("Deprecated API usage: "+gt)}let m;class l{static toDateObject(tt){if(!tt||typeof tt!="string")return null;m||(m=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const et=m.exec(tt);if(!et)return null;const ft=parseInt(et[1],10);let wt=parseInt(et[2],10);wt=wt>=1&&wt<=12?wt-1:0;let Pt=parseInt(et[3],10);Pt=Pt>=1&&Pt<=31?Pt:1;let Ht=parseInt(et[4],10);Ht=Ht>=0&&Ht<=23?Ht:0;let $t=parseInt(et[5],10);$t=$t>=0&&$t<=59?$t:0;let jt=parseInt(et[6],10);jt=jt>=0&&jt<=59?jt:0;const qt=et[7]||"Z";let Gt=parseInt(et[8],10);Gt=Gt>=0&&Gt<=23?Gt:0;let Wt=parseInt(et[9],10)||0;return Wt=Wt>=0&&Wt<=59?Wt:0,qt==="-"?(Ht+=Gt,$t+=Wt):qt==="+"&&(Ht-=Gt,$t-=Wt),new Date(Date.UTC(ft,wt,Pt,Ht,$t,jt))}}s.PDFDateString=l;function R(gt,{scale:tt=1,rotation:et=0}){const{width:ft,height:wt}=gt.attributes.style,Pt=[0,0,parseInt(ft),parseInt(wt)];return new x({viewBox:Pt,scale:tt,rotation:et})}function p(gt){if(gt.startsWith("#")){const tt=parseInt(gt.slice(1),16);return[(tt&16711680)>>16,(tt&65280)>>8,tt&255]}return gt.startsWith("rgb(")?gt.slice(4,-1).split(",").map(tt=>parseInt(tt)):gt.startsWith("rgba(")?gt.slice(5,-1).split(",").map(tt=>parseInt(tt)).slice(0,3):((0,u.warn)('Not a valid color format: "'.concat(gt,'"')),[0,0,0])}function H(gt){const tt=document.createElement("span");tt.style.visibility="hidden",document.body.append(tt);for(const et of gt.keys()){tt.style.color=et;const ft=window.getComputedStyle(tt).color;gt.set(et,p(ft))}tt.remove()}function V(gt){const{a:tt,b:et,c:ft,d:wt,e:Pt,f:Ht}=gt.getTransform();return[tt,et,ft,wt,Pt,Ht]}function S(gt){const{a:tt,b:et,c:ft,d:wt,e:Pt,f:Ht}=gt.getTransform().invertSelf();return[tt,et,ft,wt,Pt,Ht]}function q(gt,tt,et=!1,ft=!0){if(tt instanceof x){const{pageWidth:wt,pageHeight:Pt}=tt.rawDims,{style:Ht}=gt,$t=u.FeatureTest.isCSSRoundSupported,jt="var(--scale-factor) * ".concat(wt,"px"),qt="var(--scale-factor) * ".concat(Pt,"px"),Gt=$t?"round(".concat(jt,", 1px)"):"calc(".concat(jt,")"),Wt=$t?"round(".concat(qt,", 1px)"):"calc(".concat(qt,")");!et||tt.rotation%180===0?(Ht.width=Gt,Ht.height=Wt):(Ht.width=Wt,Ht.height=Gt)}ft&&gt.setAttribute("data-main-rotation",tt.rotation)}},(k,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseFilterFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var r=L(1);class u{constructor(){this.constructor===u&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(g){return"none"}addHCMFilter(g,O){return"none"}addHighlightHCMFilter(g,O,I,x){return"none"}destroy(g=!1){}}s.BaseFilterFactory=u;class G{constructor(){this.constructor===G&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(g,O){if(g<=0||O<=0)throw new Error("Invalid canvas size");const I=this._createCanvas(g,O);return{canvas:I,context:I.getContext("2d")}}reset(g,O,I){if(!g.canvas)throw new Error("Canvas is not specified");if(O<=0||I<=0)throw new Error("Invalid canvas size");g.canvas.width=O,g.canvas.height=I}destroy(g){if(!g.canvas)throw new Error("Canvas is not specified");g.canvas.width=0,g.canvas.height=0,g.canvas=null,g.context=null}_createCanvas(g,O){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=G;class W{constructor({baseUrl:g=null,isCompressed:O=!0}){this.constructor===W&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=g,this.isCompressed=O}async fetch({name:g}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!g)throw new Error("CMap name must be specified.");const O=this.baseUrl+g+(this.isCompressed?".bcmap":""),I=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(O,I).catch(x=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(O))})}_fetchData(g,O){(0,r.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=W;class ut{constructor({baseUrl:g=null}){this.constructor===ut&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!g)throw new Error("Font filename must be specified.");const O="".concat(this.baseUrl).concat(g);return this._fetchData(O).catch(I=>{throw new Error("Unable to load font data at: ".concat(O))})}_fetchData(g){(0,r.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=ut;class F{constructor(){this.constructor===F&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(g,O,I=!1){if(g<=0||O<=0)throw new Error("Invalid SVG dimensions");const x=this._createSVG("svg:svg");return x.setAttribute("version","1.1"),I||(x.setAttribute("width","".concat(g,"px")),x.setAttribute("height","".concat(O,"px"))),x.setAttribute("preserveAspectRatio","none"),x.setAttribute("viewBox","0 0 ".concat(g," ").concat(O)),x}createElement(g){if(typeof g!="string")throw new Error("Invalid SVG element type");return this._createSVG(g)}_createSVG(g){(0,r.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=F},(k,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var r=L(1);const u=3285377520,G=4294901760,W=65535;class ut{constructor(w){this.h1=w?w&4294967295:u,this.h2=w?w&4294967295:u}update(w){let g,O;if(typeof w=="string"){g=new Uint8Array(w.length*2),O=0;for(let M=0,m=w.length;M<m;M++){const l=w.charCodeAt(M);l<=255?g[O++]=l:(g[O++]=l>>>8,g[O++]=l&255)}}else if((0,r.isArrayBuffer)(w))g=w.slice(),O=g.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const I=O>>2,x=O-I*4,v=new Uint32Array(g.buffer,0,I);let A=0,f=0,_=this.h1,P=this.h2;const T=3432918353,y=461845907,o=T&W,h=y&W;for(let M=0;M<I;M++)M&1?(A=v[M],A=A*T&G|A*o&W,A=A<<15|A>>>17,A=A*y&G|A*h&W,_^=A,_=_<<13|_>>>19,_=_*5+3864292196):(f=v[M],f=f*T&G|f*o&W,f=f<<15|f>>>17,f=f*y&G|f*h&W,P^=f,P=P<<13|P>>>19,P=P*5+3864292196);switch(A=0,x){case 3:A^=g[I*4+2]<<16;case 2:A^=g[I*4+1]<<8;case 1:A^=g[I*4],A=A*T&G|A*o&W,A=A<<15|A>>>17,A=A*y&G|A*h&W,I&1?_^=A:P^=A}this.h1=_,this.h2=P}hexdigest(){let w=this.h1,g=this.h2;return w^=g>>>1,w=w*3981806797&G|w*36045&W,g=g*4283543511&G|((g<<16|w>>>16)*2950163797&G)>>>16,w^=g>>>1,w=w*444984403&G|w*60499&W,g=g*3301882366&G|((g<<16|w>>>16)*3120437893&G)>>>16,w^=g>>>1,(w>>>0).toString(16).padStart(8,"0")+(g>>>0).toString(16).padStart(8,"0")}}s.MurmurHash3_64=ut},(k,s,L)=>{var W;Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var r=L(1);class u{constructor({ownerDocument:F=globalThis.document,styleElement:w=null}){U(this,W,new Set);this._document=F,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(F){this.nativeFontFaces.add(F),this._document.fonts.add(F)}removeNativeFontFace(F){this.nativeFontFaces.delete(F),this._document.fonts.delete(F)}insertRule(F){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const w=this.styleElement.sheet;w.insertRule(F,w.cssRules.length)}clear(){for(const F of this.nativeFontFaces)this._document.fonts.delete(F);this.nativeFontFaces.clear(),t(this,W).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(F){if(!(!F||t(this,W).has(F.loadedName))){if((0,r.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:w,src:g,style:O}=F,I=new FontFace(w,g,O);this.addNativeFontFace(I);try{await I.load(),t(this,W).add(w)}catch{(0,r.warn)("Cannot load system font: ".concat(F.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(I)}return}(0,r.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(F){if(F.attached||F.missingFile&&!F.systemFontInfo)return;if(F.attached=!0,F.systemFontInfo){await this.loadSystemFont(F.systemFontInfo);return}if(this.isFontLoadingAPISupported){const g=F.createNativeFontFace();if(g){this.addNativeFontFace(g);try{await g.loaded}catch(O){throw(0,r.warn)("Failed to load font '".concat(g.family,"': '").concat(O,"'.")),F.disableFontFace=!0,O}}return}const w=F.createFontFaceRule();if(w){if(this.insertRule(w),this.isSyncFontLoadingSupported)return;await new Promise(g=>{const O=this._queueLoadingCallback(g);this._prepareFontLoadEvent(F,O)})}}get isFontLoadingAPISupported(){var w;const F=!!((w=this._document)!=null&&w.fonts);return(0,r.shadow)(this,"isFontLoadingAPISupported",F)}get isSyncFontLoadingSupported(){let F=!1;return(r.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(F=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",F)}_queueLoadingCallback(F){function w(){for((0,r.assert)(!O.done,"completeRequest() cannot be called twice."),O.done=!0;g.length>0&&g[0].done;){const I=g.shift();setTimeout(I.callback,0)}}const{loadingRequests:g}=this,O={done:!1,complete:w,callback:F};return g.push(O),O}get _loadTestFont(){const F=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",F)}_prepareFontLoadEvent(F,w){function g(p,H){return p.charCodeAt(H)<<24|p.charCodeAt(H+1)<<16|p.charCodeAt(H+2)<<8|p.charCodeAt(H+3)&255}function O(p,H,V,S){const q=p.substring(0,H),nt=p.substring(H+V);return q+S+nt}let I,x;const v=this._document.createElement("canvas");v.width=1,v.height=1;const A=v.getContext("2d");let f=0;function _(p,H){if(++f>30){(0,r.warn)("Load test font never loaded."),H();return}if(A.font="30px "+p,A.fillText(".",0,20),A.getImageData(0,0,1,1).data[3]>0){H();return}setTimeout(_.bind(null,p,H))}const P="lt".concat(Date.now()).concat(this.loadTestFontId++);let T=this._loadTestFont;T=O(T,976,P.length,P);const o=16,h=1482184792;let M=g(T,o);for(I=0,x=P.length-3;I<x;I+=4)M=M-h+g(P,I)|0;I<P.length&&(M=M-h+g(P+"XXX",I)|0),T=O(T,o,4,(0,r.string32)(M));const m="url(data:font/opentype;base64,".concat(btoa(T),");"),l='@font-face {font-family:"'.concat(P,'";src:').concat(m,"}");this.insertRule(l);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const p of[F.loadedName,P]){const H=this._document.createElement("span");H.textContent="Hi",H.style.fontFamily=p,R.append(H)}this._document.body.append(R),_(P,()=>{R.remove(),w.complete()})}}W=new WeakMap,s.FontLoader=u;class G{constructor(F,{isEvalSupported:w=!0,disableFontFace:g=!1,ignoreErrors:O=!1,inspectFont:I=null}){this.compiledGlyphs=Object.create(null);for(const x in F)this[x]=F[x];this.isEvalSupported=w!==!1,this.disableFontFace=g===!0,this.ignoreErrors=O===!0,this._inspectFont=I}createNativeFontFace(){var w;if(!this.data||this.disableFontFace)return null;let F;if(!this.cssFontInfo)F=new FontFace(this.loadedName,this.data,{});else{const g={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(g.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),F=new FontFace(this.cssFontInfo.fontFamily,this.data,g)}return(w=this._inspectFont)==null||w.call(this,this),F}createFontFaceRule(){var O;if(!this.data||this.disableFontFace)return null;const F=(0,r.bytesToString)(this.data),w="url(data:".concat(this.mimetype,";base64,").concat(btoa(F),");");let g;if(!this.cssFontInfo)g='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(w,"}");else{let I="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(I+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),g='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(I,"src:").concat(w,"}")}return(O=this._inspectFont)==null||O.call(this,this,w),g}getPathGenerator(F,w){if(this.compiledGlyphs[w]!==void 0)return this.compiledGlyphs[w];let g;try{g=F.get(this.loadedName+"_path_"+w)}catch(O){if(!this.ignoreErrors)throw O;return(0,r.warn)('getPathGenerator - ignoring character: "'.concat(O,'".')),this.compiledGlyphs[w]=function(I,x){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const O=[];for(const I of g){const x=I.args!==void 0?I.args.join(","):"";O.push("c.",I.cmd,"(",x,");\n")}return this.compiledGlyphs[w]=new Function("c","size",O.join(""))}return this.compiledGlyphs[w]=function(O,I){for(const x of g)x.cmd==="scale"&&(x.args=[I,-I]),O[x.cmd].apply(O,x.args)}}}s.FontFaceObject=G},(k,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeFilterFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var r=L(7);L(1);const u=function(w){return new Promise((g,O)=>{require$$5.readFile(w,(x,v)=>{if(x||!v){O(new Error(x));return}g(new Uint8Array(v))})})};class G extends r.BaseFilterFactory{}s.NodeFilterFactory=G;class W extends r.BaseCanvasFactory{_createCanvas(g,O){return require$$5.createCanvas(g,O)}}s.NodeCanvasFactory=W;class ut extends r.BaseCMapReaderFactory{_fetchData(g,O){return u(g).then(I=>({cMapData:I,compressionType:O}))}}s.NodeCMapReaderFactory=ut;class F extends r.BaseStandardFontDataFactory{_fetchData(g){return u(g)}}s.NodeStandardFontDataFactory=F},(k,s,L)=>{var $,Qe,mt,Ze;Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var r=L(1),u=L(6),G=L(12),W=L(13);const ut=16,F=100,w=4096,g=15,O=10,I=1e3,x=16;function v(C,n){if(C._removeMirroring)throw new Error("Context is already forwarding operations.");C.__originalSave=C.save,C.__originalRestore=C.restore,C.__originalRotate=C.rotate,C.__originalScale=C.scale,C.__originalTranslate=C.translate,C.__originalTransform=C.transform,C.__originalSetTransform=C.setTransform,C.__originalResetTransform=C.resetTransform,C.__originalClip=C.clip,C.__originalMoveTo=C.moveTo,C.__originalLineTo=C.lineTo,C.__originalBezierCurveTo=C.bezierCurveTo,C.__originalRect=C.rect,C.__originalClosePath=C.closePath,C.__originalBeginPath=C.beginPath,C._removeMirroring=()=>{C.save=C.__originalSave,C.restore=C.__originalRestore,C.rotate=C.__originalRotate,C.scale=C.__originalScale,C.translate=C.__originalTranslate,C.transform=C.__originalTransform,C.setTransform=C.__originalSetTransform,C.resetTransform=C.__originalResetTransform,C.clip=C.__originalClip,C.moveTo=C.__originalMoveTo,C.lineTo=C.__originalLineTo,C.bezierCurveTo=C.__originalBezierCurveTo,C.rect=C.__originalRect,C.closePath=C.__originalClosePath,C.beginPath=C.__originalBeginPath,delete C._removeMirroring},C.save=function(){n.save(),this.__originalSave()},C.restore=function(){n.restore(),this.__originalRestore()},C.translate=function(i,c){n.translate(i,c),this.__originalTranslate(i,c)},C.scale=function(i,c){n.scale(i,c),this.__originalScale(i,c)},C.transform=function(i,c,d,E,D,j){n.transform(i,c,d,E,D,j),this.__originalTransform(i,c,d,E,D,j)},C.setTransform=function(i,c,d,E,D,j){n.setTransform(i,c,d,E,D,j),this.__originalSetTransform(i,c,d,E,D,j)},C.resetTransform=function(){n.resetTransform(),this.__originalResetTransform()},C.rotate=function(i){n.rotate(i),this.__originalRotate(i)},C.clip=function(i){n.clip(i),this.__originalClip(i)},C.moveTo=function(a,i){n.moveTo(a,i),this.__originalMoveTo(a,i)},C.lineTo=function(a,i){n.lineTo(a,i),this.__originalLineTo(a,i)},C.bezierCurveTo=function(a,i,c,d,E,D){n.bezierCurveTo(a,i,c,d,E,D),this.__originalBezierCurveTo(a,i,c,d,E,D)},C.rect=function(a,i,c,d){n.rect(a,i,c,d),this.__originalRect(a,i,c,d)},C.closePath=function(){n.closePath(),this.__originalClosePath()},C.beginPath=function(){n.beginPath(),this.__originalBeginPath()}}class A{constructor(n){this.canvasFactory=n,this.cache=Object.create(null)}getCanvas(n,a,i){let c;return this.cache[n]!==void 0?(c=this.cache[n],this.canvasFactory.reset(c,a,i)):(c=this.canvasFactory.create(a,i),this.cache[n]=c),c}delete(n){delete this.cache[n]}clear(){for(const n in this.cache){const a=this.cache[n];this.canvasFactory.destroy(a),delete this.cache[n]}}}function f(C,n,a,i,c,d,E,D,j,st){const[Z,rt,dt,pt,lt,Ct]=(0,u.getCurrentTransform)(C);if(rt===0&&dt===0){const Dt=E*Z+lt,gt=Math.round(Dt),tt=D*pt+Ct,et=Math.round(tt),ft=(E+j)*Z+lt,wt=Math.abs(Math.round(ft)-gt)||1,Pt=(D+st)*pt+Ct,Ht=Math.abs(Math.round(Pt)-et)||1;return C.setTransform(Math.sign(Z),0,0,Math.sign(pt),gt,et),C.drawImage(n,a,i,c,d,0,0,wt,Ht),C.setTransform(Z,rt,dt,pt,lt,Ct),[wt,Ht]}if(Z===0&&pt===0){const Dt=D*dt+lt,gt=Math.round(Dt),tt=E*rt+Ct,et=Math.round(tt),ft=(D+st)*dt+lt,wt=Math.abs(Math.round(ft)-gt)||1,Pt=(E+j)*rt+Ct,Ht=Math.abs(Math.round(Pt)-et)||1;return C.setTransform(0,Math.sign(rt),Math.sign(dt),0,gt,et),C.drawImage(n,a,i,c,d,0,0,Ht,wt),C.setTransform(Z,rt,dt,pt,lt,Ct),[Ht,wt]}C.drawImage(n,a,i,c,d,E,D,j,st);const Ot=Math.hypot(Z,rt),vt=Math.hypot(dt,pt);return[Ot*j,vt*st]}function _(C){const{width:n,height:a}=C;if(n>I||a>I)return null;const i=1e3,c=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),d=n+1;let E=new Uint8Array(d*(a+1)),D,j,st;const Z=n+7&-8;let rt=new Uint8Array(Z*a),dt=0;for(const vt of C.data){let Dt=128;for(;Dt>0;)rt[dt++]=vt&Dt?0:255,Dt>>=1}let pt=0;for(dt=0,rt[dt]!==0&&(E[0]=1,++pt),j=1;j<n;j++)rt[dt]!==rt[dt+1]&&(E[j]=rt[dt]?2:1,++pt),dt++;for(rt[dt]!==0&&(E[j]=2,++pt),D=1;D<a;D++){dt=D*Z,st=D*d,rt[dt-Z]!==rt[dt]&&(E[st]=rt[dt]?1:8,++pt);let vt=(rt[dt]?4:0)+(rt[dt-Z]?8:0);for(j=1;j<n;j++)vt=(vt>>2)+(rt[dt+1]?4:0)+(rt[dt-Z+1]?8:0),c[vt]&&(E[st+j]=c[vt],++pt),dt++;if(rt[dt-Z]!==rt[dt]&&(E[st+j]=rt[dt]?2:4,++pt),pt>i)return null}for(dt=Z*(a-1),st=D*d,rt[dt]!==0&&(E[st]=8,++pt),j=1;j<n;j++)rt[dt]!==rt[dt+1]&&(E[st+j]=rt[dt]?4:8,++pt),dt++;if(rt[dt]!==0&&(E[st+j]=4,++pt),pt>i)return null;const lt=new Int32Array([0,d,-1,0,-d,0,0,0,1]),Ct=new Path2D;for(D=0;pt&&D<=a;D++){let vt=D*d;const Dt=vt+n;for(;vt<Dt&&!E[vt];)vt++;if(vt===Dt)continue;Ct.moveTo(vt%d,D);const gt=vt;let tt=E[vt];do{const et=lt[tt];do vt+=et;while(!E[vt]);const ft=E[vt];ft!==5&&ft!==10?(tt=ft,E[vt]=0):(tt=ft&51*tt>>4,E[vt]&=tt>>2|tt<<2),Ct.lineTo(vt%d,vt/d|0),E[vt]||--pt}while(gt!==vt);--D}return rt=null,E=null,function(vt){vt.save(),vt.scale(1/n,-1/a),vt.translate(0,-a),vt.fill(Ct),vt.beginPath(),vt.restore()}}class P{constructor(n,a){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,n,a])}clone(){const n=Object.create(this);return n.clipBox=this.clipBox.slice(),n}setCurrentPoint(n,a){this.x=n,this.y=a}updatePathMinMax(n,a,i){[a,i]=r.Util.applyTransform([a,i],n),this.minX=Math.min(this.minX,a),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,a),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(n,a){const i=r.Util.applyTransform(a,n),c=r.Util.applyTransform(a.slice(2),n);this.minX=Math.min(this.minX,i[0],c[0]),this.minY=Math.min(this.minY,i[1],c[1]),this.maxX=Math.max(this.maxX,i[0],c[0]),this.maxY=Math.max(this.maxY,i[1],c[1])}updateScalingPathMinMax(n,a){r.Util.scaleMinMax(n,a),this.minX=Math.min(this.minX,a[0]),this.maxX=Math.max(this.maxX,a[1]),this.minY=Math.min(this.minY,a[2]),this.maxY=Math.max(this.maxY,a[3])}updateCurvePathMinMax(n,a,i,c,d,E,D,j,st,Z){const rt=r.Util.bezierBoundingBox(a,i,c,d,E,D,j,st);if(Z){Z[0]=Math.min(Z[0],rt[0],rt[2]),Z[1]=Math.max(Z[1],rt[0],rt[2]),Z[2]=Math.min(Z[2],rt[1],rt[3]),Z[3]=Math.max(Z[3],rt[1],rt[3]);return}this.updateRectMinMax(n,rt)}getPathBoundingBox(n=G.PathType.FILL,a=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(n===G.PathType.STROKE){a||(0,r.unreachable)("Stroke bounding box must include transform.");const c=r.Util.singularValueDecompose2dScale(a),d=c[0]*this.lineWidth/2,E=c[1]*this.lineWidth/2;i[0]-=d,i[1]-=E,i[2]+=d,i[3]+=E}return i}updateClipFromPath(){const n=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(n||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(n){this.clipBox=n,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(n=G.PathType.FILL,a=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(n,a))}}function T(C,n){if(typeof ImageData<"u"&&n instanceof ImageData){C.putImageData(n,0,0);return}const a=n.height,i=n.width,c=a%x,d=(a-c)/x,E=c===0?d:d+1,D=C.createImageData(i,x);let j=0,st;const Z=n.data,rt=D.data;let dt,pt,lt,Ct;if(n.kind===r.ImageKind.GRAYSCALE_1BPP){const Ot=Z.byteLength,vt=new Uint32Array(rt.buffer,0,rt.byteLength>>2),Dt=vt.length,gt=i+7>>3,tt=4294967295,et=r.FeatureTest.isLittleEndian?4278190080:255;for(dt=0;dt<E;dt++){for(lt=dt<d?x:c,st=0,pt=0;pt<lt;pt++){const ft=Ot-j;let wt=0;const Pt=ft>gt?i:ft*8-7,Ht=Pt&-8;let $t=0,jt=0;for(;wt<Ht;wt+=8)jt=Z[j++],vt[st++]=jt&128?tt:et,vt[st++]=jt&64?tt:et,vt[st++]=jt&32?tt:et,vt[st++]=jt&16?tt:et,vt[st++]=jt&8?tt:et,vt[st++]=jt&4?tt:et,vt[st++]=jt&2?tt:et,vt[st++]=jt&1?tt:et;for(;wt<Pt;wt++)$t===0&&(jt=Z[j++],$t=128),vt[st++]=jt&$t?tt:et,$t>>=1}for(;st<Dt;)vt[st++]=0;C.putImageData(D,0,dt*x)}}else if(n.kind===r.ImageKind.RGBA_32BPP){for(pt=0,Ct=i*x*4,dt=0;dt<d;dt++)rt.set(Z.subarray(j,j+Ct)),j+=Ct,C.putImageData(D,0,pt),pt+=x;dt<E&&(Ct=i*c*4,rt.set(Z.subarray(j,j+Ct)),C.putImageData(D,0,pt))}else if(n.kind===r.ImageKind.RGB_24BPP)for(lt=x,Ct=i*lt,dt=0;dt<E;dt++){for(dt>=d&&(lt=c,Ct=i*lt),st=0,pt=Ct;pt--;)rt[st++]=Z[j++],rt[st++]=Z[j++],rt[st++]=Z[j++],rt[st++]=255;C.putImageData(D,0,dt*x)}else throw new Error("bad image kind: ".concat(n.kind))}function y(C,n){if(n.bitmap){C.drawImage(n.bitmap,0,0);return}const a=n.height,i=n.width,c=a%x,d=(a-c)/x,E=c===0?d:d+1,D=C.createImageData(i,x);let j=0;const st=n.data,Z=D.data;for(let rt=0;rt<E;rt++){const dt=rt<d?x:c;({srcPos:j}=(0,W.convertBlackAndWhiteToRGBA)({src:st,srcPos:j,dest:Z,width:i,height:dt,nonBlackColor:0})),C.putImageData(D,0,rt*x)}}function o(C,n){const a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of a)C[i]!==void 0&&(n[i]=C[i]);C.setLineDash!==void 0&&(n.setLineDash(C.getLineDash()),n.lineDashOffset=C.lineDashOffset)}function h(C){if(C.strokeStyle=C.fillStyle="#000000",C.fillRule="nonzero",C.globalAlpha=1,C.lineWidth=1,C.lineCap="butt",C.lineJoin="miter",C.miterLimit=10,C.globalCompositeOperation="source-over",C.font="10px sans-serif",C.setLineDash!==void 0&&(C.setLineDash([]),C.lineDashOffset=0),!r.isNodeJS){const{filter:n}=C;n!=="none"&&n!==""&&(C.filter="none")}}function M(C,n,a,i){const c=C.length;for(let d=3;d<c;d+=4){const E=C[d];if(E===0)C[d-3]=n,C[d-2]=a,C[d-1]=i;else if(E<255){const D=255-E;C[d-3]=C[d-3]*E+n*D>>8,C[d-2]=C[d-2]*E+a*D>>8,C[d-1]=C[d-1]*E+i*D>>8}}}function m(C,n,a){const i=C.length,c=1/255;for(let d=3;d<i;d+=4){const E=a?a[C[d]]:C[d];n[d]=n[d]*E*c|0}}function l(C,n,a){const i=C.length;for(let c=3;c<i;c+=4){const d=C[c-3]*77+C[c-2]*152+C[c-1]*28;n[c]=a?n[c]*a[d>>8]>>8:n[c]*d>>16}}function R(C,n,a,i,c,d,E,D,j,st,Z){const rt=!!d,dt=rt?d[0]:0,pt=rt?d[1]:0,lt=rt?d[2]:0,Ct=c==="Luminosity"?l:m,vt=Math.min(i,Math.ceil(1048576/a));for(let Dt=0;Dt<i;Dt+=vt){const gt=Math.min(vt,i-Dt),tt=C.getImageData(D-st,Dt+(j-Z),a,gt),et=n.getImageData(D,Dt+j,a,gt);rt&&M(tt.data,dt,pt,lt),Ct(tt.data,et.data,E),n.putImageData(et,D,Dt+j)}}function p(C,n,a,i){const c=i[0],d=i[1],E=i[2]-c,D=i[3]-d;E===0||D===0||(R(n.context,a,E,D,n.subtype,n.backdrop,n.transferMap,c,d,n.offsetX,n.offsetY),C.save(),C.globalAlpha=1,C.globalCompositeOperation="source-over",C.setTransform(1,0,0,1,0,0),C.drawImage(a.canvas,0,0),C.restore())}function H(C,n){const a=r.Util.singularValueDecompose2dScale(C);a[0]=Math.fround(a[0]),a[1]=Math.fround(a[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*u.PixelsPerInch.PDF_TO_CSS_UNITS);return n!==void 0?n:a[0]<=i||a[1]<=i}const V=["butt","round","square"],S=["miter","round","bevel"],q={},nt={},Tt=class Tt{constructor(n,a,i,c,d,{optionalContentConfig:E,markedContentStack:D=null},j,st){U(this,$);U(this,mt);this.ctx=n,this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=a,this.objs=i,this.canvasFactory=c,this.filterFactory=d,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=D||[],this.optionalContentConfig=E,this.cachedCanvases=new A(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=j,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=st,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(n,a=null){return typeof n=="string"?n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n):a}beginDrawing({transform:n,viewport:a,transparency:i=!1,background:c=null}){const d=this.ctx.canvas.width,E=this.ctx.canvas.height,D=this.ctx.fillStyle;if(this.ctx.fillStyle=c||"#ffffff",this.ctx.fillRect(0,0,d,E),this.ctx.fillStyle=D,i){const j=this.cachedCanvases.getCanvas("transparent",d,E);this.compositeCtx=this.ctx,this.transparentCanvas=j.canvas,this.ctx=j.context,this.ctx.save(),this.ctx.transform(...(0,u.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),h(this.ctx),n&&(this.ctx.transform(...n),this.outputScaleX=n[0],this.outputScaleY=n[0]),this.ctx.transform(...a.transform),this.viewportScale=a.scale,this.baseTransform=(0,u.getCurrentTransform)(this.ctx)}executeOperatorList(n,a,i,c){const d=n.argsArray,E=n.fnArray;let D=a||0;const j=d.length;if(j===D)return D;const st=j-D>O&&typeof i=="function",Z=st?Date.now()+g:0;let rt=0;const dt=this.commonObjs,pt=this.objs;let lt;for(;;){if(c!==void 0&&D===c.nextBreakPoint)return c.breakIt(D,i),D;if(lt=E[D],lt!==r.OPS.dependency)this[lt].apply(this,d[D]);else for(const Ct of d[D]){const Ot=Ct.startsWith("g_")?dt:pt;if(!Ot.has(Ct))return Ot.get(Ct,i),D}if(D++,D===j)return D;if(st&&++rt>O){if(Date.now()>Z)return i(),D;rt=0}}}endDrawing(){X(this,$,Qe).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const n of this._cachedBitmapsMap.values()){for(const a of n.values())typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&(a.width=a.height=0);n.clear()}this._cachedBitmapsMap.clear(),X(this,mt,Ze).call(this)}_scaleImage(n,a){const i=n.width,c=n.height;let d=Math.max(Math.hypot(a[0],a[1]),1),E=Math.max(Math.hypot(a[2],a[3]),1),D=i,j=c,st="prescale1",Z,rt;for(;d>2&&D>1||E>2&&j>1;){let dt=D,pt=j;d>2&&D>1&&(dt=D>=16384?Math.floor(D/2)-1||1:Math.ceil(D/2),d/=D/dt),E>2&&j>1&&(pt=j>=16384?Math.floor(j/2)-1||1:Math.ceil(j)/2,E/=j/pt),Z=this.cachedCanvases.getCanvas(st,dt,pt),rt=Z.context,rt.clearRect(0,0,dt,pt),rt.drawImage(n,0,0,D,j,0,0,dt,pt),n=Z.canvas,D=dt,j=pt,st=st==="prescale1"?"prescale2":"prescale1"}return{img:n,paintWidth:D,paintHeight:j}}_createMaskCanvas(n){const a=this.ctx,{width:i,height:c}=n,d=this.current.fillColor,E=this.current.patternFill,D=(0,u.getCurrentTransform)(a);let j,st,Z,rt;if((n.bitmap||n.data)&&n.count>1){const wt=n.bitmap||n.data.buffer;st=JSON.stringify(E?D:[D.slice(0,4),d]),j=this._cachedBitmapsMap.get(wt),j||(j=new Map,this._cachedBitmapsMap.set(wt,j));const Pt=j.get(st);if(Pt&&!E){const Ht=Math.round(Math.min(D[0],D[2])+D[4]),$t=Math.round(Math.min(D[1],D[3])+D[5]);return{canvas:Pt,offsetX:Ht,offsetY:$t}}Z=Pt}Z||(rt=this.cachedCanvases.getCanvas("maskCanvas",i,c),y(rt.context,n));let dt=r.Util.transform(D,[1/i,0,0,-1/c,0,0]);dt=r.Util.transform(dt,[1,0,0,1,0,-c]);const pt=r.Util.applyTransform([0,0],dt),lt=r.Util.applyTransform([i,c],dt),Ct=r.Util.normalizeRect([pt[0],pt[1],lt[0],lt[1]]),Ot=Math.round(Ct[2]-Ct[0])||1,vt=Math.round(Ct[3]-Ct[1])||1,Dt=this.cachedCanvases.getCanvas("fillCanvas",Ot,vt),gt=Dt.context,tt=Math.min(pt[0],lt[0]),et=Math.min(pt[1],lt[1]);gt.translate(-tt,-et),gt.transform(...dt),Z||(Z=this._scaleImage(rt.canvas,(0,u.getCurrentTransformInverse)(gt)),Z=Z.img,j&&E&&j.set(st,Z)),gt.imageSmoothingEnabled=H((0,u.getCurrentTransform)(gt),n.interpolate),f(gt,Z,0,0,Z.width,Z.height,0,0,i,c),gt.globalCompositeOperation="source-in";const ft=r.Util.transform((0,u.getCurrentTransformInverse)(gt),[1,0,0,1,-tt,-et]);return gt.fillStyle=E?d.getPattern(a,this,ft,G.PathType.FILL):d,gt.fillRect(0,0,i,c),j&&!E&&(this.cachedCanvases.delete("fillCanvas"),j.set(st,Dt.canvas)),{canvas:Dt.canvas,offsetX:Math.round(tt),offsetY:Math.round(et)}}setLineWidth(n){n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(n){this.ctx.lineCap=V[n]}setLineJoin(n){this.ctx.lineJoin=S[n]}setMiterLimit(n){this.ctx.miterLimit=n}setDash(n,a){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(n),i.lineDashOffset=a)}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[a,i]of n)switch(a){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const n=this.inSMaskMode;this.current.activeSMask&&!n?this.beginSMaskMode():!this.current.activeSMask&&n&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,a=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,c=this.cachedCanvases.getCanvas(i,n,a);this.suspendedCtx=this.ctx,this.ctx=c.context;const d=this.ctx;d.setTransform(...(0,u.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,d),v(d,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(n){if(!this.current.activeSMask)return;n?(n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n[2]=Math.ceil(n[2]),n[3]=Math.ceil(n[3])):n=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const a=this.current.activeSMask,i=this.suspendedCtx;p(i,a,this.ctx,n),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(n,a,i,c,d,E){this.ctx.transform(n,a,i,c,d,E),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(n,a,i){const c=this.ctx,d=this.current;let E=d.x,D=d.y,j,st;const Z=(0,u.getCurrentTransform)(c),rt=Z[0]===0&&Z[3]===0||Z[1]===0&&Z[2]===0,dt=rt?i.slice(0):null;for(let pt=0,lt=0,Ct=n.length;pt<Ct;pt++)switch(n[pt]|0){case r.OPS.rectangle:E=a[lt++],D=a[lt++];const Ot=a[lt++],vt=a[lt++],Dt=E+Ot,gt=D+vt;c.moveTo(E,D),Ot===0||vt===0?c.lineTo(Dt,gt):(c.lineTo(Dt,D),c.lineTo(Dt,gt),c.lineTo(E,gt)),rt||d.updateRectMinMax(Z,[E,D,Dt,gt]),c.closePath();break;case r.OPS.moveTo:E=a[lt++],D=a[lt++],c.moveTo(E,D),rt||d.updatePathMinMax(Z,E,D);break;case r.OPS.lineTo:E=a[lt++],D=a[lt++],c.lineTo(E,D),rt||d.updatePathMinMax(Z,E,D);break;case r.OPS.curveTo:j=E,st=D,E=a[lt+4],D=a[lt+5],c.bezierCurveTo(a[lt],a[lt+1],a[lt+2],a[lt+3],E,D),d.updateCurvePathMinMax(Z,j,st,a[lt],a[lt+1],a[lt+2],a[lt+3],E,D,dt),lt+=6;break;case r.OPS.curveTo2:j=E,st=D,c.bezierCurveTo(E,D,a[lt],a[lt+1],a[lt+2],a[lt+3]),d.updateCurvePathMinMax(Z,j,st,E,D,a[lt],a[lt+1],a[lt+2],a[lt+3],dt),E=a[lt+2],D=a[lt+3],lt+=4;break;case r.OPS.curveTo3:j=E,st=D,E=a[lt+2],D=a[lt+3],c.bezierCurveTo(a[lt],a[lt+1],E,D,E,D),d.updateCurvePathMinMax(Z,j,st,a[lt],a[lt+1],E,D,E,D,dt),lt+=4;break;case r.OPS.closePath:c.closePath();break}rt&&d.updateScalingPathMinMax(Z,dt),d.setCurrentPoint(E,D)}closePath(){this.ctx.closePath()}stroke(n=!0){const a=this.ctx,i=this.current.strokeColor;a.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(a.save(),a.strokeStyle=i.getPattern(a,this,(0,u.getCurrentTransformInverse)(a),G.PathType.STROKE),this.rescaleAndStroke(!1),a.restore()):this.rescaleAndStroke(!0)),n&&this.consumePath(this.current.getClippedPathBoundingBox()),a.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(n=!0){const a=this.ctx,i=this.current.fillColor,c=this.current.patternFill;let d=!1;c&&(a.save(),a.fillStyle=i.getPattern(a,this,(0,u.getCurrentTransformInverse)(a),G.PathType.FILL),d=!0);const E=this.current.getClippedPathBoundingBox();this.contentVisible&&E!==null&&(this.pendingEOFill?(a.fill("evenodd"),this.pendingEOFill=!1):a.fill()),d&&a.restore(),n&&this.consumePath(E)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=q}eoClip(){this.pendingClip=nt}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const n=this.pendingTextPaths,a=this.ctx;if(n===void 0){a.beginPath();return}a.save(),a.beginPath();for(const i of n)a.setTransform(...i.transform),a.translate(i.x,i.y),i.addToPath(a,i.fontSize);a.restore(),a.clip(),a.beginPath(),delete this.pendingTextPaths}setCharSpacing(n){this.current.charSpacing=n}setWordSpacing(n){this.current.wordSpacing=n}setHScale(n){this.current.textHScale=n/100}setLeading(n){this.current.leading=-n}setFont(n,a){var Z;const i=this.commonObjs.get(n),c=this.current;if(!i)throw new Error("Can't find font for ".concat(n));if(c.fontMatrix=i.fontMatrix||r.FONT_IDENTITY_MATRIX,(c.fontMatrix[0]===0||c.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+n),a<0?(a=-a,c.fontDirection=-1):c.fontDirection=1,this.current.font=i,this.current.fontSize=a,i.isType3Font)return;const d=i.loadedName||"sans-serif",E=((Z=i.systemFontInfo)==null?void 0:Z.css)||'"'.concat(d,'", ').concat(i.fallbackName);let D="normal";i.black?D="900":i.bold&&(D="bold");const j=i.italic?"italic":"normal";let st=a;a<ut?st=ut:a>F&&(st=F),this.current.fontSizeScale=a/st,this.ctx.font="".concat(j," ").concat(D," ").concat(st,"px ").concat(E)}setTextRenderingMode(n){this.current.textRenderingMode=n}setTextRise(n){this.current.textRise=n}moveText(n,a){this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=a}setLeadingMoveText(n,a){this.setLeading(-a),this.moveText(n,a)}setTextMatrix(n,a,i,c,d,E){this.current.textMatrix=[n,a,i,c,d,E],this.current.textMatrixScale=Math.hypot(n,a),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(n,a,i,c){const d=this.ctx,E=this.current,D=E.font,j=E.textRenderingMode,st=E.fontSize/E.fontSizeScale,Z=j&r.TextRenderingMode.FILL_STROKE_MASK,rt=!!(j&r.TextRenderingMode.ADD_TO_PATH_FLAG),dt=E.patternFill&&!D.missingFile;let pt;(D.disableFontFace||rt||dt)&&(pt=D.getPathGenerator(this.commonObjs,n)),D.disableFontFace||dt?(d.save(),d.translate(a,i),d.beginPath(),pt(d,st),c&&d.setTransform(...c),(Z===r.TextRenderingMode.FILL||Z===r.TextRenderingMode.FILL_STROKE)&&d.fill(),(Z===r.TextRenderingMode.STROKE||Z===r.TextRenderingMode.FILL_STROKE)&&d.stroke(),d.restore()):((Z===r.TextRenderingMode.FILL||Z===r.TextRenderingMode.FILL_STROKE)&&d.fillText(n,a,i),(Z===r.TextRenderingMode.STROKE||Z===r.TextRenderingMode.FILL_STROKE)&&d.strokeText(n,a,i)),rt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,u.getCurrentTransform)(d),x:a,y:i,fontSize:st,addToPath:pt})}get isFontSubpixelAAEnabled(){const{context:n}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);n.scale(1.5,1),n.fillText("I",0,10);const a=n.getImageData(0,0,10,10).data;let i=!1;for(let c=3;c<a.length;c+=4)if(a[c]>0&&a[c]<255){i=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",i)}showText(n){const a=this.current,i=a.font;if(i.isType3Font)return this.showType3Text(n);const c=a.fontSize;if(c===0)return;const d=this.ctx,E=a.fontSizeScale,D=a.charSpacing,j=a.wordSpacing,st=a.fontDirection,Z=a.textHScale*st,rt=n.length,dt=i.vertical,pt=dt?1:-1,lt=i.defaultVMetrics,Ct=c*a.fontMatrix[0],Ot=a.textRenderingMode===r.TextRenderingMode.FILL&&!i.disableFontFace&&!a.patternFill;d.save(),d.transform(...a.textMatrix),d.translate(a.x,a.y+a.textRise),st>0?d.scale(Z,-1):d.scale(Z,1);let vt;if(a.patternFill){d.save();const ft=a.fillColor.getPattern(d,this,(0,u.getCurrentTransformInverse)(d),G.PathType.FILL);vt=(0,u.getCurrentTransform)(d),d.restore(),d.fillStyle=ft}let Dt=a.lineWidth;const gt=a.textMatrixScale;if(gt===0||Dt===0){const ft=a.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(ft===r.TextRenderingMode.STROKE||ft===r.TextRenderingMode.FILL_STROKE)&&(Dt=this.getSinglePixelWidth())}else Dt/=gt;if(E!==1&&(d.scale(E,E),Dt/=E),d.lineWidth=Dt,i.isInvalidPDFjsFont){const ft=[];let wt=0;for(const Pt of n)ft.push(Pt.unicode),wt+=Pt.width;d.fillText(ft.join(""),0,0),a.x+=wt*Ct*Z,d.restore(),this.compose();return}let tt=0,et;for(et=0;et<rt;++et){const ft=n[et];if(typeof ft=="number"){tt+=pt*ft*c/1e3;continue}let wt=!1;const Pt=(ft.isSpace?j:0)+D,Ht=ft.fontChar,$t=ft.accent;let jt,qt,Gt=ft.width;if(dt){const Vt=ft.vmetric||lt,ht=-(ft.vmetric?Vt[1]:Gt*.5)*Ct,Q=Vt[2]*Ct;Gt=Vt?-Vt[0]:Gt,jt=ht/E,qt=(tt+Q)/E}else jt=tt/E,qt=0;if(i.remeasure&&Gt>0){const Vt=d.measureText(Ht).width*1e3/c*E;if(Gt<Vt&&this.isFontSubpixelAAEnabled){const ht=Gt/Vt;wt=!0,d.save(),d.scale(ht,1),jt/=ht}else Gt!==Vt&&(jt+=(Gt-Vt)/2e3*c/E)}if(this.contentVisible&&(ft.isInFont||i.missingFile)){if(Ot&&!$t)d.fillText(Ht,jt,qt);else if(this.paintChar(Ht,jt,qt,vt),$t){const Vt=jt+c*$t.offset.x/E,ht=qt-c*$t.offset.y/E;this.paintChar($t.fontChar,Vt,ht,vt)}}const Wt=dt?Gt*Ct-Pt*st:Gt*Ct+Pt*st;tt+=Wt,wt&&d.restore()}dt?a.y-=tt:a.x+=tt*Z,d.restore(),this.compose()}showType3Text(n){const a=this.ctx,i=this.current,c=i.font,d=i.fontSize,E=i.fontDirection,D=c.vertical?1:-1,j=i.charSpacing,st=i.wordSpacing,Z=i.textHScale*E,rt=i.fontMatrix||r.FONT_IDENTITY_MATRIX,dt=n.length,pt=i.textRenderingMode===r.TextRenderingMode.INVISIBLE;let lt,Ct,Ot,vt;if(!(pt||d===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),a.transform(...i.textMatrix),a.translate(i.x,i.y),a.scale(Z,E),lt=0;lt<dt;++lt){if(Ct=n[lt],typeof Ct=="number"){vt=D*Ct*d/1e3,this.ctx.translate(vt,0),i.x+=vt*Z;continue}const Dt=(Ct.isSpace?st:0)+j,gt=c.charProcOperatorList[Ct.operatorListId];if(!gt){(0,r.warn)('Type3 character "'.concat(Ct.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=Ct,this.save(),a.scale(d,d),a.transform(...rt),this.executeOperatorList(gt),this.restore()),Ot=r.Util.applyTransform([Ct.width,0],rt)[0]*d+Dt,a.translate(Ot,0),i.x+=Ot*Z}a.restore(),this.processingType3=null}}setCharWidth(n,a){}setCharWidthAndBounds(n,a,i,c,d,E){this.ctx.rect(i,c,d-i,E-c),this.ctx.clip(),this.endPath()}getColorN_Pattern(n){let a;if(n[0]==="TilingPattern"){const i=n[1],c=this.baseTransform||(0,u.getCurrentTransform)(this.ctx),d={createCanvasGraphics:E=>new Tt(E,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};a=new G.TilingPattern(n,i,this.ctx,d,c)}else a=this._getPattern(n[1],n[2]);return a}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(n,a,i){const c=r.Util.makeHexColor(n,a,i);this.ctx.strokeStyle=c,this.current.strokeColor=c}setFillRGBColor(n,a,i){const c=r.Util.makeHexColor(n,a,i);this.ctx.fillStyle=c,this.current.fillColor=c,this.current.patternFill=!1}_getPattern(n,a=null){let i;return this.cachedPatterns.has(n)?i=this.cachedPatterns.get(n):(i=(0,G.getShadingPattern)(this.getObject(n)),this.cachedPatterns.set(n,i)),a&&(i.matrix=a),i}shadingFill(n){if(!this.contentVisible)return;const a=this.ctx;this.save();const i=this._getPattern(n);a.fillStyle=i.getPattern(a,this,(0,u.getCurrentTransformInverse)(a),G.PathType.SHADING);const c=(0,u.getCurrentTransformInverse)(a);if(c){const{width:d,height:E}=a.canvas,[D,j,st,Z]=r.Util.getAxialAlignedBoundingBox([0,0,d,E],c);this.ctx.fillRect(D,j,st-D,Z-j)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(n,a){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(n)&&n.length===6&&this.transform(...n),this.baseTransform=(0,u.getCurrentTransform)(this.ctx),a)){const i=a[2]-a[0],c=a[3]-a[1];this.ctx.rect(a[0],a[1],i,c),this.current.updateRectMinMax((0,u.getCurrentTransform)(this.ctx),a),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(n){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const a=this.ctx;n.isolated||(0,r.info)("TODO: Support non-isolated groups."),n.knockout&&(0,r.warn)("Knockout groups not supported.");const i=(0,u.getCurrentTransform)(a);if(n.matrix&&a.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let c=r.Util.getAxialAlignedBoundingBox(n.bbox,(0,u.getCurrentTransform)(a));const d=[0,0,a.canvas.width,a.canvas.height];c=r.Util.intersect(c,d)||[0,0,0,0];const E=Math.floor(c[0]),D=Math.floor(c[1]);let j=Math.max(Math.ceil(c[2])-E,1),st=Math.max(Math.ceil(c[3])-D,1),Z=1,rt=1;j>w&&(Z=j/w,j=w),st>w&&(rt=st/w,st=w),this.current.startNewPathAndClipBox([0,0,j,st]);let dt="groupAt"+this.groupLevel;n.smask&&(dt+="_smask_"+this.smaskCounter++%2);const pt=this.cachedCanvases.getCanvas(dt,j,st),lt=pt.context;lt.scale(1/Z,1/rt),lt.translate(-E,-D),lt.transform(...i),n.smask?this.smaskStack.push({canvas:pt.canvas,context:lt,offsetX:E,offsetY:D,scaleX:Z,scaleY:rt,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}):(a.setTransform(1,0,0,1,0,0),a.translate(E,D),a.scale(Z,rt),a.save()),o(a,lt),this.ctx=lt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++}endGroup(n){if(!this.contentVisible)return;this.groupLevel--;const a=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,n.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const c=(0,u.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...c);const d=r.Util.getAxialAlignedBoundingBox([0,0,a.canvas.width,a.canvas.height],c);this.ctx.drawImage(a.canvas,0,0),this.ctx.restore(),this.compose(d)}}beginAnnotation(n,a,i,c,d){if(X(this,$,Qe).call(this),h(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(a)&&a.length===4){const E=a[2]-a[0],D=a[3]-a[1];if(d&&this.annotationCanvasMap){i=i.slice(),i[4]-=a[0],i[5]-=a[1],a=a.slice(),a[0]=a[1]=0,a[2]=E,a[3]=D;const[j,st]=r.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(this.ctx)),{viewportScale:Z}=this,rt=Math.ceil(E*this.outputScaleX*Z),dt=Math.ceil(D*this.outputScaleY*Z);this.annotationCanvas=this.canvasFactory.create(rt,dt);const{canvas:pt,context:lt}=this.annotationCanvas;this.annotationCanvasMap.set(n,pt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=lt,this.ctx.save(),this.ctx.setTransform(j,0,0,-st,0,D*st),h(this.ctx)}else h(this.ctx),this.ctx.rect(a[0],a[1],E,D),this.ctx.clip(),this.endPath()}this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...c)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),X(this,mt,Ze).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(n){if(!this.contentVisible)return;const a=n.count;n=this.getObject(n.data,n),n.count=a;const i=this.ctx,c=this.processingType3;if(c&&(c.compiled===void 0&&(c.compiled=_(n)),c.compiled)){c.compiled(i);return}const d=this._createMaskCanvas(n),E=d.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(E,d.offsetX,d.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(n,a,i=0,c=0,d,E){if(!this.contentVisible)return;n=this.getObject(n.data,n);const D=this.ctx;D.save();const j=(0,u.getCurrentTransform)(D);D.transform(a,i,c,d,0,0);const st=this._createMaskCanvas(n);D.setTransform(1,0,0,1,st.offsetX-j[4],st.offsetY-j[5]);for(let Z=0,rt=E.length;Z<rt;Z+=2){const dt=r.Util.transform(j,[a,i,c,d,E[Z],E[Z+1]]),[pt,lt]=r.Util.applyTransform([0,0],dt);D.drawImage(st.canvas,pt,lt)}D.restore(),this.compose()}paintImageMaskXObjectGroup(n){if(!this.contentVisible)return;const a=this.ctx,i=this.current.fillColor,c=this.current.patternFill;for(const d of n){const{data:E,width:D,height:j,transform:st}=d,Z=this.cachedCanvases.getCanvas("maskCanvas",D,j),rt=Z.context;rt.save();const dt=this.getObject(E,d);y(rt,dt),rt.globalCompositeOperation="source-in",rt.fillStyle=c?i.getPattern(rt,this,(0,u.getCurrentTransformInverse)(a),G.PathType.FILL):i,rt.fillRect(0,0,D,j),rt.restore(),a.save(),a.transform(...st),a.scale(1,-1),f(a,Z.canvas,0,0,D,j,0,-1,1,1),a.restore()}this.compose()}paintImageXObject(n){if(!this.contentVisible)return;const a=this.getObject(n);if(!a){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(a)}paintImageXObjectRepeat(n,a,i,c){if(!this.contentVisible)return;const d=this.getObject(n);if(!d){(0,r.warn)("Dependent image isn't ready yet");return}const E=d.width,D=d.height,j=[];for(let st=0,Z=c.length;st<Z;st+=2)j.push({transform:[a,0,0,i,c[st],c[st+1]],x:0,y:0,w:E,h:D});this.paintInlineImageXObjectGroup(d,j)}applyTransferMapsToCanvas(n){return this.current.transferMaps!=="none"&&(n.filter=this.current.transferMaps,n.drawImage(n.canvas,0,0),n.filter="none"),n.canvas}applyTransferMapsToBitmap(n){if(this.current.transferMaps==="none")return n.bitmap;const{bitmap:a,width:i,height:c}=n,d=this.cachedCanvases.getCanvas("inlineImage",i,c),E=d.context;return E.filter=this.current.transferMaps,E.drawImage(a,0,0),E.filter="none",d.canvas}paintInlineImageXObject(n){if(!this.contentVisible)return;const a=n.width,i=n.height,c=this.ctx;if(this.save(),!r.isNodeJS){const{filter:D}=c;D!=="none"&&D!==""&&(c.filter="none")}c.scale(1/a,-1/i);let d;if(n.bitmap)d=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)d=n;else{const j=this.cachedCanvases.getCanvas("inlineImage",a,i).context;T(j,n),d=this.applyTransferMapsToCanvas(j)}const E=this._scaleImage(d,(0,u.getCurrentTransformInverse)(c));c.imageSmoothingEnabled=H((0,u.getCurrentTransform)(c),n.interpolate),f(c,E.img,0,0,E.paintWidth,E.paintHeight,0,-i,a,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(n,a){if(!this.contentVisible)return;const i=this.ctx;let c;if(n.bitmap)c=n.bitmap;else{const d=n.width,E=n.height,j=this.cachedCanvases.getCanvas("inlineImage",d,E).context;T(j,n),c=this.applyTransferMapsToCanvas(j)}for(const d of a)i.save(),i.transform(...d.transform),i.scale(1,-1),f(i,c,d.x,d.y,d.w,d.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(n){}markPointProps(n,a){}beginMarkedContent(n){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(n,a){n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(a)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(n){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;this.pendingClip&&(a||(this.pendingClip===nt?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const n=(0,u.getCurrentTransform)(this.ctx);if(n[1]===0&&n[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(n[0]),Math.abs(n[3]));else{const a=Math.abs(n[0]*n[3]-n[2]*n[1]),i=Math.hypot(n[0],n[2]),c=Math.hypot(n[1],n[3]);this._cachedGetSinglePixelWidth=Math.max(i,c)/a}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:n}=this.current,{a,b:i,c,d}=this.ctx.getTransform();let E,D;if(i===0&&c===0){const j=Math.abs(a),st=Math.abs(d);if(j===st)if(n===0)E=D=1/j;else{const Z=j*n;E=D=Z<1?1/Z:1}else if(n===0)E=1/j,D=1/st;else{const Z=j*n,rt=st*n;E=Z<1?1/Z:1,D=rt<1?1/rt:1}}else{const j=Math.abs(a*d-i*c),st=Math.hypot(a,i),Z=Math.hypot(c,d);if(n===0)E=Z/j,D=st/j;else{const rt=n*j;E=Z>rt?Z/rt:1,D=st>rt?st/rt:1}}this._cachedScaleForStroking[0]=E,this._cachedScaleForStroking[1]=D}return this._cachedScaleForStroking}rescaleAndStroke(n){const{ctx:a}=this,{lineWidth:i}=this.current,[c,d]=this.getScaleForStroking();if(a.lineWidth=i||1,c===1&&d===1){a.stroke();return}const E=a.getLineDash();if(n&&a.save(),a.scale(c,d),E.length>0){const D=Math.max(c,d);a.setLineDash(E.map(j=>j/D)),a.lineDashOffset/=D}a.stroke(),n&&a.restore()}isContentVisible(){for(let n=this.markedContentStack.length-1;n>=0;n--)if(!this.markedContentStack[n].visible)return!1;return!0}};$=new WeakSet,Qe=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},mt=new WeakSet,Ze=function(){if(this.pageColors){const n=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(n!=="none"){const a=this.ctx.filter;this.ctx.filter=n,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=a}}};let ot=Tt;s.CanvasGraphics=ot;for(const C in r.OPS)ot.prototype[C]!==void 0&&(ot.prototype[r.OPS[C]]=ot.prototype[C])},(k,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=x;var r=L(1),u=L(6);const G={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};s.PathType=G;function W(_,P){if(!P)return;const T=P[2]-P[0],y=P[3]-P[1],o=new Path2D;o.rect(P[0],P[1],T,y),_.clip(o)}class ut{constructor(){this.constructor===ut&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class F extends ut{constructor(P){super(),this._type=P[1],this._bbox=P[2],this._colorStops=P[3],this._p0=P[4],this._p1=P[5],this._r0=P[6],this._r1=P[7],this.matrix=null}_createGradient(P){let T;this._type==="axial"?T=P.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(T=P.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const y of this._colorStops)T.addColorStop(y[0],y[1]);return T}getPattern(P,T,y,o){let h;if(o===G.STROKE||o===G.FILL){const M=T.current.getClippedPathBoundingBox(o,(0,u.getCurrentTransform)(P))||[0,0,0,0],m=Math.ceil(M[2]-M[0])||1,l=Math.ceil(M[3]-M[1])||1,R=T.cachedCanvases.getCanvas("pattern",m,l,!0),p=R.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-M[0],-M[1]),y=r.Util.transform(y,[1,0,0,1,M[0],M[1]]),p.transform(...T.baseTransform),this.matrix&&p.transform(...this.matrix),W(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),h=P.createPattern(R.canvas,"no-repeat");const H=new DOMMatrix(y);h.setTransform(H)}else W(P,this._bbox),h=this._createGradient(P);return h}}function w(_,P,T,y,o,h,M,m){const l=P.coords,R=P.colors,p=_.data,H=_.width*4;let V;l[T+1]>l[y+1]&&(V=T,T=y,y=V,V=h,h=M,M=V),l[y+1]>l[o+1]&&(V=y,y=o,o=V,V=M,M=m,m=V),l[T+1]>l[y+1]&&(V=T,T=y,y=V,V=h,h=M,M=V);const S=(l[T]+P.offsetX)*P.scaleX,q=(l[T+1]+P.offsetY)*P.scaleY,nt=(l[y]+P.offsetX)*P.scaleX,ot=(l[y+1]+P.offsetY)*P.scaleY,$=(l[o]+P.offsetX)*P.scaleX,ct=(l[o+1]+P.offsetY)*P.scaleY;if(q>=ct)return;const mt=R[h],Et=R[h+1],Tt=R[h+2],C=R[M],n=R[M+1],a=R[M+2],i=R[m],c=R[m+1],d=R[m+2],E=Math.round(q),D=Math.round(ct);let j,st,Z,rt,dt,pt,lt,Ct;for(let Ot=E;Ot<=D;Ot++){if(Ot<ot){const et=Ot<q?0:(q-Ot)/(q-ot);j=S-(S-nt)*et,st=mt-(mt-C)*et,Z=Et-(Et-n)*et,rt=Tt-(Tt-a)*et}else{let et;Ot>ct?et=1:ot===ct?et=0:et=(ot-Ot)/(ot-ct),j=nt-(nt-$)*et,st=C-(C-i)*et,Z=n-(n-c)*et,rt=a-(a-d)*et}let vt;Ot<q?vt=0:Ot>ct?vt=1:vt=(q-Ot)/(q-ct),dt=S-(S-$)*vt,pt=mt-(mt-i)*vt,lt=Et-(Et-c)*vt,Ct=Tt-(Tt-d)*vt;const Dt=Math.round(Math.min(j,dt)),gt=Math.round(Math.max(j,dt));let tt=H*Ot+Dt*4;for(let et=Dt;et<=gt;et++)vt=(j-et)/(j-dt),vt<0?vt=0:vt>1&&(vt=1),p[tt++]=st-(st-pt)*vt|0,p[tt++]=Z-(Z-lt)*vt|0,p[tt++]=rt-(rt-Ct)*vt|0,p[tt++]=255}}function g(_,P,T){const y=P.coords,o=P.colors;let h,M;switch(P.type){case"lattice":const m=P.verticesPerRow,l=Math.floor(y.length/m)-1,R=m-1;for(h=0;h<l;h++){let p=h*m;for(let H=0;H<R;H++,p++)w(_,T,y[p],y[p+1],y[p+m],o[p],o[p+1],o[p+m]),w(_,T,y[p+m+1],y[p+1],y[p+m],o[p+m+1],o[p+1],o[p+m])}break;case"triangles":for(h=0,M=y.length;h<M;h+=3)w(_,T,y[h],y[h+1],y[h+2],o[h],o[h+1],o[h+2]);break;default:throw new Error("illegal figure")}}class O extends ut{constructor(P){super(),this._coords=P[2],this._colors=P[3],this._figures=P[4],this._bounds=P[5],this._bbox=P[7],this._background=P[8],this.matrix=null}_createMeshCanvas(P,T,y){const m=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),R=Math.ceil(this._bounds[2])-m,p=Math.ceil(this._bounds[3])-l,H=Math.min(Math.ceil(Math.abs(R*P[0]*1.1)),3e3),V=Math.min(Math.ceil(Math.abs(p*P[1]*1.1)),3e3),S=R/H,q=p/V,nt={coords:this._coords,colors:this._colors,offsetX:-m,offsetY:-l,scaleX:1/S,scaleY:1/q},ot=H+2*2,$=V+2*2,ct=y.getCanvas("mesh",ot,$,!1),mt=ct.context,Et=mt.createImageData(H,V);if(T){const C=Et.data;for(let n=0,a=C.length;n<a;n+=4)C[n]=T[0],C[n+1]=T[1],C[n+2]=T[2],C[n+3]=255}for(const C of this._figures)g(Et,C,nt);return mt.putImageData(Et,2,2),{canvas:ct.canvas,offsetX:m-2*S,offsetY:l-2*q,scaleX:S,scaleY:q}}getPattern(P,T,y,o){W(P,this._bbox);let h;if(o===G.SHADING)h=r.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(P));else if(h=r.Util.singularValueDecompose2dScale(T.baseTransform),this.matrix){const m=r.Util.singularValueDecompose2dScale(this.matrix);h=[h[0]*m[0],h[1]*m[1]]}const M=this._createMeshCanvas(h,o===G.SHADING?null:this._background,T.cachedCanvases);return o!==G.SHADING&&(P.setTransform(...T.baseTransform),this.matrix&&P.transform(...this.matrix)),P.translate(M.offsetX,M.offsetY),P.scale(M.scaleX,M.scaleY),P.createPattern(M.canvas,"no-repeat")}}class I extends ut{getPattern(){return"hotpink"}}function x(_){switch(_[0]){case"RadialAxial":return new F(_);case"Mesh":return new O(_);case"Dummy":return new I}throw new Error("Unknown IR type: ".concat(_[0]))}const v={COLORED:1,UNCOLORED:2},f=class f{constructor(P,T,y,o,h){this.operatorList=P[2],this.matrix=P[3]||[1,0,0,1,0,0],this.bbox=P[4],this.xstep=P[5],this.ystep=P[6],this.paintType=P[7],this.tilingType=P[8],this.color=T,this.ctx=y,this.canvasGraphicsFactory=o,this.baseTransform=h}createPatternCanvas(P){const T=this.operatorList,y=this.bbox,o=this.xstep,h=this.ystep,M=this.paintType,m=this.tilingType,l=this.color,R=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+m);const p=y[0],H=y[1],V=y[2],S=y[3],q=r.Util.singularValueDecompose2dScale(this.matrix),nt=r.Util.singularValueDecompose2dScale(this.baseTransform),ot=[q[0]*nt[0],q[1]*nt[1]],$=this.getSizeAndScale(o,this.ctx.canvas.width,ot[0]),ct=this.getSizeAndScale(h,this.ctx.canvas.height,ot[1]),mt=P.cachedCanvases.getCanvas("pattern",$.size,ct.size,!0),Et=mt.context,Tt=R.createCanvasGraphics(Et);Tt.groupLevel=P.groupLevel,this.setFillAndStrokeStyleToContext(Tt,M,l);let C=p,n=H,a=V,i=S;return p<0&&(C=0,a+=Math.abs(p)),H<0&&(n=0,i+=Math.abs(H)),Et.translate(-($.scale*C),-(ct.scale*n)),Tt.transform($.scale,0,0,ct.scale,0,0),Et.save(),this.clipBbox(Tt,C,n,a,i),Tt.baseTransform=(0,u.getCurrentTransform)(Tt.ctx),Tt.executeOperatorList(T),Tt.endDrawing(),{canvas:mt.canvas,scaleX:$.scale,scaleY:ct.scale,offsetX:C,offsetY:n}}getSizeAndScale(P,T,y){P=Math.abs(P);const o=Math.max(f.MAX_PATTERN_SIZE,T);let h=Math.ceil(P*y);return h>=o?h=o:y=h/P,{scale:y,size:h}}clipBbox(P,T,y,o,h){const M=o-T,m=h-y;P.ctx.rect(T,y,M,m),P.current.updateRectMinMax((0,u.getCurrentTransform)(P.ctx),[T,y,o,h]),P.clip(),P.endPath()}setFillAndStrokeStyleToContext(P,T,y){const o=P.ctx,h=P.current;switch(T){case v.COLORED:const M=this.ctx;o.fillStyle=M.fillStyle,o.strokeStyle=M.strokeStyle,h.fillColor=M.fillStyle,h.strokeColor=M.strokeStyle;break;case v.UNCOLORED:const m=r.Util.makeHexColor(y[0],y[1],y[2]);o.fillStyle=m,o.strokeStyle=m,h.fillColor=m,h.strokeColor=m;break;default:throw new r.FormatError("Unsupported paint type: ".concat(T))}}getPattern(P,T,y,o){let h=y;o!==G.SHADING&&(h=r.Util.transform(h,T.baseTransform),this.matrix&&(h=r.Util.transform(h,this.matrix)));const M=this.createPatternCanvas(T);let m=new DOMMatrix(h);m=m.translate(M.offsetX,M.offsetY),m=m.scale(1/M.scaleX,1/M.scaleY);const l=P.createPattern(M.canvas,"repeat");return l.setTransform(m),l}};ee(f,"MAX_PATTERN_SIZE",3e3);let A=f;s.TilingPattern=A},(k,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.convertBlackAndWhiteToRGBA=G,s.convertToRGBA=u,s.grayToRGBA=ut;var r=L(1);function u(F){switch(F.kind){case r.ImageKind.GRAYSCALE_1BPP:return G(F);case r.ImageKind.RGB_24BPP:return W(F)}return null}function G({src:F,srcPos:w=0,dest:g,width:O,height:I,nonBlackColor:x=4294967295,inverseDecode:v=!1}){const A=r.FeatureTest.isLittleEndian?4278190080:255,[f,_]=v?[x,A]:[A,x],P=O>>3,T=O&7,y=F.length;g=new Uint32Array(g.buffer);let o=0;for(let h=0;h<I;h++){for(const m=w+P;w<m;w++){const l=w<y?F[w]:255;g[o++]=l&128?_:f,g[o++]=l&64?_:f,g[o++]=l&32?_:f,g[o++]=l&16?_:f,g[o++]=l&8?_:f,g[o++]=l&4?_:f,g[o++]=l&2?_:f,g[o++]=l&1?_:f}if(T===0)continue;const M=w<y?F[w++]:255;for(let m=0;m<T;m++)g[o++]=M&1<<7-m?_:f}return{srcPos:w,destPos:o}}function W({src:F,srcPos:w=0,dest:g,destPos:O=0,width:I,height:x}){let v=0;const A=F.length>>2,f=new Uint32Array(F.buffer,w,A);if(r.FeatureTest.isLittleEndian){for(;v<A-2;v+=3,O+=4){const _=f[v],P=f[v+1],T=f[v+2];g[O]=_|4278190080,g[O+1]=_>>>24|P<<8|4278190080,g[O+2]=P>>>16|T<<16|4278190080,g[O+3]=T>>>8|4278190080}for(let _=v*4,P=F.length;_<P;_+=3)g[O++]=F[_]|F[_+1]<<8|F[_+2]<<16|4278190080}else{for(;v<A-2;v+=3,O+=4){const _=f[v],P=f[v+1],T=f[v+2];g[O]=_|255,g[O+1]=_<<24|P>>>8|255,g[O+2]=P<<16|T>>>16|255,g[O+3]=T<<8|255}for(let _=v*4,P=F.length;_<P;_+=3)g[O++]=F[_]<<24|F[_+1]<<16|F[_+2]<<8|255}return{srcPos:w,destPos:O}}function ut(F,w){if(r.FeatureTest.isLittleEndian)for(let g=0,O=F.length;g<O;g++)w[g]=F[g]*65793|4278190080;else for(let g=0,O=F.length;g<O;g++)w[g]=F[g]*16843008|255}},(k,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const L=Object.create(null);s.GlobalWorkerOptions=L,L.workerPort=null,L.workerSrc=""},(k,s,L)=>{var F,Rn,g,kn,I,Ce;Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var r=L(1);const u={UNKNOWN:0,DATA:1,ERROR:2},G={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function W(v){switch(v instanceof Error||typeof v=="object"&&v!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),v.name){case"AbortException":return new r.AbortException(v.message);case"MissingPDFException":return new r.MissingPDFException(v.message);case"PasswordException":return new r.PasswordException(v.message,v.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(v.message,v.status);case"UnknownErrorException":return new r.UnknownErrorException(v.message,v.details);default:return new r.UnknownErrorException(v.message,v.toString())}}class ut{constructor(A,f,_){U(this,F);U(this,g);U(this,I);this.sourceName=A,this.targetName=f,this.comObj=_,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=P=>{const T=P.data;if(T.targetName!==this.sourceName)return;if(T.stream){X(this,g,kn).call(this,T);return}if(T.callback){const o=T.callbackId,h=this.callbackCapabilities[o];if(!h)throw new Error("Cannot resolve callback ".concat(o));if(delete this.callbackCapabilities[o],T.callback===u.DATA)h.resolve(T.data);else if(T.callback===u.ERROR)h.reject(W(T.reason));else throw new Error("Unexpected callback case");return}const y=this.actionHandler[T.action];if(!y)throw new Error("Unknown action from worker: ".concat(T.action));if(T.callbackId){const o=this.sourceName,h=T.sourceName;new Promise(function(M){M(y(T.data))}).then(function(M){_.postMessage({sourceName:o,targetName:h,callback:u.DATA,callbackId:T.callbackId,data:M})},function(M){_.postMessage({sourceName:o,targetName:h,callback:u.ERROR,callbackId:T.callbackId,reason:W(M)})});return}if(T.streamId){X(this,F,Rn).call(this,T);return}y(T.data)},_.addEventListener("message",this._onComObjOnMessage)}on(A,f){const _=this.actionHandler;if(_[A])throw new Error('There is already an actionName called "'.concat(A,'"'));_[A]=f}send(A,f,_){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,data:f},_)}sendWithPromise(A,f,_){const P=this.callbackId++,T=new r.PromiseCapability;this.callbackCapabilities[P]=T;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,callbackId:P,data:f},_)}catch(y){T.reject(y)}return T.promise}sendWithStream(A,f,_,P){const T=this.streamId++,y=this.sourceName,o=this.targetName,h=this.comObj;return new ReadableStream({start:M=>{const m=new r.PromiseCapability;return this.streamControllers[T]={controller:M,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:y,targetName:o,action:A,streamId:T,data:f,desiredSize:M.desiredSize},P),m.promise},pull:M=>{const m=new r.PromiseCapability;return this.streamControllers[T].pullCall=m,h.postMessage({sourceName:y,targetName:o,stream:G.PULL,streamId:T,desiredSize:M.desiredSize}),m.promise},cancel:M=>{(0,r.assert)(M instanceof Error,"cancel must have a valid reason");const m=new r.PromiseCapability;return this.streamControllers[T].cancelCall=m,this.streamControllers[T].isClosed=!0,h.postMessage({sourceName:y,targetName:o,stream:G.CANCEL,streamId:T,reason:W(M)}),m.promise}},_)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}F=new WeakSet,Rn=function(A){const f=A.streamId,_=this.sourceName,P=A.sourceName,T=this.comObj,y=this,o=this.actionHandler[A.action],h={enqueue(M,m=1,l){if(this.isCancelled)return;const R=this.desiredSize;this.desiredSize-=m,R>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),T.postMessage({sourceName:_,targetName:P,stream:G.ENQUEUE,streamId:f,chunk:M},l)},close(){this.isCancelled||(this.isCancelled=!0,T.postMessage({sourceName:_,targetName:P,stream:G.CLOSE,streamId:f}),delete y.streamSinks[f])},error(M){(0,r.assert)(M instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,T.postMessage({sourceName:_,targetName:P,stream:G.ERROR,streamId:f,reason:W(M)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:A.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[f]=h,new Promise(function(M){M(o(A.data,h))}).then(function(){T.postMessage({sourceName:_,targetName:P,stream:G.START_COMPLETE,streamId:f,success:!0})},function(M){T.postMessage({sourceName:_,targetName:P,stream:G.START_COMPLETE,streamId:f,reason:W(M)})})},g=new WeakSet,kn=function(A){const f=A.streamId,_=this.sourceName,P=A.sourceName,T=this.comObj,y=this.streamControllers[f],o=this.streamSinks[f];switch(A.stream){case G.START_COMPLETE:A.success?y.startCall.resolve():y.startCall.reject(W(A.reason));break;case G.PULL_COMPLETE:A.success?y.pullCall.resolve():y.pullCall.reject(W(A.reason));break;case G.PULL:if(!o){T.postMessage({sourceName:_,targetName:P,stream:G.PULL_COMPLETE,streamId:f,success:!0});break}o.desiredSize<=0&&A.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=A.desiredSize,new Promise(function(h){var M;h((M=o.onPull)==null?void 0:M.call(o))}).then(function(){T.postMessage({sourceName:_,targetName:P,stream:G.PULL_COMPLETE,streamId:f,success:!0})},function(h){T.postMessage({sourceName:_,targetName:P,stream:G.PULL_COMPLETE,streamId:f,reason:W(h)})});break;case G.ENQUEUE:if((0,r.assert)(y,"enqueue should have stream controller"),y.isClosed)break;y.controller.enqueue(A.chunk);break;case G.CLOSE:if((0,r.assert)(y,"close should have stream controller"),y.isClosed)break;y.isClosed=!0,y.controller.close(),X(this,I,Ce).call(this,y,f);break;case G.ERROR:(0,r.assert)(y,"error should have stream controller"),y.controller.error(W(A.reason)),X(this,I,Ce).call(this,y,f);break;case G.CANCEL_COMPLETE:A.success?y.cancelCall.resolve():y.cancelCall.reject(W(A.reason)),X(this,I,Ce).call(this,y,f);break;case G.CANCEL:if(!o)break;new Promise(function(h){var M;h((M=o.onCancel)==null?void 0:M.call(o,W(A.reason)))}).then(function(){T.postMessage({sourceName:_,targetName:P,stream:G.CANCEL_COMPLETE,streamId:f,success:!0})},function(h){T.postMessage({sourceName:_,targetName:P,stream:G.CANCEL_COMPLETE,streamId:f,reason:W(h)})}),o.sinkCapability.reject(W(A.reason)),o.isCancelled=!0,delete this.streamSinks[f];break;default:throw new Error("Unexpected stream case")}},I=new WeakSet,Ce=async function(A,f){var _,P,T;await Promise.allSettled([(_=A.startCall)==null?void 0:_.promise,(P=A.pullCall)==null?void 0:P.promise,(T=A.cancelCall)==null?void 0:T.promise]),delete this.streamControllers[f]},s.MessageHandler=ut},(k,s,L)=>{var G,W;Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var r=L(1);class u{constructor({parsedData:F,rawData:w}){U(this,G,void 0);U(this,W,void 0);it(this,G,F),it(this,W,w)}getRaw(){return t(this,W)}get(F){var w;return(w=t(this,G).get(F))!=null?w:null}getAll(){return(0,r.objectFromMap)(t(this,G))}has(F){return t(this,G).has(F)}}G=new WeakMap,W=new WeakMap,s.Metadata=u},(k,s,L)=>{var F,w,g,O,I,x,tn;Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var r=L(1),u=L(8);const G=Symbol("INTERNAL");class W{constructor(f,_){U(this,F,!0);this.name=f,this.intent=_}get visible(){return t(this,F)}_setVisible(f,_){f!==G&&(0,r.unreachable)("Internal method `_setVisible` called."),it(this,F,_)}}F=new WeakMap;class ut{constructor(f){U(this,x);U(this,w,null);U(this,g,new Map);U(this,O,null);U(this,I,null);if(this.name=null,this.creator=null,f!==null){this.name=f.name,this.creator=f.creator,it(this,I,f.order);for(const _ of f.groups)t(this,g).set(_.id,new W(_.name,_.intent));if(f.baseState==="OFF")for(const _ of t(this,g).values())_._setVisible(G,!1);for(const _ of f.on)t(this,g).get(_)._setVisible(G,!0);for(const _ of f.off)t(this,g).get(_)._setVisible(G,!1);it(this,O,this.getHash())}}isVisible(f){if(t(this,g).size===0)return!0;if(!f)return(0,r.warn)("Optional content group not defined."),!0;if(f.type==="OCG")return t(this,g).has(f.id)?t(this,g).get(f.id).visible:((0,r.warn)("Optional content group not found: ".concat(f.id)),!0);if(f.type==="OCMD"){if(f.expression)return X(this,x,tn).call(this,f.expression);if(!f.policy||f.policy==="AnyOn"){for(const _ of f.ids){if(!t(this,g).has(_))return(0,r.warn)("Optional content group not found: ".concat(_)),!0;if(t(this,g).get(_).visible)return!0}return!1}else if(f.policy==="AllOn"){for(const _ of f.ids){if(!t(this,g).has(_))return(0,r.warn)("Optional content group not found: ".concat(_)),!0;if(!t(this,g).get(_).visible)return!1}return!0}else if(f.policy==="AnyOff"){for(const _ of f.ids){if(!t(this,g).has(_))return(0,r.warn)("Optional content group not found: ".concat(_)),!0;if(!t(this,g).get(_).visible)return!0}return!1}else if(f.policy==="AllOff"){for(const _ of f.ids){if(!t(this,g).has(_))return(0,r.warn)("Optional content group not found: ".concat(_)),!0;if(t(this,g).get(_).visible)return!1}return!0}return(0,r.warn)("Unknown optional content policy ".concat(f.policy,".")),!0}return(0,r.warn)("Unknown group type ".concat(f.type,".")),!0}setVisibility(f,_=!0){if(!t(this,g).has(f)){(0,r.warn)("Optional content group not found: ".concat(f));return}t(this,g).get(f)._setVisible(G,!!_),it(this,w,null)}get hasInitialVisibility(){return t(this,O)===null||this.getHash()===t(this,O)}getOrder(){return t(this,g).size?t(this,I)?t(this,I).slice():[...t(this,g).keys()]:null}getGroups(){return t(this,g).size>0?(0,r.objectFromMap)(t(this,g)):null}getGroup(f){return t(this,g).get(f)||null}getHash(){if(t(this,w)!==null)return t(this,w);const f=new u.MurmurHash3_64;for(const[_,P]of t(this,g))f.update("".concat(_,":").concat(P.visible));return it(this,w,f.hexdigest())}}w=new WeakMap,g=new WeakMap,O=new WeakMap,I=new WeakMap,x=new WeakSet,tn=function(f){const _=f.length;if(_<2)return!0;const P=f[0];for(let T=1;T<_;T++){const y=f[T];let o;if(Array.isArray(y))o=X(this,x,tn).call(this,y);else if(t(this,g).has(y))o=t(this,g).get(y).visible;else return(0,r.warn)("Optional content group not found: ".concat(y)),!0;switch(P){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return P==="And"},s.OptionalContentConfig=ut},(k,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var r=L(1),u=L(6);class G{constructor({length:w,initialData:g,progressiveDone:O=!1,contentDispositionFilename:I=null,disableRange:x=!1,disableStream:v=!1},A){if((0,r.assert)(A,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=O,this._contentDispositionFilename=I,(g==null?void 0:g.length)>0){const f=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=A,this._isStreamingSupported=!v,this._isRangeSupported=!x,this._contentLength=w,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((f,_)=>{this._onReceiveData({begin:f,chunk:_})}),this._pdfDataRangeTransport.addProgressListener((f,_)=>{this._onProgress({loaded:f,total:_})}),this._pdfDataRangeTransport.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:w,chunk:g}){const O=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;if(w===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(O):this._queuedChunks.push(O);else{const I=this._rangeReaders.some(function(x){return x._begin!==w?!1:(x._enqueue(O),!0)});(0,r.assert)(I,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var w,g;return(g=(w=this._fullRequestReader)==null?void 0:w._loaded)!=null?g:0}_onProgress(w){var g,O,I,x;w.total===void 0?(O=(g=this._rangeReaders[0])==null?void 0:g.onProgress)==null||O.call(g,{loaded:w.loaded}):(x=(I=this._fullRequestReader)==null?void 0:I.onProgress)==null||x.call(I,{loaded:w.loaded,total:w.total})}_onProgressiveDone(){var w;(w=this._fullRequestReader)==null||w.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(w){const g=this._rangeReaders.indexOf(w);g>=0&&this._rangeReaders.splice(g,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const w=this._queuedChunks;return this._queuedChunks=null,new W(this,w,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(w,g){if(g<=this._progressiveDataLength)return null;const O=new ut(this,w,g);return this._pdfDataRangeTransport.requestDataRange(w,g),this._rangeReaders.push(O),O}cancelAllRequests(w){var g;(g=this._fullRequestReader)==null||g.cancel(w);for(const O of this._rangeReaders.slice(0))O.cancel(w);this._pdfDataRangeTransport.abort()}}s.PDFDataTransportStream=G;class W{constructor(w,g,O=!1,I=null){this._stream=w,this._done=O||!1,this._filename=(0,u.isPdfFile)(I)?I:null,this._queuedChunks=g||[],this._loaded=0;for(const x of this._queuedChunks)this._loaded+=x.byteLength;this._requests=[],this._headersReady=Promise.resolve(),w._fullRequestReader=this,this.onProgress=null}_enqueue(w){this._done||(this._requests.length>0?this._requests.shift().resolve({value:w,done:!1}):this._queuedChunks.push(w),this._loaded+=w.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const w=new r.PromiseCapability;return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ut{constructor(w,g,O){this._stream=w,this._begin=g,this._end=O,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(w){if(!this._done){if(this._requests.length===0)this._queuedChunk=w;else{this._requests.shift().resolve({value:w,done:!1});for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const w=new r.PromiseCapability;return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(k,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var r=L(1),u=L(20);function G(O,I,x){return{method:"GET",headers:O,signal:x.signal,mode:"cors",credentials:I?"include":"same-origin",redirect:"follow"}}function W(O){const I=new Headers;for(const x in O){const v=O[x];v!==void 0&&I.append(x,v)}return I}function ut(O){return O instanceof Uint8Array?O.buffer:O instanceof ArrayBuffer?O:((0,r.warn)("getArrayBuffer - unexpected data format: ".concat(O)),new Uint8Array(O).buffer)}class F{constructor(I){this.source=I,this.isHttp=/^https?:/i.test(I.url),this.httpHeaders=this.isHttp&&I.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var I,x;return(x=(I=this._fullRequestReader)==null?void 0:I._loaded)!=null?x:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new w(this),this._fullRequestReader}getRangeReader(I,x){if(x<=this._progressiveDataLength)return null;const v=new g(this,I,x);return this._rangeRequestReaders.push(v),v}cancelAllRequests(I){var x;(x=this._fullRequestReader)==null||x.cancel(I);for(const v of this._rangeRequestReaders.slice(0))v.cancel(I)}}s.PDFFetchStream=F;class w{constructor(I){this._stream=I,this._reader=null,this._loaded=0,this._filename=null;const x=I.source;this._withCredentials=x.withCredentials||!1,this._contentLength=x.length,this._headersCapability=new r.PromiseCapability,this._disableRange=x.disableRange||!1,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._headers=W(this._stream.httpHeaders);const v=x.url;fetch(v,G(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,u.validateResponseStatus)(A.status))throw(0,u.createResponseStatusError)(A.status,v);this._reader=A.body.getReader(),this._headersCapability.resolve();const f=T=>A.headers.get(T),{allowRangeRequests:_,suggestedLength:P}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=P||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(f),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;await this._headersCapability.promise;const{value:I,done:x}=await this._reader.read();return x?{value:I,done:x}:(this._loaded+=I.byteLength,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ut(I),done:!1})}cancel(I){var x;(x=this._reader)==null||x.cancel(I),this._abortController.abort()}}class g{constructor(I,x,v){this._stream=I,this._reader=null,this._loaded=0;const A=I.source;this._withCredentials=A.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!A.disableStream,this._abortController=new AbortController,this._headers=W(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(x,"-").concat(v-1));const f=A.url;fetch(f,G(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,u.validateResponseStatus)(_.status))throw(0,u.createResponseStatusError)(_.status,f);this._readCapability.resolve(),this._reader=_.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;await this._readCapability.promise;const{value:I,done:x}=await this._reader.read();return x?{value:I,done:x}:(this._loaded+=I.byteLength,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded}),{value:ut(I),done:!1})}cancel(I){var x;(x=this._reader)==null||x.cancel(I),this._abortController.abort()}}},(k,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=F,s.extractFilenameFromHeader=ut,s.validateRangeRequestCapabilities=W,s.validateResponseStatus=w;var r=L(1),u=L(21),G=L(6);function W({getResponseHeader:g,isHttp:O,rangeChunkSize:I,disableRange:x}){const v={allowRangeRequests:!1,suggestedLength:void 0},A=parseInt(g("Content-Length"),10);return!Number.isInteger(A)||(v.suggestedLength=A,A<=2*I)||x||!O||g("Accept-Ranges")!=="bytes"||(g("Content-Encoding")||"identity")!=="identity"||(v.allowRangeRequests=!0),v}function ut(g){const O=g("Content-Disposition");if(O){let I=(0,u.getFilenameFromContentDispositionHeader)(O);if(I.includes("%"))try{I=decodeURIComponent(I)}catch{}if((0,G.isPdfFile)(I))return I}return null}function F(g,O){return g===404||g===0&&O.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+O+'".'):new r.UnexpectedResponseException("Unexpected server response (".concat(g,') while retrieving PDF "').concat(O,'".'),g)}function w(g){return g===200||g===206}},(k,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=u;var r=L(1);function u(G){let W=!0,ut=F("filename\\*","i").exec(G);if(ut){ut=ut[1];let A=I(ut);return A=unescape(A),A=x(A),A=v(A),g(A)}if(ut=O(G),ut){const A=v(ut);return g(A)}if(ut=F("filename","i").exec(G),ut){ut=ut[1];let A=I(ut);return A=v(A),g(A)}function F(A,f){return new RegExp("(?:^|;)\\s*"+A+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function w(A,f){if(A){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const _=new TextDecoder(A,{fatal:!0}),P=(0,r.stringToBytes)(f);f=_.decode(P),W=!1}catch{}}return f}function g(A){return W&&/[\x80-\xff]/.test(A)&&(A=w("utf-8",A),W&&(A=w("iso-8859-1",A))),A}function O(A){const f=[];let _;const P=F("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(_=P.exec(A))!==null;){let[,y,o,h]=_;if(y=parseInt(y,10),y in f){if(y===0)break;continue}f[y]=[o,h]}const T=[];for(let y=0;y<f.length&&y in f;++y){let[o,h]=f[y];h=I(h),o&&(h=unescape(h),y===0&&(h=x(h))),T.push(h)}return T.join("")}function I(A){if(A.startsWith('"')){const f=A.slice(1).split('\\"');for(let _=0;_<f.length;++_){const P=f[_].indexOf('"');P!==-1&&(f[_]=f[_].slice(0,P),f.length=_+1),f[_]=f[_].replaceAll(/\\(.)/g,"$1")}A=f.join('"')}return A}function x(A){const f=A.indexOf("'");if(f===-1)return A;const _=A.slice(0,f),T=A.slice(f+1).replace(/^[^']*'/,"");return w(_,T)}function v(A){return!A.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(A)?A:A.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,_,P,T){if(P==="q"||P==="Q")return T=T.replaceAll("_"," "),T=T.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,o){return String.fromCharCode(parseInt(o,16))}),w(_,T);try{T=atob(T)}catch{}return w(_,T)})}return""}},(k,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var r=L(1),u=L(20);const G=200,W=206;function ut(I){const x=I.response;return typeof x!="string"?x:(0,r.stringToBytes)(x).buffer}class F{constructor(x,v={}){this.url=x,this.isHttp=/^https?:/i.test(x),this.httpHeaders=this.isHttp&&v.httpHeaders||Object.create(null),this.withCredentials=v.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(x,v,A){const f={begin:x,end:v};for(const _ in A)f[_]=A[_];return this.request(f)}requestFull(x){return this.request(x)}request(x){const v=new XMLHttpRequest,A=this.currXhrId++,f=this.pendingRequests[A]={xhr:v};v.open("GET",this.url),v.withCredentials=this.withCredentials;for(const _ in this.httpHeaders){const P=this.httpHeaders[_];P!==void 0&&v.setRequestHeader(_,P)}return this.isHttp&&"begin"in x&&"end"in x?(v.setRequestHeader("Range","bytes=".concat(x.begin,"-").concat(x.end-1)),f.expectedStatus=W):f.expectedStatus=G,v.responseType="arraybuffer",x.onError&&(v.onerror=function(_){x.onError(v.status)}),v.onreadystatechange=this.onStateChange.bind(this,A),v.onprogress=this.onProgress.bind(this,A),f.onHeadersReceived=x.onHeadersReceived,f.onDone=x.onDone,f.onError=x.onError,f.onProgress=x.onProgress,v.send(null),A}onProgress(x,v){var f;const A=this.pendingRequests[x];A&&((f=A.onProgress)==null||f.call(A,v))}onStateChange(x,v){var y,o,h;const A=this.pendingRequests[x];if(!A)return;const f=A.xhr;if(f.readyState>=2&&A.onHeadersReceived&&(A.onHeadersReceived(),delete A.onHeadersReceived),f.readyState!==4||!(x in this.pendingRequests))return;if(delete this.pendingRequests[x],f.status===0&&this.isHttp){(y=A.onError)==null||y.call(A,f.status);return}const _=f.status||G;if(!(_===G&&A.expectedStatus===W)&&_!==A.expectedStatus){(o=A.onError)==null||o.call(A,f.status);return}const T=ut(f);if(_===W){const M=f.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(M);A.onDone({begin:parseInt(m[1],10),chunk:T})}else T?A.onDone({begin:0,chunk:T}):(h=A.onError)==null||h.call(A,f.status)}getRequestXhr(x){return this.pendingRequests[x].xhr}isPendingRequest(x){return x in this.pendingRequests}abortRequest(x){const v=this.pendingRequests[x].xhr;delete this.pendingRequests[x],v.abort()}}class w{constructor(x){this._source=x,this._manager=new F(x.url,{httpHeaders:x.httpHeaders,withCredentials:x.withCredentials}),this._rangeChunkSize=x.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(x){const v=this._rangeRequestReaders.indexOf(x);v>=0&&this._rangeRequestReaders.splice(v,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g(this._manager,this._source),this._fullRequestReader}getRangeReader(x,v){const A=new O(this._manager,x,v);return A.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(A),A}cancelAllRequests(x){var v;(v=this._fullRequestReader)==null||v.cancel(x);for(const A of this._rangeRequestReaders.slice(0))A.cancel(x)}}s.PDFNetworkStream=w;class g{constructor(x,v){this._manager=x;const A={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=v.url,this._fullRequestId=x.requestFull(A),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=v.disableRange||!1,this._contentLength=v.length,this._rangeChunkSize=v.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const x=this._fullRequestId,v=this._manager.getRequestXhr(x),A=P=>v.getResponseHeader(P),{allowRangeRequests:f,suggestedLength:_}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});f&&(this._isRangeSupported=!0),this._contentLength=_||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(A),this._isRangeSupported&&this._manager.abortRequest(x),this._headersReceivedCapability.resolve()}_onDone(x){if(x&&(this._requests.length>0?this._requests.shift().resolve({value:x.chunk,done:!1}):this._cachedChunks.push(x.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(x){this._storedError=(0,u.createResponseStatusError)(x,this._url),this._headersReceivedCapability.reject(this._storedError);for(const v of this._requests)v.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(x){var v;(v=this.onProgress)==null||v.call(this,{loaded:x.loaded,total:x.lengthComputable?x.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const x=new r.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0,this._headersReceivedCapability.reject(x);for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class O{constructor(x,v,A){this._manager=x;const f={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=x.url,this._requestId=x.requestRange(v,A,f),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var x;(x=this.onClosed)==null||x.call(this,this)}_onDone(x){const v=x.chunk;this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunk=v,this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(x){this._storedError=(0,u.createResponseStatusError)(x,this._url);for(const v of this._requests)v.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(x){var v;this.isStreamingSupported||(v=this.onProgress)==null||v.call(this,{loaded:x.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const x=new r.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(k,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var r=L(1),u=L(20);const G=/^file:\/\/\/[a-zA-Z]:\//;function W(A){const f=require$$5,_=f.parse(A);return _.protocol==="file:"||_.host?_:/^[a-z]:[/\\]/i.test(A)?f.parse("file:///".concat(A)):(_.host||(_.protocol="file:"),_)}class ut{constructor(f){this.source=f,this.url=W(f.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var f,_;return(_=(f=this._fullRequestReader)==null?void 0:f._loaded)!=null?_:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new x(this):new O(this),this._fullRequestReader}getRangeReader(f,_){if(_<=this._progressiveDataLength)return null;const P=this.isFsUrl?new v(this,f,_):new I(this,f,_);return this._rangeRequestReaders.push(P),P}cancelAllRequests(f){var _;(_=this._fullRequestReader)==null||_.cancel(f);for(const P of this._rangeRequestReaders.slice(0))P.cancel(f)}}s.PDFNodeStream=ut;class F{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null;const _=f.source;this._contentLength=_.length,this._loaded=0,this._filename=null,this._disableRange=_.disableRange||!1,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var P;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=f.length,(P=this.onProgress)==null||P.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",_=>{this._error(_)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class w{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;const _=f.source;this._isStreamingSupported=!_.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var P;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=f.length,(P=this.onProgress)==null||P.call(this,{loaded:this._loaded}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",_=>{this._error(_)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function g(A,f){return{protocol:A.protocol,auth:A.auth,host:A.hostname,port:A.port,path:A.path,method:"GET",headers:f}}class O extends F{constructor(f){super(f);const _=P=>{if(P.statusCode===404){const h=new r.MissingPDFException('Missing PDF "'.concat(this._url,'".'));this._storedError=h,this._headersCapability.reject(h);return}this._headersCapability.resolve(),this._setReadableStream(P);const T=h=>this._readableStream.headers[h.toLowerCase()],{allowRangeRequests:y,suggestedLength:o}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:f.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=o||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(T)};if(this._request=null,this._url.protocol==="http:"){const P=require$$5;this._request=P.request(g(this._url,f.httpHeaders),_)}else{const P=require$$5;this._request=P.request(g(this._url,f.httpHeaders),_)}this._request.on("error",P=>{this._storedError=P,this._headersCapability.reject(P)}),this._request.end()}}class I extends w{constructor(f,_,P){super(f),this._httpHeaders={};for(const y in f.httpHeaders){const o=f.httpHeaders[y];o!==void 0&&(this._httpHeaders[y]=o)}this._httpHeaders.Range="bytes=".concat(_,"-").concat(P-1);const T=y=>{if(y.statusCode===404){const o=new r.MissingPDFException('Missing PDF "'.concat(this._url,'".'));this._storedError=o;return}this._setReadableStream(y)};if(this._request=null,this._url.protocol==="http:"){const y=require$$5;this._request=y.request(g(this._url,this._httpHeaders),T)}else{const y=require$$5;this._request=y.request(g(this._url,this._httpHeaders),T)}this._request.on("error",y=>{this._storedError=y}),this._request.end()}}class x extends F{constructor(f){super(f);let _=decodeURIComponent(this._url.path);G.test(this._url.href)&&(_=_.replace(/^\//,""));const P=require$$5;P.lstat(_,(T,y)=>{if(T){T.code==="ENOENT"&&(T=new r.MissingPDFException('Missing PDF "'.concat(_,'".'))),this._storedError=T,this._headersCapability.reject(T);return}this._contentLength=y.size,this._setReadableStream(P.createReadStream(_)),this._headersCapability.resolve()})}}class v extends w{constructor(f,_,P){super(f);let T=decodeURIComponent(this._url.path);G.test(this._url.href)&&(T=T.replace(/^\//,""));const y=require$$5;this._setReadableStream(y.createReadStream(T,{start:_,end:P-1}))}}},(k,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var r=L(6),u=L(1);const G={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},W="http://www.w3.org/XML/1998/namespace",ut="http://www.w3.org/1999/xlink",F=["butt","round","square"],w=["miter","round","bevel"],g=function(y,o="",h=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!h)return URL.createObjectURL(new Blob([y],{type:o}));const M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let m="data:".concat(o,";base64,");for(let l=0,R=y.length;l<R;l+=3){const p=y[l]&255,H=y[l+1]&255,V=y[l+2]&255,S=p>>2,q=(p&3)<<4|H>>4,nt=l+1<R?(H&15)<<2|V>>6:64,ot=l+2<R?V&63:64;m+=M[S]+M[q]+M[nt]+M[ot]}return m},O=function(){const y=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,h=new Int32Array(256);for(let V=0;V<256;V++){let S=V;for(let q=0;q<8;q++)S=S&1?3988292384^S>>1&2147483647:S>>1&2147483647;h[V]=S}function M(V,S,q){let nt=-1;for(let ot=S;ot<q;ot++){const $=(nt^V[ot])&255,ct=h[$];nt=nt>>>8^ct}return nt^-1}function m(V,S,q,nt){let ot=nt;const $=S.length;q[ot]=$>>24&255,q[ot+1]=$>>16&255,q[ot+2]=$>>8&255,q[ot+3]=$&255,ot+=4,q[ot]=V.charCodeAt(0)&255,q[ot+1]=V.charCodeAt(1)&255,q[ot+2]=V.charCodeAt(2)&255,q[ot+3]=V.charCodeAt(3)&255,ot+=4,q.set(S,ot),ot+=S.length;const ct=M(q,nt+4,ot);q[ot]=ct>>24&255,q[ot+1]=ct>>16&255,q[ot+2]=ct>>8&255,q[ot+3]=ct&255}function l(V,S,q){let nt=1,ot=0;for(let $=S;$<q;++$)nt=(nt+(V[$]&255))%65521,ot=(ot+nt)%65521;return ot<<16|nt}function R(V){if(!u.isNodeJS)return p(V);try{const S=parseInt(process.versions.node)>=8?V:Buffer.from(V),q=require$$5.deflateSync(S,{level:9});return q instanceof Uint8Array?q:new Uint8Array(q)}catch(S){(0,u.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+S)}return p(V)}function p(V){let S=V.length;const q=65535,nt=Math.ceil(S/q),ot=new Uint8Array(2+S+nt*5+4);let $=0;ot[$++]=120,ot[$++]=156;let ct=0;for(;S>q;)ot[$++]=0,ot[$++]=255,ot[$++]=255,ot[$++]=0,ot[$++]=0,ot.set(V.subarray(ct,ct+q),$),$+=q,ct+=q,S-=q;ot[$++]=1,ot[$++]=S&255,ot[$++]=S>>8&255,ot[$++]=~S&65535&255,ot[$++]=(~S&65535)>>8&255,ot.set(V.subarray(ct),$),$+=V.length-ct;const mt=l(V,0,V.length);return ot[$++]=mt>>24&255,ot[$++]=mt>>16&255,ot[$++]=mt>>8&255,ot[$++]=mt&255,ot}function H(V,S,q,nt){const ot=V.width,$=V.height;let ct,mt,Et;const Tt=V.data;switch(S){case u.ImageKind.GRAYSCALE_1BPP:mt=0,ct=1,Et=ot+7>>3;break;case u.ImageKind.RGB_24BPP:mt=2,ct=8,Et=ot*3;break;case u.ImageKind.RGBA_32BPP:mt=6,ct=8,Et=ot*4;break;default:throw new Error("invalid format")}const C=new Uint8Array((1+Et)*$);let n=0,a=0;for(let j=0;j<$;++j)C[n++]=0,C.set(Tt.subarray(a,a+Et),n),a+=Et,n+=Et;if(S===u.ImageKind.GRAYSCALE_1BPP&&nt){n=0;for(let j=0;j<$;j++){n++;for(let st=0;st<Et;st++)C[n++]^=255}}const i=new Uint8Array([ot>>24&255,ot>>16&255,ot>>8&255,ot&255,$>>24&255,$>>16&255,$>>8&255,$&255,ct,mt,0,0,0]),c=R(C),d=y.length+o*3+i.length+c.length,E=new Uint8Array(d);let D=0;return E.set(y,D),D+=y.length,m("IHDR",i,E,D),D+=o+i.length,m("IDATA",c,E,D),D+=o+c.length,m("IEND",new Uint8Array(0),E,D),g(E,"image/png",q)}return function(S,q,nt){const ot=S.kind===void 0?u.ImageKind.GRAYSCALE_1BPP:S.kind;return H(S,ot,q,nt)}}();class I{constructor(){this.fontSizeScale=1,this.fontWeight=G.fontWeight,this.fontSize=0,this.textMatrix=u.IDENTITY_MATRIX,this.fontMatrix=u.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=u.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=G.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,h){this.x=o,this.y=h}}function x(y){let o=[];const h=[];for(const M of y){if(M.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),h.push(o),o=o.at(-1).items;continue}M.fn==="restore"?o=h.pop():o.push(M)}return o}function v(y){if(Number.isInteger(y))return y.toString();const o=y.toFixed(10);let h=o.length-1;if(o[h]!=="0")return o;do h--;while(o[h]==="0");return o.substring(0,o[h]==="."?h:h+1)}function A(y){if(y[4]===0&&y[5]===0){if(y[1]===0&&y[2]===0)return y[0]===1&&y[3]===1?"":"scale(".concat(v(y[0])," ").concat(v(y[3]),")");if(y[0]===y[3]&&y[1]===-y[2]){const o=Math.acos(y[0])*180/Math.PI;return"rotate(".concat(v(o),")")}}else if(y[0]===1&&y[1]===0&&y[2]===0&&y[3]===1)return"translate(".concat(v(y[4])," ").concat(v(y[5]),")");return"matrix(".concat(v(y[0])," ").concat(v(y[1])," ").concat(v(y[2])," ").concat(v(y[3])," ").concat(v(y[4])," ")+"".concat(v(y[5]),")")}let f=0,_=0,P=0;class T{constructor(o,h,M=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new I,this.transformMatrix=u.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=h,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!M,this._operatorIdMapping=[];for(const m in u.OPS)this._operatorIdMapping[u.OPS[m]]=m}getObject(o,h=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):h}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const h=o.fnArray,M=o.argsArray;for(let m=0,l=h.length;m<l;m++)if(h[m]===u.OPS.dependency)for(const R of M[m]){const p=R.startsWith("g_")?this.commonObjs:this.objs,H=new Promise(V=>{p.get(R,V)});this.current.dependencies.push(H)}return Promise.all(this.current.dependencies)}transform(o,h,M,m,l,R){const p=[o,h,M,m,l,R];this.transformMatrix=u.Util.transform(this.transformMatrix,p),this.tgrp=null}getSVG(o,h){this.viewport=h;const M=this._initialize(h);return this.loadDependencies(o).then(()=>(this.transformMatrix=u.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),M))}convertOpList(o){const h=this._operatorIdMapping,M=o.argsArray,m=o.fnArray,l=[];for(let R=0,p=m.length;R<p;R++){const H=m[R];l.push({fnId:H,fn:h[H],args:M[R]})}return x(l)}executeOpTree(o){for(const h of o){const M=h.fn,m=h.fnId,l=h.args;switch(m|0){case u.OPS.beginText:this.beginText();break;case u.OPS.dependency:break;case u.OPS.setLeading:this.setLeading(l);break;case u.OPS.setLeadingMoveText:this.setLeadingMoveText(l[0],l[1]);break;case u.OPS.setFont:this.setFont(l);break;case u.OPS.showText:this.showText(l[0]);break;case u.OPS.showSpacedText:this.showText(l[0]);break;case u.OPS.endText:this.endText();break;case u.OPS.moveText:this.moveText(l[0],l[1]);break;case u.OPS.setCharSpacing:this.setCharSpacing(l[0]);break;case u.OPS.setWordSpacing:this.setWordSpacing(l[0]);break;case u.OPS.setHScale:this.setHScale(l[0]);break;case u.OPS.setTextMatrix:this.setTextMatrix(l[0],l[1],l[2],l[3],l[4],l[5]);break;case u.OPS.setTextRise:this.setTextRise(l[0]);break;case u.OPS.setTextRenderingMode:this.setTextRenderingMode(l[0]);break;case u.OPS.setLineWidth:this.setLineWidth(l[0]);break;case u.OPS.setLineJoin:this.setLineJoin(l[0]);break;case u.OPS.setLineCap:this.setLineCap(l[0]);break;case u.OPS.setMiterLimit:this.setMiterLimit(l[0]);break;case u.OPS.setFillRGBColor:this.setFillRGBColor(l[0],l[1],l[2]);break;case u.OPS.setStrokeRGBColor:this.setStrokeRGBColor(l[0],l[1],l[2]);break;case u.OPS.setStrokeColorN:this.setStrokeColorN(l);break;case u.OPS.setFillColorN:this.setFillColorN(l);break;case u.OPS.shadingFill:this.shadingFill(l[0]);break;case u.OPS.setDash:this.setDash(l[0],l[1]);break;case u.OPS.setRenderingIntent:this.setRenderingIntent(l[0]);break;case u.OPS.setFlatness:this.setFlatness(l[0]);break;case u.OPS.setGState:this.setGState(l[0]);break;case u.OPS.fill:this.fill();break;case u.OPS.eoFill:this.eoFill();break;case u.OPS.stroke:this.stroke();break;case u.OPS.fillStroke:this.fillStroke();break;case u.OPS.eoFillStroke:this.eoFillStroke();break;case u.OPS.clip:this.clip("nonzero");break;case u.OPS.eoClip:this.clip("evenodd");break;case u.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case u.OPS.paintImageXObject:this.paintImageXObject(l[0]);break;case u.OPS.paintInlineImageXObject:this.paintInlineImageXObject(l[0]);break;case u.OPS.paintImageMaskXObject:this.paintImageMaskXObject(l[0]);break;case u.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(l[0],l[1]);break;case u.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case u.OPS.closePath:this.closePath();break;case u.OPS.closeStroke:this.closeStroke();break;case u.OPS.closeFillStroke:this.closeFillStroke();break;case u.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case u.OPS.nextLine:this.nextLine();break;case u.OPS.transform:this.transform(l[0],l[1],l[2],l[3],l[4],l[5]);break;case u.OPS.constructPath:this.constructPath(l[0],l[1]);break;case u.OPS.endPath:this.endPath();break;case 92:this.group(h.items);break;default:(0,u.warn)("Unimplemented operator ".concat(M));break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,h,M,m,l,R){const p=this.current;p.textMatrix=p.lineMatrix=[o,h,M,m,l,R],p.textMatrixScale=Math.hypot(o,h),p.x=p.lineX=0,p.y=p.lineY=0,p.xcoords=[],p.ycoords=[],p.tspan=this.svgFactory.createElement("svg:tspan"),p.tspan.setAttributeNS(null,"font-family",p.fontFamily),p.tspan.setAttributeNS(null,"font-size","".concat(v(p.fontSize),"px")),p.tspan.setAttributeNS(null,"y",v(-p.y)),p.txtElement=this.svgFactory.createElement("svg:text"),p.txtElement.append(p.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=u.IDENTITY_MATRIX,o.lineMatrix=u.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,h){const M=this.current;M.x=M.lineX+=o,M.y=M.lineY+=h,M.xcoords=[],M.ycoords=[],M.tspan=this.svgFactory.createElement("svg:tspan"),M.tspan.setAttributeNS(null,"font-family",M.fontFamily),M.tspan.setAttributeNS(null,"font-size","".concat(v(M.fontSize),"px")),M.tspan.setAttributeNS(null,"y",v(-M.y))}showText(o){const h=this.current,M=h.font,m=h.fontSize;if(m===0)return;const l=h.fontSizeScale,R=h.charSpacing,p=h.wordSpacing,H=h.fontDirection,V=h.textHScale*H,S=M.vertical,q=S?1:-1,nt=M.defaultVMetrics,ot=m*h.fontMatrix[0];let $=0;for(const Et of o){if(Et===null){$+=H*p;continue}else if(typeof Et=="number"){$+=q*Et*m/1e3;continue}const Tt=(Et.isSpace?p:0)+R,C=Et.fontChar;let n,a,i=Et.width;if(S){let d;const E=Et.vmetric||nt;d=Et.vmetric?E[1]:i*.5,d=-d*ot;const D=E[2]*ot;i=E?-E[0]:i,n=d/l,a=($+D)/l}else n=$/l,a=0;(Et.isInFont||M.missingFile)&&(h.xcoords.push(h.x+n),S&&h.ycoords.push(-h.y+a),h.tspan.textContent+=C);const c=S?i*ot-Tt*H:i*ot+Tt*H;$+=c}h.tspan.setAttributeNS(null,"x",h.xcoords.map(v).join(" ")),S?h.tspan.setAttributeNS(null,"y",h.ycoords.map(v).join(" ")):h.tspan.setAttributeNS(null,"y",v(-h.y)),S?h.y-=$:h.x+=$*V,h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size","".concat(v(h.fontSize),"px")),h.fontStyle!==G.fontStyle&&h.tspan.setAttributeNS(null,"font-style",h.fontStyle),h.fontWeight!==G.fontWeight&&h.tspan.setAttributeNS(null,"font-weight",h.fontWeight);const ct=h.textRenderingMode&u.TextRenderingMode.FILL_STROKE_MASK;if(ct===u.TextRenderingMode.FILL||ct===u.TextRenderingMode.FILL_STROKE?(h.fillColor!==G.fillColor&&h.tspan.setAttributeNS(null,"fill",h.fillColor),h.fillAlpha<1&&h.tspan.setAttributeNS(null,"fill-opacity",h.fillAlpha)):h.textRenderingMode===u.TextRenderingMode.ADD_TO_PATH?h.tspan.setAttributeNS(null,"fill","transparent"):h.tspan.setAttributeNS(null,"fill","none"),ct===u.TextRenderingMode.STROKE||ct===u.TextRenderingMode.FILL_STROKE){const Et=1/(h.textMatrixScale||1);this._setStrokeAttributes(h.tspan,Et)}let mt=h.textMatrix;h.textRise!==0&&(mt=mt.slice(),mt[5]+=h.textRise),h.txtElement.setAttributeNS(null,"transform","".concat(A(mt)," scale(").concat(v(V),", -1)")),h.txtElement.setAttributeNS(W,"xml:space","preserve"),h.txtElement.append(h.tspan),h.txtgrp.append(h.txtElement),this._ensureTransformGroup().append(h.txtElement)}setLeadingMoveText(o,h){this.setLeading(-h),this.moveText(o,h)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const h=g(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(o.loadedName,'";')+" src: url(".concat(h,"); }\n")}setFont(o){const h=this.current,M=this.commonObjs.get(o[0]);let m=o[1];h.font=M,this.embedFonts&&!M.missingFile&&!this.embeddedFonts[M.loadedName]&&(this.addFontStyle(M),this.embeddedFonts[M.loadedName]=M),h.fontMatrix=M.fontMatrix||u.FONT_IDENTITY_MATRIX;let l="normal";M.black?l="900":M.bold&&(l="bold");const R=M.italic?"italic":"normal";m<0?(m=-m,h.fontDirection=-1):h.fontDirection=1,h.fontSize=m,h.fontFamily=M.loadedName,h.fontWeight=l,h.fontStyle=R,h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"y",v(-h.y)),h.xcoords=[],h.ycoords=[]}endText(){var h;const o=this.current;o.textRenderingMode&u.TextRenderingMode.ADD_TO_PATH_FLAG&&((h=o.txtElement)!=null&&h.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=F[o]}setLineJoin(o){this.current.lineJoin=w[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,h,M){this.current.strokeColor=u.Util.makeHexColor(o,h,M)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,h,M){this.current.fillColor=u.Util.makeHexColor(o,h,M),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const{width:h,height:M}=this.viewport,m=u.Util.inverseTransform(this.transformMatrix),[l,R,p,H]=u.Util.getAxialAlignedBoundingBox([0,0,h,M],m),V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x",l),V.setAttributeNS(null,"y",R),V.setAttributeNS(null,"width",p-l),V.setAttributeNS(null,"height",H-R),V.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&V.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(V)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const h=o[1],M=o[2],m=o[3]||u.IDENTITY_MATRIX,[l,R,p,H]=o[4],V=o[5],S=o[6],q=o[7],nt="shading".concat(P++),[ot,$,ct,mt]=u.Util.normalizeRect([...u.Util.applyTransform([l,R],m),...u.Util.applyTransform([p,H],m)]),[Et,Tt]=u.Util.singularValueDecompose2dScale(m),C=V*Et,n=S*Tt,a=this.svgFactory.createElement("svg:pattern");a.setAttributeNS(null,"id",nt),a.setAttributeNS(null,"patternUnits","userSpaceOnUse"),a.setAttributeNS(null,"width",C),a.setAttributeNS(null,"height",n),a.setAttributeNS(null,"x","".concat(ot)),a.setAttributeNS(null,"y","".concat($));const i=this.svg,c=this.transformMatrix,d=this.current.fillColor,E=this.current.strokeColor,D=this.svgFactory.create(ct-ot,mt-$);if(this.svg=D,this.transformMatrix=m,q===2){const j=u.Util.makeHexColor(...h);this.current.fillColor=j,this.current.strokeColor=j}return this.executeOpTree(this.convertOpList(M)),this.svg=i,this.transformMatrix=c,this.current.fillColor=d,this.current.strokeColor=E,a.append(D.childNodes[0]),this.defs.append(a),"url(#".concat(nt,")")}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const h="shading".concat(P++),M=o[3];let m;switch(o[1]){case"axial":const l=o[4],R=o[5];m=this.svgFactory.createElement("svg:linearGradient"),m.setAttributeNS(null,"id",h),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"x1",l[0]),m.setAttributeNS(null,"y1",l[1]),m.setAttributeNS(null,"x2",R[0]),m.setAttributeNS(null,"y2",R[1]);break;case"radial":const p=o[4],H=o[5],V=o[6],S=o[7];m=this.svgFactory.createElement("svg:radialGradient"),m.setAttributeNS(null,"id",h),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"cx",H[0]),m.setAttributeNS(null,"cy",H[1]),m.setAttributeNS(null,"r",S),m.setAttributeNS(null,"fx",p[0]),m.setAttributeNS(null,"fy",p[1]),m.setAttributeNS(null,"fr",V);break;default:throw new Error("Unknown RadialAxial type: ".concat(o[1]))}for(const l of M){const R=this.svgFactory.createElement("svg:stop");R.setAttributeNS(null,"offset",l[0]),R.setAttributeNS(null,"stop-color",l[1]),m.append(R)}return this.defs.append(m),"url(#".concat(h,")");case"Mesh":return(0,u.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(o[0]))}}setDash(o,h){this.current.dashArray=o,this.current.dashPhase=h}constructPath(o,h){const M=this.current;let m=M.x,l=M.y,R=[],p=0;for(const H of o)switch(H|0){case u.OPS.rectangle:m=h[p++],l=h[p++];const V=h[p++],S=h[p++],q=m+V,nt=l+S;R.push("M",v(m),v(l),"L",v(q),v(l),"L",v(q),v(nt),"L",v(m),v(nt),"Z");break;case u.OPS.moveTo:m=h[p++],l=h[p++],R.push("M",v(m),v(l));break;case u.OPS.lineTo:m=h[p++],l=h[p++],R.push("L",v(m),v(l));break;case u.OPS.curveTo:m=h[p+4],l=h[p+5],R.push("C",v(h[p]),v(h[p+1]),v(h[p+2]),v(h[p+3]),v(m),v(l)),p+=6;break;case u.OPS.curveTo2:R.push("C",v(m),v(l),v(h[p]),v(h[p+1]),v(h[p+2]),v(h[p+3])),m=h[p+2],l=h[p+3],p+=4;break;case u.OPS.curveTo3:m=h[p+2],l=h[p+3],R.push("C",v(h[p]),v(h[p+1]),v(m),v(l),v(m),v(l)),p+=4;break;case u.OPS.closePath:R.push("Z");break}R=R.join(" "),M.path&&o.length>0&&o[0]!==u.OPS.rectangle&&o[0]!==u.OPS.moveTo?R=M.path.getAttributeNS(null,"d")+R:(M.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(M.path)),M.path.setAttributeNS(null,"d",R),M.path.setAttributeNS(null,"fill","none"),M.element=M.path,M.setCurrentPoint(m,l)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const h="clippath".concat(f++),M=this.svgFactory.createElement("svg:clipPath");M.setAttributeNS(null,"id",h),M.setAttributeNS(null,"transform",A(this.transformMatrix));const m=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?m.setAttributeNS(null,"clip-rule","evenodd"):m.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,M.append(m),this.defs.append(M),o.activeClipUrl){o.clipGroup=null;for(const l of this.extraStack)l.clipGroup=null;M.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl="url(#".concat(h,")"),this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const h="".concat(o.path.getAttributeNS(null,"d"),"Z");o.path.setAttributeNS(null,"d",h)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[h,M]of o)switch(h){case"LW":this.setLineWidth(M);break;case"LC":this.setLineCap(M);break;case"LJ":this.setLineJoin(M);break;case"ML":this.setMiterLimit(M);break;case"D":this.setDash(M[0],M[1]);break;case"RI":this.setRenderingIntent(M);break;case"FL":this.setFlatness(M);break;case"Font":this.setFont(M);break;case"CA":this.setStrokeAlpha(M);break;case"ca":this.setFillAlpha(M);break;default:(0,u.warn)("Unimplemented graphic state operator ".concat(h));break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,h=1){const M=this.current;let m=M.dashArray;h!==1&&m.length>0&&(m=m.map(function(l){return h*l})),o.setAttributeNS(null,"stroke",M.strokeColor),o.setAttributeNS(null,"stroke-opacity",M.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",v(M.miterLimit)),o.setAttributeNS(null,"stroke-linecap",M.lineCap),o.setAttributeNS(null,"stroke-linejoin",M.lineJoin),o.setAttributeNS(null,"stroke-width",v(h*M.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",m.map(v).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",v(h*M.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const h=this.getObject(o);if(!h){(0,u.warn)("Dependent image with object ID ".concat(o," is not ready yet"));return}this.paintInlineImageXObject(h)}paintInlineImageXObject(o,h){const M=o.width,m=o.height,l=O(o,this.forceDataSchema,!!h),R=this.svgFactory.createElement("svg:rect");R.setAttributeNS(null,"x","0"),R.setAttributeNS(null,"y","0"),R.setAttributeNS(null,"width",v(M)),R.setAttributeNS(null,"height",v(m)),this.current.element=R,this.clip("nonzero");const p=this.svgFactory.createElement("svg:image");p.setAttributeNS(ut,"xlink:href",l),p.setAttributeNS(null,"x","0"),p.setAttributeNS(null,"y",v(-m)),p.setAttributeNS(null,"width",v(M)+"px"),p.setAttributeNS(null,"height",v(m)+"px"),p.setAttributeNS(null,"transform","scale(".concat(v(1/M)," ").concat(v(-1/m),")")),h?h.append(p):this._ensureTransformGroup().append(p)}paintImageMaskXObject(o){const h=this.getObject(o.data,o);if(h.bitmap){(0,u.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const M=this.current,m=h.width,l=h.height,R=M.fillColor;M.maskId="mask".concat(_++);const p=this.svgFactory.createElement("svg:mask");p.setAttributeNS(null,"id",M.maskId);const H=this.svgFactory.createElement("svg:rect");H.setAttributeNS(null,"x","0"),H.setAttributeNS(null,"y","0"),H.setAttributeNS(null,"width",v(m)),H.setAttributeNS(null,"height",v(l)),H.setAttributeNS(null,"fill",R),H.setAttributeNS(null,"mask","url(#".concat(M.maskId,")")),this.defs.append(p),this._ensureTransformGroup().append(H),this.paintInlineImageXObject(h,p)}paintFormXObjectBegin(o,h){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),h){const M=h[2]-h[0],m=h[3]-h[1],l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x",h[0]),l.setAttributeNS(null,"y",h[1]),l.setAttributeNS(null,"width",v(M)),l.setAttributeNS(null,"height",v(m)),this.current.element=l,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const h=this.svgFactory.create(o.width,o.height),M=this.svgFactory.createElement("svg:defs");h.append(M),this.defs=M;const m=this.svgFactory.createElement("svg:g");return m.setAttributeNS(null,"transform",A(o.transform)),h.append(m),this.svg=m,h}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",A(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}s.SVGGraphics=T},(k,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class L{static textContent(u){const G=[],W={items:G,styles:Object.create(null)};function ut(F){var O;if(!F)return;let w=null;const g=F.name;if(g==="#text")w=F.value;else if(L.shouldBuildText(g))(O=F==null?void 0:F.attributes)!=null&&O.textContent?w=F.attributes.textContent:F.value&&(w=F.value);else return;if(w!==null&&G.push({str:w}),!!F.children)for(const I of F.children)ut(I)}return ut(u),W}static shouldBuildText(u){return!(u==="textarea"||u==="input"||u==="option"||u==="select")}}s.XfaText=L},(k,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=A,s.updateTextLayer=f;var r=L(1),u=L(6);const G=1e5,W=30,ut=.8,F=new Map;function w(_,P){let T;if(P&&r.FeatureTest.isOffscreenCanvasSupported)T=new OffscreenCanvas(_,_).getContext("2d",{alpha:!1});else{const y=document.createElement("canvas");y.width=y.height=_,T=y.getContext("2d",{alpha:!1})}return T}function g(_,P){const T=F.get(_);if(T)return T;const y=w(W,P);y.font="".concat(W,"px ").concat(_);const o=y.measureText("");let h=o.fontBoundingBoxAscent,M=Math.abs(o.fontBoundingBoxDescent);if(h){const l=h/(h+M);return F.set(_,l),y.canvas.width=y.canvas.height=0,l}y.strokeStyle="red",y.clearRect(0,0,W,W),y.strokeText("g",0,0);let m=y.getImageData(0,0,W,W).data;M=0;for(let l=m.length-1-3;l>=0;l-=4)if(m[l]>0){M=Math.ceil(l/4/W);break}y.clearRect(0,0,W,W),y.strokeText("A",0,W),m=y.getImageData(0,0,W,W).data,h=0;for(let l=0,R=m.length;l<R;l+=4)if(m[l]>0){h=W-Math.floor(l/4/W);break}if(y.canvas.width=y.canvas.height=0,h){const l=h/(h+M);return F.set(_,l),l}return F.set(_,ut),ut}function O(_,P,T){const y=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:P.str!=="",hasEOL:P.hasEOL,fontSize:0};_._textDivs.push(y);const h=r.Util.transform(_._transform,P.transform);let M=Math.atan2(h[1],h[0]);const m=T[P.fontName];m.vertical&&(M+=Math.PI/2);const l=Math.hypot(h[2],h[3]),R=l*g(m.fontFamily,_._isOffscreenCanvasSupported);let p,H;M===0?(p=h[4],H=h[5]-R):(p=h[4]+R*Math.sin(M),H=h[5]-R*Math.cos(M));const V="calc(var(--scale-factor)*",S=y.style;_._container===_._rootContainer?(S.left="".concat((100*p/_._pageWidth).toFixed(2),"%"),S.top="".concat((100*H/_._pageHeight).toFixed(2),"%")):(S.left="".concat(V).concat(p.toFixed(2),"px)"),S.top="".concat(V).concat(H.toFixed(2),"px)")),S.fontSize="".concat(V).concat(l.toFixed(2),"px)"),S.fontFamily=m.fontFamily,o.fontSize=l,y.setAttribute("role","presentation"),y.textContent=P.str,y.dir=P.dir,_._fontInspectorEnabled&&(y.dataset.fontName=P.fontName),M!==0&&(o.angle=M*(180/Math.PI));let q=!1;if(P.str.length>1)q=!0;else if(P.str!==" "&&P.transform[0]!==P.transform[3]){const nt=Math.abs(P.transform[0]),ot=Math.abs(P.transform[3]);nt!==ot&&Math.max(nt,ot)/Math.min(nt,ot)>1.5&&(q=!0)}q&&(o.canvasWidth=m.vertical?P.height:P.width),_._textDivProperties.set(y,o),_._isReadableStream&&_._layoutText(y)}function I(_){const{div:P,scale:T,properties:y,ctx:o,prevFontSize:h,prevFontFamily:M}=_,{style:m}=P;let l="";if(y.canvasWidth!==0&&y.hasText){const{fontFamily:R}=m,{canvasWidth:p,fontSize:H}=y;(h!==H||M!==R)&&(o.font="".concat(H*T,"px ").concat(R),_.prevFontSize=H,_.prevFontFamily=R);const{width:V}=o.measureText(P.textContent);V>0&&(l="scaleX(".concat(p*T/V,")"))}y.angle!==0&&(l="rotate(".concat(y.angle,"deg) ").concat(l)),l.length>0&&(m.transform=l)}function x(_){if(_._canceled)return;const P=_._textDivs,T=_._capability;if(P.length>G){T.resolve();return}if(!_._isReadableStream)for(const o of P)_._layoutText(o);T.resolve()}class v{constructor({textContentSource:P,container:T,viewport:y,textDivs:o,textDivProperties:h,textContentItemsStr:M,isOffscreenCanvasSupported:m}){var V;this._textContentSource=P,this._isReadableStream=P instanceof ReadableStream,this._container=this._rootContainer=T,this._textDivs=o||[],this._textContentItemsStr=M||[],this._isOffscreenCanvasSupported=m,this._fontInspectorEnabled=!!((V=globalThis.FontInspector)!=null&&V.enabled),this._reader=null,this._textDivProperties=h||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:y.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:w(0,m)};const{pageWidth:l,pageHeight:R,pageX:p,pageY:H}=y.rawDims;this._transform=[1,0,0,-1,-p,H+R],this._pageWidth=l,this._pageHeight=R,(0,u.setLayerDimensions)(T,y),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(P,T){for(const y of P){if(y.str===void 0){if(y.type==="beginMarkedContentProps"||y.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),y.id!==null&&this._container.setAttribute("id","".concat(y.id)),o.append(this._container)}else y.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(y.str),O(this,y,T)}}_layoutText(P){const T=this._layoutTextParams.properties=this._textDivProperties.get(P);if(this._layoutTextParams.div=P,I(this._layoutTextParams),T.hasText&&this._container.append(P),T.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),this._container.append(y)}}_render(){const P=new r.PromiseCapability;let T=Object.create(null);if(this._isReadableStream){const y=()=>{this._reader.read().then(({value:o,done:h})=>{if(h){P.resolve();return}Object.assign(T,o.styles),this._processItems(o.items,T),y()},P.reject)};this._reader=this._textContentSource.getReader(),y()}else if(this._textContentSource){const{items:y,styles:o}=this._textContentSource;this._processItems(y,o),P.resolve()}else throw new Error('No "textContentSource" parameter specified.');P.promise.then(()=>{T=null,x(this)},this._capability.reject)}}s.TextLayerRenderTask=v;function A(_){!_.textContentSource&&(_.textContent||_.textContentStream)&&((0,u.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),_.textContentSource=_.textContent||_.textContentStream);const{container:P,viewport:T}=_,y=getComputedStyle(P),o=y.getPropertyValue("visibility"),h=parseFloat(y.getPropertyValue("--scale-factor"));o==="visible"&&(!h||Math.abs(h-T.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const M=new v(_);return M._render(),M}function f({container:_,viewport:P,textDivs:T,textDivProperties:y,isOffscreenCanvasSupported:o,mustRotate:h=!0,mustRescale:M=!0}){if(h&&(0,u.setLayerDimensions)(_,{rotation:P.rotation}),M){const m=w(0,o),R={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:m};for(const p of T)R.properties=y.get(p),R.div=p,I(R)}}},(k,s,L)=>{var g,O,I,x,v,A,f,_,P,T,y,en,h,Re,m,nn,R,sn;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var r=L(1),u=L(4),G=L(28),W=L(33),ut=L(6),F=L(34);const H=class H{constructor({uiManager:S,pageIndex:q,div:nt,accessibilityManager:ot,annotationLayer:$,viewport:ct,l10n:mt}){U(this,y);U(this,h);U(this,m);U(this,R);U(this,g,void 0);U(this,O,!1);U(this,I,null);U(this,x,this.pointerup.bind(this));U(this,v,this.pointerdown.bind(this));U(this,A,new Map);U(this,f,!1);U(this,_,!1);U(this,P,!1);U(this,T,void 0);const Et=[G.FreeTextEditor,W.InkEditor,F.StampEditor];if(!H._initialized){H._initialized=!0;for(const Tt of Et)Tt.initialize(mt)}S.registerEditorTypes(Et),it(this,T,S),this.pageIndex=q,this.div=nt,it(this,g,ot),it(this,I,$),this.viewport=ct,t(this,T).addLayer(this)}get isEmpty(){return t(this,A).size===0}updateToolbar(S){t(this,T).updateToolbar(S)}updateMode(S=t(this,T).getMode()){X(this,R,sn).call(this),S===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),S!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",S===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",S===r.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",S===r.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(S){if(!S&&t(this,T).getMode()!==r.AnnotationEditorType.INK)return;if(!S){for(const nt of t(this,A).values())if(nt.isEmpty()){nt.setInBackground();return}}X(this,h,Re).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(S){t(this,T).setEditingState(S)}addCommands(S){t(this,T).addCommands(S)}enable(){this.div.style.pointerEvents="auto";const S=new Set;for(const nt of t(this,A).values())nt.enableEditing(),nt.annotationElementId&&S.add(nt.annotationElementId);if(!t(this,I))return;const q=t(this,I).getEditableAnnotations();for(const nt of q){if(nt.hide(),t(this,T).isDeletedAnnotationElement(nt.data.id)||S.has(nt.data.id))continue;const ot=this.deserialize(nt);ot&&(this.addOrRebuild(ot),ot.enableEditing())}}disable(){var q;it(this,P,!0),this.div.style.pointerEvents="none";const S=new Set;for(const nt of t(this,A).values()){if(nt.disableEditing(),!nt.annotationElementId||nt.serialize()!==null){S.add(nt.annotationElementId);continue}(q=this.getEditableAnnotation(nt.annotationElementId))==null||q.show(),nt.remove()}if(t(this,I)){const nt=t(this,I).getEditableAnnotations();for(const ot of nt){const{id:$}=ot.data;S.has($)||t(this,T).isDeletedAnnotationElement($)||ot.show()}}X(this,R,sn).call(this),this.isEmpty&&(this.div.hidden=!0),it(this,P,!1)}getEditableAnnotation(S){var q;return((q=t(this,I))==null?void 0:q.getEditableAnnotation(S))||null}setActiveEditor(S){t(this,T).getActive()!==S&&t(this,T).setActiveEditor(S)}enableClick(){this.div.addEventListener("pointerdown",t(this,v)),this.div.addEventListener("pointerup",t(this,x))}disableClick(){this.div.removeEventListener("pointerdown",t(this,v)),this.div.removeEventListener("pointerup",t(this,x))}attach(S){t(this,A).set(S.id,S);const{annotationElementId:q}=S;q&&t(this,T).isDeletedAnnotationElement(q)&&t(this,T).removeDeletedAnnotationElement(S)}detach(S){var q;t(this,A).delete(S.id),(q=t(this,g))==null||q.removePointerInTextLayer(S.contentDiv),!t(this,P)&&S.annotationElementId&&t(this,T).addDeletedAnnotationElement(S)}remove(S){this.detach(S),t(this,T).removeEditor(S),S.div.contains(document.activeElement)&&setTimeout(()=>{t(this,T).focusMainContainer()},0),S.div.remove(),S.isAttachedToDOM=!1,t(this,_)||this.addInkEditorIfNeeded(!1)}changeParent(S){var q;S.parent!==this&&(S.annotationElementId&&(t(this,T).addDeletedAnnotationElement(S.annotationElementId),u.AnnotationEditor.deleteAnnotationElement(S),S.annotationElementId=null),this.attach(S),(q=S.parent)==null||q.detach(S),S.setParent(this),S.div&&S.isAttachedToDOM&&(S.div.remove(),this.div.append(S.div)))}add(S){if(this.changeParent(S),t(this,T).addEditor(S),this.attach(S),!S.isAttachedToDOM){const q=S.render();this.div.append(q),S.isAttachedToDOM=!0}S.fixAndSetPosition(),S.onceAdded(),t(this,T).addToAnnotationStorage(S)}moveEditorInDOM(S){var nt;if(!S.isAttachedToDOM)return;const{activeElement:q}=document;S.div.contains(q)&&(S._focusEventsAllowed=!1,setTimeout(()=>{S.div.contains(document.activeElement)?S._focusEventsAllowed=!0:(S.div.addEventListener("focusin",()=>{S._focusEventsAllowed=!0},{once:!0}),q.focus())},0)),S._structTreeParentId=(nt=t(this,g))==null?void 0:nt.moveElementInDOM(this.div,S.div,S.contentDiv,!0)}addOrRebuild(S){S.needsToBeRebuilt()?S.rebuild():this.add(S)}addUndoableEditor(S){const q=()=>S._uiManager.rebuild(S),nt=()=>{S.remove()};this.addCommands({cmd:q,undo:nt,mustExec:!1})}getNextId(){return t(this,T).getId()}pasteEditor(S,q){t(this,T).updateToolbar(S),t(this,T).updateMode(S);const{offsetX:nt,offsetY:ot}=X(this,m,nn).call(this),$=this.getNextId(),ct=X(this,y,en).call(this,{parent:this,id:$,x:nt,y:ot,uiManager:t(this,T),isCentered:!0,...q});ct&&this.add(ct)}deserialize(S){var q;switch((q=S.annotationType)!=null?q:S.annotationEditorType){case r.AnnotationEditorType.FREETEXT:return G.FreeTextEditor.deserialize(S,this,t(this,T));case r.AnnotationEditorType.INK:return W.InkEditor.deserialize(S,this,t(this,T));case r.AnnotationEditorType.STAMP:return F.StampEditor.deserialize(S,this,t(this,T))}return null}addNewEditor(){X(this,h,Re).call(this,X(this,m,nn).call(this),!0)}setSelected(S){t(this,T).setSelected(S)}toggleSelected(S){t(this,T).toggleSelected(S)}isSelected(S){return t(this,T).isSelected(S)}unselect(S){t(this,T).unselect(S)}pointerup(S){const{isMac:q}=r.FeatureTest.platform;if(!(S.button!==0||S.ctrlKey&&q)&&S.target===this.div&&t(this,f)){if(it(this,f,!1),!t(this,O)){it(this,O,!0);return}if(t(this,T).getMode()===r.AnnotationEditorType.STAMP){t(this,T).unselectAll();return}X(this,h,Re).call(this,S,!1)}}pointerdown(S){if(t(this,f)){it(this,f,!1);return}const{isMac:q}=r.FeatureTest.platform;if(S.button!==0||S.ctrlKey&&q||S.target!==this.div)return;it(this,f,!0);const nt=t(this,T).getActive();it(this,O,!nt||nt.isEmpty())}findNewParent(S,q,nt){const ot=t(this,T).findParent(q,nt);return ot===null||ot===this?!1:(ot.changeParent(S),!0)}destroy(){var S,q;((S=t(this,T).getActive())==null?void 0:S.parent)===this&&(t(this,T).commitOrRemove(),t(this,T).setActiveEditor(null));for(const nt of t(this,A).values())(q=t(this,g))==null||q.removePointerInTextLayer(nt.contentDiv),nt.setParent(null),nt.isAttachedToDOM=!1,nt.div.remove();this.div=null,t(this,A).clear(),t(this,T).removeLayer(this)}render({viewport:S}){this.viewport=S,(0,ut.setLayerDimensions)(this.div,S);for(const q of t(this,T).getEditors(this.pageIndex))this.add(q);this.updateMode()}update({viewport:S}){t(this,T).commitOrRemove(),this.viewport=S,(0,ut.setLayerDimensions)(this.div,{rotation:S.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:S,pageHeight:q}=this.viewport.rawDims;return[S,q]}};g=new WeakMap,O=new WeakMap,I=new WeakMap,x=new WeakMap,v=new WeakMap,A=new WeakMap,f=new WeakMap,_=new WeakMap,P=new WeakMap,T=new WeakMap,y=new WeakSet,en=function(S){switch(t(this,T).getMode()){case r.AnnotationEditorType.FREETEXT:return new G.FreeTextEditor(S);case r.AnnotationEditorType.INK:return new W.InkEditor(S);case r.AnnotationEditorType.STAMP:return new F.StampEditor(S)}return null},h=new WeakSet,Re=function(S,q){const nt=this.getNextId(),ot=X(this,y,en).call(this,{parent:this,id:nt,x:S.offsetX,y:S.offsetY,uiManager:t(this,T),isCentered:q});return ot&&this.add(ot),ot},m=new WeakSet,nn=function(){const{x:S,y:q,width:nt,height:ot}=this.div.getBoundingClientRect(),$=Math.max(0,S),ct=Math.max(0,q),mt=Math.min(window.innerWidth,S+nt),Et=Math.min(window.innerHeight,q+ot),Tt=($+mt)/2-S,C=(ct+Et)/2-q,[n,a]=this.viewport.rotation%180===0?[Tt,C]:[C,Tt];return{offsetX:n,offsetY:a}},R=new WeakSet,sn=function(){it(this,_,!0);for(const S of t(this,A).values())S.isEmpty()&&S.remove();it(this,_,!1)},ee(H,"_initialized",!1);let w=H;s.AnnotationEditorLayer=w},(k,s,L)=>{var F,w,g,O,I,x,v,A,f,_,Fn,T,Mn,o,Dn,M,Ae,l,rn,p,Ln,V,an;Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var r=L(1),u=L(5),G=L(4),W=L(29);const q=class q extends G.AnnotationEditor{constructor($){super({...$,name:"freeTextEditor"});U(this,_);U(this,T);U(this,o);U(this,M);U(this,l);U(this,p);U(this,V);U(this,F,this.editorDivBlur.bind(this));U(this,w,this.editorDivFocus.bind(this));U(this,g,this.editorDivInput.bind(this));U(this,O,this.editorDivKeydown.bind(this));U(this,I,void 0);U(this,x,"");U(this,v,"".concat(this.id,"-editor"));U(this,A,void 0);U(this,f,null);it(this,I,$.color||q._defaultColor||G.AnnotationEditor._defaultLineColor),it(this,A,$.fontSize||q._defaultFontSize)}static get _keyboardManager(){const $=q.prototype,ct=Tt=>Tt.isEmpty(),mt=u.AnnotationEditorUIManager.TRANSLATE_SMALL,Et=u.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new u.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],$.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],$.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],$._translateEmpty,{args:[-mt,0],checker:ct}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],$._translateEmpty,{args:[-Et,0],checker:ct}],[["ArrowRight","mac+ArrowRight"],$._translateEmpty,{args:[mt,0],checker:ct}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],$._translateEmpty,{args:[Et,0],checker:ct}],[["ArrowUp","mac+ArrowUp"],$._translateEmpty,{args:[0,-mt],checker:ct}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],$._translateEmpty,{args:[0,-Et],checker:ct}],[["ArrowDown","mac+ArrowDown"],$._translateEmpty,{args:[0,mt],checker:ct}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],$._translateEmpty,{args:[0,Et],checker:ct}]]))}static initialize($){G.AnnotationEditor.initialize($,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const ct=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ct.getPropertyValue("--freetext-padding"))}static updateDefaultParams($,ct){switch($){case r.AnnotationEditorParamsType.FREETEXT_SIZE:q._defaultFontSize=ct;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:q._defaultColor=ct;break}}updateParams($,ct){switch($){case r.AnnotationEditorParamsType.FREETEXT_SIZE:X(this,_,Fn).call(this,ct);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:X(this,T,Mn).call(this,ct);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,q._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,q._defaultColor||G.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,A)],[r.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,I)]]}_translateEmpty($,ct){this._uiManager.translateSelectedEditors($,ct,!0)}getInitialTranslation(){const $=this.parentScale;return[-q._internalPadding*$,-(q._internalPadding+t(this,A))*$]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,O)),this.editorDiv.addEventListener("focus",t(this,w)),this.editorDiv.addEventListener("blur",t(this,F)),this.editorDiv.addEventListener("input",t(this,g)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,v)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,O)),this.editorDiv.removeEventListener("focus",t(this,w)),this.editorDiv.removeEventListener("blur",t(this,F)),this.editorDiv.removeEventListener("input",t(this,g)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin($){this._focusEventsAllowed&&(super.focusin($),$.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var $;if(this.width){X(this,V,an).call(this);return}this.enableEditMode(),this.editorDiv.focus(),($=this._initialOptions)!=null&&$.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const $=t(this,x),ct=it(this,x,X(this,o,Dn).call(this).trimEnd());if($===ct)return;const mt=Et=>{if(it(this,x,Et),!Et){this.remove();return}X(this,l,rn).call(this),this._uiManager.rebuild(this),X(this,M,Ae).call(this)};this.addCommands({cmd:()=>{mt(ct)},undo:()=>{mt($)},mustExec:!1}),X(this,M,Ae).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick($){this.enterInEditMode()}keydown($){$.target===this.div&&$.key==="Enter"&&(this.enterInEditMode(),$.preventDefault())}editorDivKeydown($){q._keyboardManager.exec(this,$)}editorDivFocus($){this.isEditing=!0}editorDivBlur($){this.isEditing=!1}editorDivInput($){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let $,ct;this.width&&($=this.x,ct=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,v)),this.enableEditing(),G.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Et=>{var Tt;return(Tt=this.editorDiv)==null?void 0:Tt.setAttribute("aria-label",Et)}),G.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Et=>{var Tt;return(Tt=this.editorDiv)==null?void 0:Tt.setAttribute("default-content",Et)}),this.editorDiv.contentEditable=!0;const{style:mt}=this.editorDiv;if(mt.fontSize="calc(".concat(t(this,A),"px * var(--scale-factor))"),mt.color=t(this,I),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,u.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Et,Tt]=this.parentDimensions;if(this.annotationElementId){const{position:C}=t(this,f);let[n,a]=this.getInitialTranslation();[n,a]=this.pageTranslationToScreen(n,a);const[i,c]=this.pageDimensions,[d,E]=this.pageTranslation;let D,j;switch(this.rotation){case 0:D=$+(C[0]-d)/i,j=ct+this.height-(C[1]-E)/c;break;case 90:D=$+(C[0]-d)/i,j=ct-(C[1]-E)/c,[n,a]=[a,-n];break;case 180:D=$-this.width+(C[0]-d)/i,j=ct-(C[1]-E)/c,[n,a]=[-n,-a];break;case 270:D=$+(C[0]-d-this.height*c)/i,j=ct+(C[1]-E-this.width*i)/c,[n,a]=[-a,n];break}this.setAt(D*Et,j*Tt,n,a)}else this.setAt($*Et,ct*Tt,this.width*Et,this.height*Tt);X(this,l,rn).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize($,ct,mt){let Et=null;if($ instanceof W.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:C,fontColor:n},rect:a,rotation:i,id:c},textContent:d,textPosition:E,parent:{page:{pageNumber:D}}}=$;if(!d||d.length===0)return null;Et=$={annotationType:r.AnnotationEditorType.FREETEXT,color:Array.from(n),fontSize:C,value:d.join("\n"),position:E,pageIndex:D-1,rect:a,rotation:i,id:c,deleted:!1}}const Tt=super.deserialize($,ct,mt);return it(Tt,A,$.fontSize),it(Tt,I,r.Util.makeHexColor(...$.color)),it(Tt,x,$.value),Tt.annotationElementId=$.id||null,it(Tt,f,Et),Tt}serialize($=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const ct=q._internalPadding*this.parentScale,mt=this.getRect(ct,ct),Et=G.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,I)),Tt={annotationType:r.AnnotationEditorType.FREETEXT,color:Et,fontSize:t(this,A),value:t(this,x),pageIndex:this.pageIndex,rect:mt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return $?Tt:this.annotationElementId&&!X(this,p,Ln).call(this,Tt)?null:(Tt.id=this.annotationElementId,Tt)}};F=new WeakMap,w=new WeakMap,g=new WeakMap,O=new WeakMap,I=new WeakMap,x=new WeakMap,v=new WeakMap,A=new WeakMap,f=new WeakMap,_=new WeakSet,Fn=function($){const ct=Et=>{this.editorDiv.style.fontSize="calc(".concat(Et,"px * var(--scale-factor))"),this.translate(0,-(Et-t(this,A))*this.parentScale),it(this,A,Et),X(this,M,Ae).call(this)},mt=t(this,A);this.addCommands({cmd:()=>{ct($)},undo:()=>{ct(mt)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},T=new WeakSet,Mn=function($){const ct=t(this,I);this.addCommands({cmd:()=>{it(this,I,this.editorDiv.style.color=$)},undo:()=>{it(this,I,this.editorDiv.style.color=ct)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},o=new WeakSet,Dn=function(){const $=this.editorDiv.getElementsByTagName("div");if($.length===0)return this.editorDiv.innerText;const ct=[];for(const mt of $)ct.push(mt.innerText.replace(/\r\n?|\n/,""));return ct.join("\n")},M=new WeakSet,Ae=function(){const[$,ct]=this.parentDimensions;let mt;if(this.isAttachedToDOM)mt=this.div.getBoundingClientRect();else{const{currentLayer:Et,div:Tt}=this,C=Tt.style.display;Tt.style.display="hidden",Et.div.append(this.div),mt=Tt.getBoundingClientRect(),Tt.remove(),Tt.style.display=C}this.rotation%180===this.parentRotation%180?(this.width=mt.width/$,this.height=mt.height/ct):(this.width=mt.height/$,this.height=mt.width/ct),this.fixAndSetPosition()},l=new WeakSet,rn=function(){if(this.editorDiv.replaceChildren(),!!t(this,x))for(const $ of t(this,x).split("\n")){const ct=document.createElement("div");ct.append($?document.createTextNode($):document.createElement("br")),this.editorDiv.append(ct)}},p=new WeakSet,Ln=function($){const{value:ct,fontSize:mt,color:Et,rect:Tt,pageIndex:C}=t(this,f);return $.value!==ct||$.fontSize!==mt||$.rect.some((n,a)=>Math.abs(n-Tt[a])>=1)||$.color.some((n,a)=>n!==Et[a])||$.pageIndex!==C},V=new WeakSet,an=function($=!1){if(!this.annotationElementId)return;if(X(this,M,Ae).call(this),!$&&(this.width===0||this.height===0)){setTimeout(()=>X(this,V,an).call(this,!0),0);return}const ct=q._internalPadding*this.parentScale;t(this,f).rect=this.getRect(ct,ct)},ee(q,"_freeTextDefaultContent",""),ee(q,"_internalPadding",0),ee(q,"_defaultColor",null),ee(q,"_defaultFontSize",10),ee(q,"_type","freetext");let ut=q;s.FreeTextEditor=ut},(k,s,L)=>{var a,c,ce,E,On,j,st,Z,rt,dt,pt,lt,Ct,Ot,vt,Dt,gt,tt,et,ft,wt,Pt,Ht,In,jt,ke,Gt,on,Vt,ln,Q,Y,_t,At,te,Zt,J,cn,Lt,Rt,Nt,Bt,Nn,yt,hn;Object.defineProperty(s,"__esModule",{value:!0}),s.StampAnnotationElement=s.InkAnnotationElement=s.FreeTextAnnotationElement=s.AnnotationLayer=void 0;var r=L(1),u=L(6),G=L(3),W=L(30),ut=L(31),F=L(32);const w=1e3,g=9,O=new WeakSet;function I(It){return{width:It[2]-It[0],height:It[3]-It[1]}}class x{static create(N){switch(N.data.annotationType){case r.AnnotationType.LINK:return new A(N);case r.AnnotationType.TEXT:return new f(N);case r.AnnotationType.WIDGET:switch(N.data.fieldType){case"Tx":return new P(N);case"Btn":return N.data.radioButton?new o(N):N.data.checkBox?new y(N):new h(N);case"Ch":return new M(N);case"Sig":return new T(N)}return new _(N);case r.AnnotationType.POPUP:return new m(N);case r.AnnotationType.FREETEXT:return new R(N);case r.AnnotationType.LINE:return new p(N);case r.AnnotationType.SQUARE:return new H(N);case r.AnnotationType.CIRCLE:return new V(N);case r.AnnotationType.POLYLINE:return new S(N);case r.AnnotationType.CARET:return new nt(N);case r.AnnotationType.INK:return new ot(N);case r.AnnotationType.POLYGON:return new q(N);case r.AnnotationType.HIGHLIGHT:return new $(N);case r.AnnotationType.UNDERLINE:return new ct(N);case r.AnnotationType.SQUIGGLY:return new mt(N);case r.AnnotationType.STRIKEOUT:return new Et(N);case r.AnnotationType.STAMP:return new Tt(N);case r.AnnotationType.FILEATTACHMENT:return new C(N);default:return new v(N)}}}const i=class i{constructor(N,{isRenderable:e=!1,ignoreBorder:b=!1,createQuadrilaterals:B=!1}={}){U(this,a,!1);this.isRenderable=e,this.data=N.data,this.layer=N.layer,this.linkService=N.linkService,this.downloadManager=N.downloadManager,this.imageResourcesPath=N.imageResourcesPath,this.renderForms=N.renderForms,this.svgFactory=N.svgFactory,this.annotationStorage=N.annotationStorage,this.enableScripting=N.enableScripting,this.hasJSActions=N.hasJSActions,this._fieldObjects=N.fieldObjects,this.parent=N.parent,e&&(this.container=this._createContainer(b)),B&&this._createQuadrilaterals()}static _hasPopupData({titleObj:N,contentsObj:e,richText:b}){return!!(N!=null&&N.str||e!=null&&e.str||b!=null&&b.str)}get hasPopupData(){return i._hasPopupData(this.data)}_createContainer(N){const{data:e,parent:{page:b,viewport:B}}=this,z=document.createElement("section");z.setAttribute("data-annotation-id",e.id),this instanceof _||(z.tabIndex=w),z.style.zIndex=this.parent.zIndex++,this.data.popupRef&&z.setAttribute("aria-haspopup","dialog"),e.noRotate&&z.classList.add("norotate");const{pageWidth:K,pageHeight:at,pageX:bt,pageY:xt}=B.rawDims;if(!e.rect||this instanceof m){const{rotation:Ut}=e;return!e.hasOwnCanvas&&Ut!==0&&this.setRotation(Ut,z),z}const{width:kt,height:zt}=I(e.rect),Ft=r.Util.normalizeRect([e.rect[0],b.view[3]-e.rect[1]+b.view[1],e.rect[2],b.view[3]-e.rect[3]+b.view[1]]);if(!N&&e.borderStyle.width>0){z.style.borderWidth="".concat(e.borderStyle.width,"px");const Ut=e.borderStyle.horizontalCornerRadius,Xt=e.borderStyle.verticalCornerRadius;if(Ut>0||Xt>0){const Qt="calc(".concat(Ut,"px * var(--scale-factor)) / calc(").concat(Xt,"px * var(--scale-factor))");z.style.borderRadius=Qt}else if(this instanceof o){const Qt="calc(".concat(kt,"px * var(--scale-factor)) / calc(").concat(zt,"px * var(--scale-factor))");z.style.borderRadius=Qt}switch(e.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:z.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:z.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:z.style.borderBottomStyle="solid";break}const Kt=e.borderColor||null;Kt?(it(this,a,!0),z.style.borderColor=r.Util.makeHexColor(Kt[0]|0,Kt[1]|0,Kt[2]|0)):z.style.borderWidth=0}z.style.left="".concat(100*(Ft[0]-bt)/K,"%"),z.style.top="".concat(100*(Ft[1]-xt)/at,"%");const{rotation:Mt}=e;return e.hasOwnCanvas||Mt===0?(z.style.width="".concat(100*kt/K,"%"),z.style.height="".concat(100*zt/at,"%")):this.setRotation(Mt,z),z}setRotation(N,e=this.container){if(!this.data.rect)return;const{pageWidth:b,pageHeight:B}=this.parent.viewport.rawDims,{width:z,height:K}=I(this.data.rect);let at,bt;N%180===0?(at=100*z/b,bt=100*K/B):(at=100*K/b,bt=100*z/B),e.style.width="".concat(at,"%"),e.style.height="".concat(bt,"%"),e.setAttribute("data-main-rotation",(360-N)%360)}get _commonActions(){const N=(e,b,B)=>{const z=B.detail[e],K=z[0],at=z.slice(1);B.target.style[b]=W.ColorConverters["".concat(K,"_HTML")](at),this.annotationStorage.setValue(this.data.id,{[b]:W.ColorConverters["".concat(K,"_rgb")](at)})};return(0,r.shadow)(this,"_commonActions",{display:e=>{const{display:b}=e.detail,B=b%2===1;this.container.style.visibility=B?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:B,noPrint:b===1||b===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:b}=e.detail;this.container.style.visibility=b?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:b,noView:b})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{N("bgColor","backgroundColor",e)},fillColor:e=>{N("fillColor","backgroundColor",e)},fgColor:e=>{N("fgColor","color",e)},textColor:e=>{N("textColor","color",e)},borderColor:e=>{N("borderColor","borderColor",e)},strokeColor:e=>{N("strokeColor","borderColor",e)},rotation:e=>{const b=e.detail.rotation;this.setRotation(b),this.annotationStorage.setValue(this.data.id,{rotation:b})}})}_dispatchEventFromSandbox(N,e){const b=this._commonActions;for(const B of Object.keys(e.detail)){const z=N[B]||b[B];z==null||z(e)}}_setDefaultPropertiesFromJS(N){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const b=this._commonActions;for(const[B,z]of Object.entries(e)){const K=b[B];if(K){const at={detail:{[B]:z},target:N};K(at),delete e[B]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:N}=this.data;if(!N)return;const[e,b,B,z]=this.data.rect;if(N.length===1){const[,{x:Xt,y:Kt},{x:Qt,y:se}]=N[0];if(B===Xt&&z===Kt&&e===Qt&&b===se)return}const{style:K}=this.container;let at;if(t(this,a)){const{borderColor:Xt,borderWidth:Kt}=K;K.borderWidth=0,at=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(Xt,'" stroke-width="').concat(Kt,'">')],this.container.classList.add("hasBorder")}const bt=B-e,xt=z-b,{svgFactory:kt}=this,zt=kt.createElement("svg");zt.classList.add("quadrilateralsContainer"),zt.setAttribute("width",0),zt.setAttribute("height",0);const Ft=kt.createElement("defs");zt.append(Ft);const Mt=kt.createElement("clipPath"),Ut="clippath_".concat(this.data.id);Mt.setAttribute("id",Ut),Mt.setAttribute("clipPathUnits","objectBoundingBox"),Ft.append(Mt);for(const[,{x:Xt,y:Kt},{x:Qt,y:se}]of N){const ne=kt.createElement("rect"),ie=(Qt-e)/bt,oe=(z-Kt)/xt,le=(Xt-Qt)/bt,yn=(Kt-se)/xt;ne.setAttribute("x",ie),ne.setAttribute("y",oe),ne.setAttribute("width",le),ne.setAttribute("height",yn),Mt.append(ne),at==null||at.push('<rect vector-effect="non-scaling-stroke" x="'.concat(ie,'" y="').concat(oe,'" width="').concat(le,'" height="').concat(yn,'"/>'))}t(this,a)&&(at.push("</g></svg>')"),K.backgroundImage=at.join("")),this.container.append(zt),this.container.style.clipPath="url(#".concat(Ut,")")}_createPopup(){const{container:N,data:e}=this;N.setAttribute("aria-haspopup","dialog");const b=new m({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(b.render())}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(N,e=null){const b=[];if(this._fieldObjects){const B=this._fieldObjects[N];if(B)for(const{page:z,id:K,exportValues:at}of B){if(z===-1||K===e)continue;const bt=typeof at=="string"?at:null,xt=document.querySelector('[data-element-id="'.concat(K,'"]'));if(xt&&!O.has(xt)){(0,r.warn)("_getElementsByName - element not allowed: ".concat(K));continue}b.push({id:K,exportValue:bt,domElement:xt})}return b}for(const B of document.getElementsByName(N)){const{exportValue:z}=B,K=B.getAttribute("data-element-id");K!==e&&O.has(B)&&b.push({id:K,exportValue:z,domElement:B})}return b}show(){var N;this.container&&(this.container.hidden=!1),(N=this.popup)==null||N.maybeShow()}hide(){var N;this.container&&(this.container.hidden=!0),(N=this.popup)==null||N.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const N=this.getElementsToTriggerPopup();if(Array.isArray(N))for(const e of N)e.classList.add("highlightArea");else N.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:N,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var b;(b=this.linkService.eventBus)==null||b.dispatch("switchannotationeditormode",{source:this,mode:N,editId:e})})}};a=new WeakMap;let v=i;class A extends v{constructor(e,b=null){super(e,{isRenderable:!0,ignoreBorder:!!(b!=null&&b.ignoreBorder),createQuadrilaterals:!0});U(this,c);U(this,E);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:b}=this,B=document.createElement("a");B.setAttribute("data-element-id",e.id);let z=!1;return e.url?(b.addLinkAttributes(B,e.url,e.newWindow),z=!0):e.action?(this._bindNamedAction(B,e.action),z=!0):e.attachment?(this._bindAttachment(B,e.attachment),z=!0):e.setOCGState?(X(this,E,On).call(this,B,e.setOCGState),z=!0):e.dest?(this._bindLink(B,e.dest),z=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(B,e),z=!0),e.resetForm?(this._bindResetFormAction(B,e.resetForm),z=!0):this.isTooltipOnly&&!z&&(this._bindLink(B,""),z=!0)),this.container.classList.add("linkAnnotation"),z&&this.container.append(B),this.container}_bindLink(e,b){e.href=this.linkService.getDestinationHash(b),e.onclick=()=>(b&&this.linkService.goToDestination(b),!1),(b||b==="")&&X(this,c,ce).call(this)}_bindNamedAction(e,b){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(b),!1),X(this,c,ce).call(this)}_bindAttachment(e,b){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>{var B;return(B=this.downloadManager)==null||B.openOrDownloadData(this.container,b.content,b.filename),!1},X(this,c,ce).call(this)}_bindJSAction(e,b){e.href=this.linkService.getAnchorUrl("");const B=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const z of Object.keys(b.actions)){const K=B.get(z);K&&(e[K]=()=>{var at;return(at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b.id,name:z}}),!1})}e.onclick||(e.onclick=()=>!1),X(this,c,ce).call(this)}_bindResetFormAction(e,b){const B=e.onclick;if(B||(e.href=this.linkService.getAnchorUrl("")),X(this,c,ce).call(this),!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),B||(e.onclick=()=>!1);return}e.onclick=()=>{var zt;B==null||B();const{fields:z,refs:K,include:at}=b,bt=[];if(z.length!==0||K.length!==0){const Ft=new Set(K);for(const Mt of z){const Ut=this._fieldObjects[Mt]||[];for(const{id:Xt}of Ut)Ft.add(Xt)}for(const Mt of Object.values(this._fieldObjects))for(const Ut of Mt)Ft.has(Ut.id)===at&&bt.push(Ut)}else for(const Ft of Object.values(this._fieldObjects))bt.push(...Ft);const xt=this.annotationStorage,kt=[];for(const Ft of bt){const{id:Mt}=Ft;switch(kt.push(Mt),Ft.type){case"text":{const Xt=Ft.defaultValue||"";xt.setValue(Mt,{value:Xt});break}case"checkbox":case"radiobutton":{const Xt=Ft.defaultValue===Ft.exportValues;xt.setValue(Mt,{value:Xt});break}case"combobox":case"listbox":{const Xt=Ft.defaultValue||"";xt.setValue(Mt,{value:Xt});break}default:continue}const Ut=document.querySelector('[data-element-id="'.concat(Mt,'"]'));if(Ut){if(!O.has(Ut)){(0,r.warn)("_bindResetFormAction - element not allowed: ".concat(Mt));continue}}else continue;Ut.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((zt=this.linkService.eventBus)==null||zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:kt,name:"ResetForm"}})),!1}}}c=new WeakSet,ce=function(){this.container.setAttribute("data-internal-link","")},E=new WeakSet,On=function(e,b){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(b),!1),X(this,c,ce).call(this)};class f extends v{constructor(N){super(N,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const N=document.createElement("img");return N.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",N.alt="[{{type}} Annotation]",N.dataset.l10nId="text_annotation_type",N.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(N),this.container}}class _ extends v{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(N){var e;this.data.hasOwnCanvas&&(((e=N.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(N.previousSibling.hidden=!0),N.hidden=!1)}_getKeyModifier(N){const{isWin:e,isMac:b}=r.FeatureTest.platform;return e&&N.ctrlKey||b&&N.metaKey}_setEventListener(N,e,b,B,z){b.includes("mouse")?N.addEventListener(b,K=>{var at;(at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:B,value:z(K),shift:K.shiftKey,modifier:this._getKeyModifier(K)}})}):N.addEventListener(b,K=>{var at;if(b==="blur"){if(!e.focused||!K.relatedTarget)return;e.focused=!1}else if(b==="focus"){if(e.focused)return;e.focused=!0}z&&((at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:B,value:z(K)}}))})}_setEventListeners(N,e,b,B){var z,K,at;for(const[bt,xt]of b)(xt==="Action"||(z=this.data.actions)!=null&&z[xt])&&((xt==="Focus"||xt==="Blur")&&(e||(e={focused:!1})),this._setEventListener(N,e,bt,xt,B),xt==="Focus"&&!((K=this.data.actions)!=null&&K.Blur)?this._setEventListener(N,e,"blur","Blur",null):xt==="Blur"&&!((at=this.data.actions)!=null&&at.Focus)&&this._setEventListener(N,e,"focus","Focus",null))}_setBackgroundColor(N){const e=this.data.backgroundColor||null;N.style.backgroundColor=e===null?"transparent":r.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(N){const e=["left","center","right"],{fontColor:b}=this.data.defaultAppearanceData,B=this.data.defaultAppearanceData.fontSize||g,z=N.style;let K;const at=2,bt=xt=>Math.round(10*xt)/10;if(this.data.multiLine){const xt=Math.abs(this.data.rect[3]-this.data.rect[1]-at),kt=Math.round(xt/(r.LINE_FACTOR*B))||1,zt=xt/kt;K=Math.min(B,bt(zt/r.LINE_FACTOR))}else{const xt=Math.abs(this.data.rect[3]-this.data.rect[1]-at);K=Math.min(B,bt(xt/r.LINE_FACTOR))}z.fontSize="calc(".concat(K,"px * var(--scale-factor))"),z.color=r.Util.makeHexColor(b[0],b[1],b[2]),this.data.textAlignment!==null&&(z.textAlign=e[this.data.textAlignment])}_setRequired(N,e){e?N.setAttribute("required",!0):N.removeAttribute("required"),N.setAttribute("aria-required",e)}}class P extends _{constructor(N){const e=N.renderForms||!N.data.hasAppearance&&!!N.data.fieldValue;super(N,{isRenderable:e})}setPropertyOnSiblings(N,e,b,B){const z=this.annotationStorage;for(const K of this._getElementsByName(N.name,N.id))K.domElement&&(K.domElement[e]=b),z.setValue(K.id,{[B]:b})}render(){var B,z;const N=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let b=null;if(this.renderForms){const K=N.getValue(e,{value:this.data.fieldValue});let at=K.value||"";const bt=N.getValue(e,{charLimit:this.data.maxLen}).charLimit;bt&&at.length>bt&&(at=at.slice(0,bt));let xt=K.formattedValue||((B=this.data.textContent)==null?void 0:B.join("\n"))||null;xt&&this.data.comb&&(xt=xt.replaceAll(/\s+/g,""));const kt={userValue:at,formattedValue:xt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(b=document.createElement("textarea"),b.textContent=xt!=null?xt:at,this.data.doNotScroll&&(b.style.overflowY="hidden")):(b=document.createElement("input"),b.type="text",b.setAttribute("value",xt!=null?xt:at),this.data.doNotScroll&&(b.style.overflowX="hidden")),this.data.hasOwnCanvas&&(b.hidden=!0),O.add(b),b.setAttribute("data-element-id",e),b.disabled=this.data.readOnly,b.name=this.data.fieldName,b.tabIndex=w,this._setRequired(b,this.data.required),bt&&(b.maxLength=bt),b.addEventListener("input",Ft=>{N.setValue(e,{value:Ft.target.value}),this.setPropertyOnSiblings(b,"value",Ft.target.value,"value"),kt.formattedValue=null}),b.addEventListener("resetform",Ft=>{var Ut;const Mt=(Ut=this.data.defaultFieldValue)!=null?Ut:"";b.value=kt.userValue=Mt,kt.formattedValue=null});let zt=Ft=>{const{formattedValue:Mt}=kt;Mt!=null&&(Ft.target.value=Mt),Ft.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){b.addEventListener("focus",Mt=>{if(kt.focused)return;const{target:Ut}=Mt;kt.userValue&&(Ut.value=kt.userValue),kt.lastCommittedValue=Ut.value,kt.commitKey=1,kt.focused=!0}),b.addEventListener("updatefromsandbox",Mt=>{this.showElementAndHideCanvas(Mt.target);const Ut={value(Xt){var Kt;kt.userValue=(Kt=Xt.detail.value)!=null?Kt:"",N.setValue(e,{value:kt.userValue.toString()}),Xt.target.value=kt.userValue},formattedValue(Xt){const{formattedValue:Kt}=Xt.detail;kt.formattedValue=Kt,Kt!=null&&Xt.target!==document.activeElement&&(Xt.target.value=Kt),N.setValue(e,{formattedValue:Kt})},selRange(Xt){Xt.target.setSelectionRange(...Xt.detail.selRange)},charLimit:Xt=>{var ne;const{charLimit:Kt}=Xt.detail,{target:Qt}=Xt;if(Kt===0){Qt.removeAttribute("maxLength");return}Qt.setAttribute("maxLength",Kt);let se=kt.userValue;!se||se.length<=Kt||(se=se.slice(0,Kt),Qt.value=kt.userValue=se,N.setValue(e,{value:se}),(ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:se,willCommit:!0,commitKey:1,selStart:Qt.selectionStart,selEnd:Qt.selectionEnd}}))}};this._dispatchEventFromSandbox(Ut,Mt)}),b.addEventListener("keydown",Mt=>{var Kt;kt.commitKey=1;let Ut=-1;if(Mt.key==="Escape"?Ut=0:Mt.key==="Enter"&&!this.data.multiLine?Ut=2:Mt.key==="Tab"&&(kt.commitKey=3),Ut===-1)return;const{value:Xt}=Mt.target;kt.lastCommittedValue!==Xt&&(kt.lastCommittedValue=Xt,kt.userValue=Xt,(Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Xt,willCommit:!0,commitKey:Ut,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}}))});const Ft=zt;zt=null,b.addEventListener("blur",Mt=>{var Xt;if(!kt.focused||!Mt.relatedTarget)return;kt.focused=!1;const{value:Ut}=Mt.target;kt.userValue=Ut,kt.lastCommittedValue!==Ut&&((Xt=this.linkService.eventBus)==null||Xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Ut,willCommit:!0,commitKey:kt.commitKey,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}})),Ft(Mt)}),(z=this.data.actions)!=null&&z.Keystroke&&b.addEventListener("beforeinput",Mt=>{var oe;kt.lastCommittedValue=null;const{data:Ut,target:Xt}=Mt,{value:Kt,selectionStart:Qt,selectionEnd:se}=Xt;let ne=Qt,ie=se;switch(Mt.inputType){case"deleteWordBackward":{const le=Kt.substring(0,Qt).match(/\w*[^\w]*$/);le&&(ne-=le[0].length);break}case"deleteWordForward":{const le=Kt.substring(Qt).match(/^[^\w]*\w*/);le&&(ie+=le[0].length);break}case"deleteContentBackward":Qt===se&&(ne-=1);break;case"deleteContentForward":Qt===se&&(ie+=1);break}Mt.preventDefault(),(oe=this.linkService.eventBus)==null||oe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Kt,change:Ut||"",willCommit:!1,selStart:ne,selEnd:ie}})}),this._setEventListeners(b,kt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Mt=>Mt.target.value)}if(zt&&b.addEventListener("blur",zt),this.data.comb){const Mt=(this.data.rect[2]-this.data.rect[0])/bt;b.classList.add("comb"),b.style.letterSpacing="calc(".concat(Mt,"px * var(--scale-factor) - 1ch)")}}else b=document.createElement("div"),b.textContent=this.data.fieldValue,b.style.verticalAlign="middle",b.style.display="table-cell";return this._setTextStyle(b),this._setBackgroundColor(b),this._setDefaultPropertiesFromJS(b),this.container.append(b),this.container}}class T extends _{constructor(N){super(N,{isRenderable:!!N.data.hasOwnCanvas})}}class y extends _{constructor(N){super(N,{isRenderable:N.renderForms})}render(){const N=this.annotationStorage,e=this.data,b=e.id;let B=N.getValue(b,{value:e.exportValue===e.fieldValue}).value;typeof B=="string"&&(B=B!=="Off",N.setValue(b,{value:B})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const z=document.createElement("input");return O.add(z),z.setAttribute("data-element-id",b),z.disabled=e.readOnly,this._setRequired(z,this.data.required),z.type="checkbox",z.name=e.fieldName,B&&z.setAttribute("checked",!0),z.setAttribute("exportValue",e.exportValue),z.tabIndex=w,z.addEventListener("change",K=>{const{name:at,checked:bt}=K.target;for(const xt of this._getElementsByName(at,b)){const kt=bt&&xt.exportValue===e.exportValue;xt.domElement&&(xt.domElement.checked=kt),N.setValue(xt.id,{value:kt})}N.setValue(b,{value:bt})}),z.addEventListener("resetform",K=>{const at=e.defaultFieldValue||"Off";K.target.checked=at===e.exportValue}),this.enableScripting&&this.hasJSActions&&(z.addEventListener("updatefromsandbox",K=>{const at={value(bt){bt.target.checked=bt.detail.value!=="Off",N.setValue(b,{value:bt.target.checked})}};this._dispatchEventFromSandbox(at,K)}),this._setEventListeners(z,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],K=>K.target.checked)),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class o extends _{constructor(N){super(N,{isRenderable:N.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const N=this.annotationStorage,e=this.data,b=e.id;let B=N.getValue(b,{value:e.fieldValue===e.buttonValue}).value;typeof B=="string"&&(B=B!==e.buttonValue,N.setValue(b,{value:B}));const z=document.createElement("input");if(O.add(z),z.setAttribute("data-element-id",b),z.disabled=e.readOnly,this._setRequired(z,this.data.required),z.type="radio",z.name=e.fieldName,B&&z.setAttribute("checked",!0),z.tabIndex=w,z.addEventListener("change",K=>{const{name:at,checked:bt}=K.target;for(const xt of this._getElementsByName(at,b))N.setValue(xt.id,{value:!1});N.setValue(b,{value:bt})}),z.addEventListener("resetform",K=>{const at=e.defaultFieldValue;K.target.checked=at!=null&&at===e.buttonValue}),this.enableScripting&&this.hasJSActions){const K=e.buttonValue;z.addEventListener("updatefromsandbox",at=>{const bt={value:xt=>{const kt=K===xt.detail.value;for(const zt of this._getElementsByName(xt.target.name)){const Ft=kt&&zt.id===b;zt.domElement&&(zt.domElement.checked=Ft),N.setValue(zt.id,{value:Ft})}}};this._dispatchEventFromSandbox(bt,at)}),this._setEventListeners(z,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],at=>at.target.checked)}return this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class h extends A{constructor(N){super(N,{ignoreBorder:N.data.hasAppearance})}render(){const N=super.render();N.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(N.title=this.data.alternativeText);const e=N.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",b=>{this._dispatchEventFromSandbox({},b)})),N}}class M extends _{constructor(N){super(N,{isRenderable:N.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const N=this.annotationStorage,e=this.data.id,b=N.getValue(e,{value:this.data.fieldValue}),B=document.createElement("select");O.add(B),B.setAttribute("data-element-id",e),B.disabled=this.data.readOnly,this._setRequired(B,this.data.required),B.name=this.data.fieldName,B.tabIndex=w;let z=this.data.combo&&this.data.options.length>0;this.data.combo||(B.size=this.data.options.length,this.data.multiSelect&&(B.multiple=!0)),B.addEventListener("resetform",kt=>{const zt=this.data.defaultFieldValue;for(const Ft of B.options)Ft.selected=Ft.value===zt});for(const kt of this.data.options){const zt=document.createElement("option");zt.textContent=kt.displayValue,zt.value=kt.exportValue,b.value.includes(kt.exportValue)&&(zt.setAttribute("selected",!0),z=!1),B.append(zt)}let K=null;if(z){const kt=document.createElement("option");kt.value=" ",kt.setAttribute("hidden",!0),kt.setAttribute("selected",!0),B.prepend(kt),K=()=>{kt.remove(),B.removeEventListener("input",K),K=null},B.addEventListener("input",K)}const at=kt=>{const zt=kt?"value":"textContent",{options:Ft,multiple:Mt}=B;return Mt?Array.prototype.filter.call(Ft,Ut=>Ut.selected).map(Ut=>Ut[zt]):Ft.selectedIndex===-1?null:Ft[Ft.selectedIndex][zt]};let bt=at(!1);const xt=kt=>{const zt=kt.target.options;return Array.prototype.map.call(zt,Ft=>({displayValue:Ft.textContent,exportValue:Ft.value}))};return this.enableScripting&&this.hasJSActions?(B.addEventListener("updatefromsandbox",kt=>{const zt={value(Ft){K==null||K();const Mt=Ft.detail.value,Ut=new Set(Array.isArray(Mt)?Mt:[Mt]);for(const Xt of B.options)Xt.selected=Ut.has(Xt.value);N.setValue(e,{value:at(!0)}),bt=at(!1)},multipleSelection(Ft){B.multiple=!0},remove(Ft){const Mt=B.options,Ut=Ft.detail.remove;Mt[Ut].selected=!1,B.remove(Ut),Mt.length>0&&Array.prototype.findIndex.call(Mt,Kt=>Kt.selected)===-1&&(Mt[0].selected=!0),N.setValue(e,{value:at(!0),items:xt(Ft)}),bt=at(!1)},clear(Ft){for(;B.length!==0;)B.remove(0);N.setValue(e,{value:null,items:[]}),bt=at(!1)},insert(Ft){const{index:Mt,displayValue:Ut,exportValue:Xt}=Ft.detail.insert,Kt=B.children[Mt],Qt=document.createElement("option");Qt.textContent=Ut,Qt.value=Xt,Kt?Kt.before(Qt):B.append(Qt),N.setValue(e,{value:at(!0),items:xt(Ft)}),bt=at(!1)},items(Ft){const{items:Mt}=Ft.detail;for(;B.length!==0;)B.remove(0);for(const Ut of Mt){const{displayValue:Xt,exportValue:Kt}=Ut,Qt=document.createElement("option");Qt.textContent=Xt,Qt.value=Kt,B.append(Qt)}B.options.length>0&&(B.options[0].selected=!0),N.setValue(e,{value:at(!0),items:xt(Ft)}),bt=at(!1)},indices(Ft){const Mt=new Set(Ft.detail.indices);for(const Ut of Ft.target.options)Ut.selected=Mt.has(Ut.index);N.setValue(e,{value:at(!0)}),bt=at(!1)},editable(Ft){Ft.target.disabled=!Ft.detail.editable}};this._dispatchEventFromSandbox(zt,kt)}),B.addEventListener("input",kt=>{var Ft;const zt=at(!0);N.setValue(e,{value:zt}),kt.preventDefault(),(Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:bt,changeEx:zt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(B,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],kt=>kt.target.value)):B.addEventListener("input",function(kt){N.setValue(e,{value:at(!0)})}),this.data.combo&&this._setTextStyle(B),this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class m extends v{constructor(N){const{data:e,elements:b}=N;super(N,{isRenderable:v._hasPopupData(e)}),this.elements=b}render(){this.container.classList.add("popupAnnotation");const N=new l({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const b of this.elements)b.popup=N,e.push(b.data.id),b.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(b=>"".concat(r.AnnotationPrefix).concat(b)).join(",")),this.container}}class l{constructor({container:N,color:e,elements:b,titleObj:B,modificationDate:z,contentsObj:K,richText:at,parent:bt,rect:xt,parentRect:kt,open:zt}){U(this,Ht);U(this,jt);U(this,Gt);U(this,Vt);U(this,j,null);U(this,st,X(this,Ht,In).bind(this));U(this,Z,X(this,Vt,ln).bind(this));U(this,rt,X(this,Gt,on).bind(this));U(this,dt,X(this,jt,ke).bind(this));U(this,pt,null);U(this,lt,null);U(this,Ct,null);U(this,Ot,null);U(this,vt,null);U(this,Dt,null);U(this,gt,!1);U(this,tt,null);U(this,et,null);U(this,ft,null);U(this,wt,null);U(this,Pt,!1);var Mt;it(this,lt,N),it(this,wt,B),it(this,Ct,K),it(this,ft,at),it(this,vt,bt),it(this,pt,e),it(this,et,xt),it(this,Dt,kt),it(this,Ot,b);const Ft=u.PDFDateString.toDateObject(z);Ft&&it(this,j,bt.l10n.get("annotation_date_string",{date:Ft.toLocaleDateString(),time:Ft.toLocaleTimeString()})),this.trigger=b.flatMap(Ut=>Ut.getElementsToTriggerPopup());for(const Ut of this.trigger)Ut.addEventListener("click",t(this,dt)),Ut.addEventListener("mouseenter",t(this,rt)),Ut.addEventListener("mouseleave",t(this,Z)),Ut.classList.add("popupTriggerArea");for(const Ut of b)(Mt=Ut.container)==null||Mt.addEventListener("keydown",t(this,st));t(this,lt).hidden=!0,zt&&X(this,jt,ke).call(this)}render(){if(t(this,tt))return;const{page:{view:N},viewport:{rawDims:{pageWidth:e,pageHeight:b,pageX:B,pageY:z}}}=t(this,vt),K=it(this,tt,document.createElement("div"));if(K.className="popup",t(this,pt)){const ne=K.style.outlineColor=r.Util.makeHexColor(...t(this,pt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?K.style.backgroundColor="color-mix(in srgb, ".concat(ne," 30%, white)"):K.style.backgroundColor=r.Util.makeHexColor(...t(this,pt).map(oe=>Math.floor(.7*(255-oe)+oe)))}const at=document.createElement("span");at.className="header";const bt=document.createElement("h1");if(at.append(bt),{dir:bt.dir,str:bt.textContent}=t(this,wt),K.append(at),t(this,j)){const ne=document.createElement("span");ne.classList.add("popupDate"),t(this,j).then(ie=>{ne.textContent=ie}),at.append(ne)}const xt=t(this,Ct),kt=t(this,ft);if(kt!=null&&kt.str&&(!(xt!=null&&xt.str)||xt.str===kt.str))F.XfaLayer.render({xfaHtml:kt.html,intent:"richText",div:K}),K.lastChild.classList.add("richText","popupContent");else{const ne=this._formatContents(xt);K.append(ne)}let zt=!!t(this,Dt),Ft=zt?t(this,Dt):t(this,et);for(const ne of t(this,Ot))if(!Ft||r.Util.intersect(ne.data.rect,Ft)!==null){Ft=ne.data.rect,zt=!0;break}const Mt=r.Util.normalizeRect([Ft[0],N[3]-Ft[1]+N[1],Ft[2],N[3]-Ft[3]+N[1]]),Xt=zt?Ft[2]-Ft[0]+5:0,Kt=Mt[0]+Xt,Qt=Mt[1],{style:se}=t(this,lt);se.left="".concat(100*(Kt-B)/e,"%"),se.top="".concat(100*(Qt-z)/b,"%"),t(this,lt).append(K)}_formatContents({str:N,dir:e}){const b=document.createElement("p");b.classList.add("popupContent"),b.dir=e;const B=N.split(/(?:\r\n?|\n)/);for(let z=0,K=B.length;z<K;++z){const at=B[z];b.append(document.createTextNode(at)),z<K-1&&b.append(document.createElement("br"))}return b}forceHide(){it(this,Pt,this.isVisible),t(this,Pt)&&(t(this,lt).hidden=!0)}maybeShow(){t(this,Pt)&&(it(this,Pt,!1),t(this,lt).hidden=!1)}get isVisible(){return t(this,lt).hidden===!1}}j=new WeakMap,st=new WeakMap,Z=new WeakMap,rt=new WeakMap,dt=new WeakMap,pt=new WeakMap,lt=new WeakMap,Ct=new WeakMap,Ot=new WeakMap,vt=new WeakMap,Dt=new WeakMap,gt=new WeakMap,tt=new WeakMap,et=new WeakMap,ft=new WeakMap,wt=new WeakMap,Pt=new WeakMap,Ht=new WeakSet,In=function(N){N.altKey||N.shiftKey||N.ctrlKey||N.metaKey||(N.key==="Enter"||N.key==="Escape"&&t(this,gt))&&X(this,jt,ke).call(this)},jt=new WeakSet,ke=function(){it(this,gt,!t(this,gt)),t(this,gt)?(X(this,Gt,on).call(this),t(this,lt).addEventListener("click",t(this,dt)),t(this,lt).addEventListener("keydown",t(this,st))):(X(this,Vt,ln).call(this),t(this,lt).removeEventListener("click",t(this,dt)),t(this,lt).removeEventListener("keydown",t(this,st)))},Gt=new WeakSet,on=function(){t(this,tt)||this.render(),this.isVisible?t(this,gt)&&t(this,lt).classList.add("focused"):(t(this,lt).hidden=!1,t(this,lt).style.zIndex=parseInt(t(this,lt).style.zIndex)+1e3)},Vt=new WeakSet,ln=function(){t(this,lt).classList.remove("focused"),!(t(this,gt)||!this.isVisible)&&(t(this,lt).hidden=!0,t(this,lt).style.zIndex=parseInt(t(this,lt).style.zIndex)-1e3)};class R extends v{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0}),this.textContent=N.data.textContent,this.textPosition=N.data.textPosition,this.annotationEditorType=r.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const N=document.createElement("div");N.classList.add("annotationTextContent"),N.setAttribute("role","comment");for(const e of this.textContent){const b=document.createElement("span");b.textContent=e,N.append(b)}this.container.append(N)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}s.FreeTextAnnotationElement=R;class p extends v{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});U(this,Q,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:b,height:B}=I(e.rect),z=this.svgFactory.create(b,B,!0),K=it(this,Q,this.svgFactory.createElement("svg:line"));return K.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),K.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),K.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),K.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),K.setAttribute("stroke-width",e.borderStyle.width||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","transparent"),z.append(K),this.container.append(z),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Q)}addHighlightArea(){this.container.classList.add("highlightArea")}}Q=new WeakMap;class H extends v{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});U(this,Y,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:b,height:B}=I(e.rect),z=this.svgFactory.create(b,B,!0),K=e.borderStyle.width,at=it(this,Y,this.svgFactory.createElement("svg:rect"));return at.setAttribute("x",K/2),at.setAttribute("y",K/2),at.setAttribute("width",b-K),at.setAttribute("height",B-K),at.setAttribute("stroke-width",K||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),z.append(at),this.container.append(z),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Y)}addHighlightArea(){this.container.classList.add("highlightArea")}}Y=new WeakMap;class V extends v{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});U(this,_t,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:b,height:B}=I(e.rect),z=this.svgFactory.create(b,B,!0),K=e.borderStyle.width,at=it(this,_t,this.svgFactory.createElement("svg:ellipse"));return at.setAttribute("cx",b/2),at.setAttribute("cy",B/2),at.setAttribute("rx",b/2-K/2),at.setAttribute("ry",B/2-K/2),at.setAttribute("stroke-width",K||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),z.append(at),this.container.append(z),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,_t)}addHighlightArea(){this.container.classList.add("highlightArea")}}_t=new WeakMap;class S extends v{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});U(this,At,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:b,height:B}=I(e.rect),z=this.svgFactory.create(b,B,!0);let K=[];for(const bt of e.vertices){const xt=bt.x-e.rect[0],kt=e.rect[3]-bt.y;K.push(xt+","+kt)}K=K.join(" ");const at=it(this,At,this.svgFactory.createElement(this.svgElementName));return at.setAttribute("points",K),at.setAttribute("stroke-width",e.borderStyle.width||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),z.append(at),this.container.append(z),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,At)}addHighlightArea(){this.container.classList.add("highlightArea")}}At=new WeakMap;class q extends S{constructor(N){super(N),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nt extends v{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ot extends v{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});U(this,te,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=r.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:b,height:B}=I(e.rect),z=this.svgFactory.create(b,B,!0);for(const K of e.inkLists){let at=[];for(const xt of K){const kt=xt.x-e.rect[0],zt=e.rect[3]-xt.y;at.push("".concat(kt,",").concat(zt))}at=at.join(" ");const bt=this.svgFactory.createElement(this.svgElementName);t(this,te).push(bt),bt.setAttribute("points",at),bt.setAttribute("stroke-width",e.borderStyle.width||1),bt.setAttribute("stroke","transparent"),bt.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),z.append(bt)}return this.container.append(z),this.container}getElementsToTriggerPopup(){return t(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,s.InkAnnotationElement=ot;class $ extends v{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ct extends v{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class mt extends v{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Et extends v{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Tt extends v{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}s.StampAnnotationElement=Tt;class C extends v{constructor(e){var z;super(e,{isRenderable:!0});U(this,J);U(this,Zt,null);const{filename:b,content:B}=this.data.file;this.filename=(0,u.getFilenameFromUrl)(b,!0),this.content=B,(z=this.linkService.eventBus)==null||z.dispatch("fileattachmentannotation",{source:this,filename:b,content:B})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:b}=this;let B;b.hasAppearance||b.fillAlpha===0?B=document.createElement("div"):(B=document.createElement("img"),B.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(b.name)?"paperclip":"pushpin",".svg"),b.fillAlpha&&b.fillAlpha<1&&(B.style="filter: opacity(".concat(Math.round(b.fillAlpha*100),"%);"))),B.addEventListener("dblclick",X(this,J,cn).bind(this)),it(this,Zt,B);const{isMac:z}=r.FeatureTest.platform;return e.addEventListener("keydown",K=>{K.key==="Enter"&&(z?K.metaKey:K.ctrlKey)&&X(this,J,cn).call(this)}),!b.popupRef&&this.hasPopupData?this._createPopup():B.classList.add("popupTriggerArea"),e.append(B),e}getElementsToTriggerPopup(){return t(this,Zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zt=new WeakMap,J=new WeakSet,cn=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.container,this.content,this.filename)};class n{constructor({div:N,accessibilityManager:e,annotationCanvasMap:b,l10n:B,page:z,viewport:K}){U(this,Bt);U(this,yt);U(this,Lt,null);U(this,Rt,null);U(this,Nt,new Map);this.div=N,it(this,Lt,e),it(this,Rt,b),this.l10n=B,this.page=z,this.viewport=K,this.zIndex=0,this.l10n||(this.l10n=ut.NullL10n)}async render(N){const{annotations:e}=N,b=this.div;(0,u.setLayerDimensions)(b,this.viewport);const B=new Map,z={data:null,layer:b,linkService:N.linkService,downloadManager:N.downloadManager,imageResourcesPath:N.imageResourcesPath||"",renderForms:N.renderForms!==!1,svgFactory:new u.DOMSVGFactory,annotationStorage:N.annotationStorage||new G.AnnotationStorage,enableScripting:N.enableScripting===!0,hasJSActions:N.hasJSActions,fieldObjects:N.fieldObjects,parent:this,elements:null};for(const K of e){if(K.noHTML)continue;const at=K.annotationType===r.AnnotationType.POPUP;if(at){const kt=B.get(K.id);if(!kt)continue;z.elements=kt}else{const{width:kt,height:zt}=I(K.rect);if(kt<=0||zt<=0)continue}z.data=K;const bt=x.create(z);if(!bt.isRenderable)continue;if(!at&&K.popupRef){const kt=B.get(K.popupRef);kt?kt.push(bt):B.set(K.popupRef,[bt])}bt.annotationEditorType>0&&t(this,Nt).set(bt.data.id,bt);const xt=bt.render();K.hidden&&(xt.style.visibility="hidden"),X(this,Bt,Nn).call(this,xt,K.id)}X(this,yt,hn).call(this),await this.l10n.translate(b)}update({viewport:N}){const e=this.div;this.viewport=N,(0,u.setLayerDimensions)(e,{rotation:N.rotation}),X(this,yt,hn).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(t(this,Nt).values())}getEditableAnnotation(N){return t(this,Nt).get(N)}}Lt=new WeakMap,Rt=new WeakMap,Nt=new WeakMap,Bt=new WeakSet,Nn=function(N,e){var B;const b=N.firstChild||N;b.id="".concat(r.AnnotationPrefix).concat(e),this.div.append(N),(B=t(this,Lt))==null||B.moveElementInDOM(this.div,N,b,!1)},yt=new WeakSet,hn=function(){if(!t(this,Rt))return;const N=this.div;for(const[e,b]of t(this,Rt)){const B=N.querySelector('[data-annotation-id="'.concat(e,'"]'));if(!B)continue;const{firstChild:z}=B;z?z.nodeName==="CANVAS"?z.replaceWith(b):z.before(b):B.append(b)}t(this,Rt).clear()},s.AnnotationLayer=n},(k,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0;function L(G){return Math.floor(Math.max(0,Math.min(1,G))*255).toString(16).padStart(2,"0")}function r(G){return Math.max(0,Math.min(255,255*G))}class u{static CMYK_G([W,ut,F,w]){return["G",1-Math.min(1,.3*W+.59*F+.11*ut+w)]}static G_CMYK([W]){return["CMYK",0,0,0,1-W]}static G_RGB([W]){return["RGB",W,W,W]}static G_rgb([W]){return W=r(W),[W,W,W]}static G_HTML([W]){const ut=L(W);return"#".concat(ut).concat(ut).concat(ut)}static RGB_G([W,ut,F]){return["G",.3*W+.59*ut+.11*F]}static RGB_rgb(W){return W.map(r)}static RGB_HTML(W){return"#".concat(W.map(L).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([W,ut,F,w]){return["RGB",1-Math.min(1,W+w),1-Math.min(1,F+w),1-Math.min(1,ut+w)]}static CMYK_rgb([W,ut,F,w]){return[r(1-Math.min(1,W+w)),r(1-Math.min(1,F+w)),r(1-Math.min(1,ut+w))]}static CMYK_HTML(W){const ut=this.CMYK_RGB(W).slice(1);return this.RGB_HTML(ut)}static RGB_CMYK([W,ut,F]){const w=1-W,g=1-ut,O=1-F,I=Math.min(w,g,O);return["CMYK",w,g,O,I]}}s.ColorConverters=u},(k,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.getL10nFallback=r;const L={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};L.print_progress_percent="{{progress}}%";function r(W,ut){switch(W){case"find_match_count":W="find_match_count[".concat(ut.total===1?"one":"other","]");break;case"find_match_count_limit":W="find_match_count_limit[".concat(ut.limit===1?"one":"other","]");break}return L[W]||""}function u(W,ut){return ut?W.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(F,w)=>w in ut?ut[w]:"{{"+w+"}}"):W}const G={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(W,ut=null,F=r(W,ut)){return u(F,ut)},async translate(W){}};s.NullL10n=G},(k,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var r=L(25);class u{static setupStorage(W,ut,F,w,g){const O=w.getValue(ut,{value:null});switch(F.name){case"textarea":if(O.value!==null&&(W.textContent=O.value),g==="print")break;W.addEventListener("input",I=>{w.setValue(ut,{value:I.target.value})});break;case"input":if(F.attributes.type==="radio"||F.attributes.type==="checkbox"){if(O.value===F.attributes.xfaOn?W.setAttribute("checked",!0):O.value===F.attributes.xfaOff&&W.removeAttribute("checked"),g==="print")break;W.addEventListener("change",I=>{w.setValue(ut,{value:I.target.checked?I.target.getAttribute("xfaOn"):I.target.getAttribute("xfaOff")})})}else{if(O.value!==null&&W.setAttribute("value",O.value),g==="print")break;W.addEventListener("input",I=>{w.setValue(ut,{value:I.target.value})})}break;case"select":if(O.value!==null){W.setAttribute("value",O.value);for(const I of F.children)I.attributes.value===O.value?I.attributes.selected=!0:I.attributes.hasOwnProperty("selected")&&delete I.attributes.selected}W.addEventListener("input",I=>{const x=I.target.options,v=x.selectedIndex===-1?"":x[x.selectedIndex].value;w.setValue(ut,{value:v})});break}}static setAttributes({html:W,element:ut,storage:F=null,intent:w,linkService:g}){const{attributes:O}=ut,I=W instanceof HTMLAnchorElement;O.type==="radio"&&(O.name="".concat(O.name,"-").concat(w));for(const[x,v]of Object.entries(O))if(v!=null)switch(x){case"class":v.length&&W.setAttribute(x,v.join(" "));break;case"dataId":break;case"id":W.setAttribute("data-element-id",v);break;case"style":Object.assign(W.style,v);break;case"textContent":W.textContent=v;break;default:(!I||x!=="href"&&x!=="newWindow")&&W.setAttribute(x,v)}I&&g.addLinkAttributes(W,O.href,O.newWindow),F&&O.dataId&&this.setupStorage(W,O.dataId,ut,F)}static render(W){var A;const ut=W.annotationStorage,F=W.linkService,w=W.xfaHtml,g=W.intent||"display",O=document.createElement(w.name);w.attributes&&this.setAttributes({html:O,element:w,intent:g,linkService:F});const I=[[w,-1,O]],x=W.div;if(x.append(O),W.viewport){const f="matrix(".concat(W.viewport.transform.join(","),")");x.style.transform=f}g!=="richText"&&x.setAttribute("class","xfaLayer xfaFont");const v=[];for(;I.length>0;){const[f,_,P]=I.at(-1);if(_+1===f.children.length){I.pop();continue}const T=f.children[++I.at(-1)[1]];if(T===null)continue;const{name:y}=T;if(y==="#text"){const h=document.createTextNode(T.value);v.push(h),P.append(h);continue}const o=(A=T==null?void 0:T.attributes)!=null&&A.xmlns?document.createElementNS(T.attributes.xmlns,y):document.createElement(y);if(P.append(o),T.attributes&&this.setAttributes({html:o,element:T,storage:ut,intent:g,linkService:F}),T.children&&T.children.length>0)I.push([T,-1,o]);else if(T.value){const h=document.createTextNode(T.value);r.XfaText.shouldBuildText(y)&&v.push(h),o.append(h)}}for(const f of x.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:v}}static update(W){const ut="matrix(".concat(W.viewport.transform.join(","),")");W.div.style.transform=ut,W.div.hidden=!1}}s.XfaLayer=u},(k,s,L)=>{var w,g,O,I,x,v,A,f,_,P,T,y,o,h,M,Bn,l,jn,p,Un,V,Wn,q,dn,ot,Hn,ct,un,Et,$n,C,Gn,a,Vn,c,zn,E,qn,j,ae,Z,fn,dt,Fe,lt,Me,Ot,fe,Dt,pn,tt,De,ft,Xn,Pt,gn,$t,Yn,qt,Kn,Wt,mn,ht,Le,Y,pe;Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0;var r=L(1),u=L(4),G=L(29),W=L(6),ut=L(5);const At=class At extends u.AnnotationEditor{constructor(J){super({...J,name:"inkEditor"});U(this,M);U(this,l);U(this,p);U(this,V);U(this,q);U(this,ot);U(this,ct);U(this,Et);U(this,C);U(this,a);U(this,c);U(this,E);U(this,j);U(this,Z);U(this,dt);U(this,lt);U(this,Ot);U(this,Dt);U(this,tt);U(this,qt);U(this,Wt);U(this,ht);U(this,Y);U(this,w,0);U(this,g,0);U(this,O,this.canvasPointermove.bind(this));U(this,I,this.canvasPointerleave.bind(this));U(this,x,this.canvasPointerup.bind(this));U(this,v,this.canvasPointerdown.bind(this));U(this,A,new Path2D);U(this,f,!1);U(this,_,!1);U(this,P,!1);U(this,T,null);U(this,y,0);U(this,o,0);U(this,h,null);this.color=J.color||null,this.thickness=J.thickness||null,this.opacity=J.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(J){u.AnnotationEditor.initialize(J,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(J,St){switch(J){case r.AnnotationEditorParamsType.INK_THICKNESS:At._defaultThickness=St;break;case r.AnnotationEditorParamsType.INK_COLOR:At._defaultColor=St;break;case r.AnnotationEditorParamsType.INK_OPACITY:At._defaultOpacity=St/100;break}}updateParams(J,St){switch(J){case r.AnnotationEditorParamsType.INK_THICKNESS:X(this,M,Bn).call(this,St);break;case r.AnnotationEditorParamsType.INK_COLOR:X(this,l,jn).call(this,St);break;case r.AnnotationEditorParamsType.INK_OPACITY:X(this,p,Un).call(this,St);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,At._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,At._defaultColor||u.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(At._defaultOpacity*100)]]}get propertiesToUpdate(){var J;return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||At._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||At._defaultColor||u.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((J=this.opacity)!=null?J:At._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(X(this,dt,Fe).call(this),X(this,lt,Me).call(this)),this.isAttachedToDOM||(this.parent.add(this),X(this,Ot,fe).call(this)),X(this,Y,pe).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,T).disconnect(),it(this,T,null),super.remove())}setParent(J){!this.parent&&J?this._uiManager.removeShouldRescale(this):this.parent&&J===null&&this._uiManager.addShouldRescale(this),super.setParent(J)}onScaleChanging(){const[J,St]=this.parentDimensions,Lt=this.width*J,Rt=this.height*St;this.setDimensions(Lt,Rt)}enableEditMode(){t(this,f)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,v)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,v)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,f)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),it(this,f,!0),this.div.classList.add("disabled"),X(this,Y,pe).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(J){this._focusEventsAllowed&&(super.focusin(J),this.enableEditMode())}canvasPointerdown(J){J.button!==0||!this.isInEditMode()||t(this,f)||(this.setInForeground(),J.preventDefault(),J.type!=="mouse"&&this.div.focus(),X(this,ot,Hn).call(this,J.offsetX,J.offsetY))}canvasPointermove(J){J.preventDefault(),X(this,ct,un).call(this,J.offsetX,J.offsetY)}canvasPointerup(J){J.preventDefault(),X(this,Z,fn).call(this,J)}canvasPointerleave(J){X(this,Z,fn).call(this,J)}get isResizable(){return!this.isEmpty()&&t(this,f)}render(){if(this.div)return this.div;let J,St;this.width&&(J=this.x,St=this.y),super.render(),u.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Jt=>{var yt;return(yt=this.div)==null?void 0:yt.setAttribute("aria-label",Jt)});const[Lt,Rt,Nt,Bt]=X(this,V,Wn).call(this);if(this.setAt(Lt,Rt,0,0),this.setDims(Nt,Bt),X(this,dt,Fe).call(this),this.width){const[Jt,yt]=this.parentDimensions;this.setAspectRatio(this.width*Jt,this.height*yt),this.setAt(J*Jt,St*yt,this.width*Jt,this.height*yt),it(this,P,!0),X(this,Ot,fe).call(this),this.setDims(this.width*Jt,this.height*yt),X(this,j,ae).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return X(this,lt,Me).call(this),this.div}setDimensions(J,St){const Lt=Math.round(J),Rt=Math.round(St);if(t(this,y)===Lt&&t(this,o)===Rt)return;it(this,y,Lt),it(this,o,Rt),this.canvas.style.visibility="hidden";const[Nt,Bt]=this.parentDimensions;this.width=J/Nt,this.height=St/Bt,this.fixAndSetPosition(),t(this,f)&&X(this,Dt,pn).call(this,J,St),X(this,Ot,fe).call(this),X(this,j,ae).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(J,St,Lt){var z,K,at;if(J instanceof G.InkAnnotationElement)return null;const Rt=super.deserialize(J,St,Lt);Rt.thickness=J.thickness,Rt.color=r.Util.makeHexColor(...J.color),Rt.opacity=J.opacity;const[Nt,Bt]=Rt.pageDimensions,Jt=Rt.width*Nt,yt=Rt.height*Bt,Yt=Rt.parentScale,It=J.thickness/2;it(Rt,f,!0),it(Rt,y,Math.round(Jt)),it(Rt,o,Math.round(yt));const{paths:N,rect:e,rotation:b}=J;for(let{bezier:bt}of N){bt=X(z=At,$t,Yn).call(z,bt,e,b);const xt=[];Rt.paths.push(xt);let kt=Yt*(bt[0]-It),zt=Yt*(bt[1]-It);for(let Mt=2,Ut=bt.length;Mt<Ut;Mt+=6){const Xt=Yt*(bt[Mt]-It),Kt=Yt*(bt[Mt+1]-It),Qt=Yt*(bt[Mt+2]-It),se=Yt*(bt[Mt+3]-It),ne=Yt*(bt[Mt+4]-It),ie=Yt*(bt[Mt+5]-It);xt.push([[kt,zt],[Xt,Kt],[Qt,se],[ne,ie]]),kt=ne,zt=ie}const Ft=X(this,ft,Xn).call(this,xt);Rt.bezierPath2D.push(Ft)}const B=X(K=Rt,Wt,mn).call(K);return it(Rt,g,Math.max(u.AnnotationEditor.MIN_SIZE,B[2]-B[0])),it(Rt,w,Math.max(u.AnnotationEditor.MIN_SIZE,B[3]-B[1])),X(at=Rt,Dt,pn).call(at,Jt,yt),Rt}serialize(){if(this.isEmpty())return null;const J=this.getRect(0,0),St=u.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:St,thickness:this.thickness,opacity:this.opacity,paths:X(this,qt,Kn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,J),pageIndex:this.pageIndex,rect:J,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};w=new WeakMap,g=new WeakMap,O=new WeakMap,I=new WeakMap,x=new WeakMap,v=new WeakMap,A=new WeakMap,f=new WeakMap,_=new WeakMap,P=new WeakMap,T=new WeakMap,y=new WeakMap,o=new WeakMap,h=new WeakMap,M=new WeakSet,Bn=function(J){const St=this.thickness;this.addCommands({cmd:()=>{this.thickness=J,X(this,Y,pe).call(this)},undo:()=>{this.thickness=St,X(this,Y,pe).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},l=new WeakSet,jn=function(J){const St=this.color;this.addCommands({cmd:()=>{this.color=J,X(this,j,ae).call(this)},undo:()=>{this.color=St,X(this,j,ae).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},p=new WeakSet,Un=function(J){J/=100;const St=this.opacity;this.addCommands({cmd:()=>{this.opacity=J,X(this,j,ae).call(this)},undo:()=>{this.opacity=St,X(this,j,ae).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},V=new WeakSet,Wn=function(){const{parentRotation:J,parentDimensions:[St,Lt]}=this;switch(J){case 90:return[0,Lt,Lt,St];case 180:return[St,Lt,St,Lt];case 270:return[St,0,Lt,St];default:return[0,0,St,Lt]}},q=new WeakSet,dn=function(){const{ctx:J,color:St,opacity:Lt,thickness:Rt,parentScale:Nt,scaleFactor:Bt}=this;J.lineWidth=Rt*Nt/Bt,J.lineCap="round",J.lineJoin="round",J.miterLimit=10,J.strokeStyle="".concat(St).concat((0,ut.opacityToHex)(Lt))},ot=new WeakSet,Hn=function(J,St){var Lt;this.canvas.addEventListener("contextmenu",W.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,I)),this.canvas.addEventListener("pointermove",t(this,O)),this.canvas.addEventListener("pointerup",t(this,x)),this.canvas.removeEventListener("pointerdown",t(this,v)),this.isEditing=!0,t(this,P)||(it(this,P,!0),X(this,Ot,fe).call(this),this.thickness||(this.thickness=At._defaultThickness),this.color||(this.color=At._defaultColor||u.AnnotationEditor._defaultLineColor),(Lt=this.opacity)!=null||(this.opacity=At._defaultOpacity)),this.currentPath.push([J,St]),it(this,_,!1),X(this,q,dn).call(this),it(this,h,()=>{X(this,a,Vn).call(this),t(this,h)&&window.requestAnimationFrame(t(this,h))}),window.requestAnimationFrame(t(this,h))},ct=new WeakSet,un=function(J,St){const[Lt,Rt]=this.currentPath.at(-1);if(this.currentPath.length>1&&J===Lt&&St===Rt)return;const Nt=this.currentPath;let Bt=t(this,A);if(Nt.push([J,St]),it(this,_,!0),Nt.length<=2){Bt.moveTo(...Nt[0]),Bt.lineTo(J,St);return}Nt.length===3&&(it(this,A,Bt=new Path2D),Bt.moveTo(...Nt[0])),X(this,c,zn).call(this,Bt,...Nt.at(-3),...Nt.at(-2),J,St)},Et=new WeakSet,$n=function(){if(this.currentPath.length===0)return;const J=this.currentPath.at(-1);t(this,A).lineTo(...J)},C=new WeakSet,Gn=function(J,St){it(this,h,null),J=Math.min(Math.max(J,0),this.canvas.width),St=Math.min(Math.max(St,0),this.canvas.height),X(this,ct,un).call(this,J,St),X(this,Et,$n).call(this);let Lt;if(this.currentPath.length!==1)Lt=X(this,E,qn).call(this);else{const yt=[J,St];Lt=[[yt,yt.slice(),yt.slice(),yt]]}const Rt=t(this,A),Nt=this.currentPath;this.currentPath=[],it(this,A,new Path2D);const Bt=()=>{this.allRawPaths.push(Nt),this.paths.push(Lt),this.bezierPath2D.push(Rt),this.rebuild()},Jt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(X(this,dt,Fe).call(this),X(this,lt,Me).call(this)),X(this,Y,pe).call(this))};this.addCommands({cmd:Bt,undo:Jt,mustExec:!0})},a=new WeakSet,Vn=function(){if(!t(this,_))return;it(this,_,!1);const J=Math.ceil(this.thickness*this.parentScale),St=this.currentPath.slice(-3),Lt=St.map(Bt=>Bt[0]),Rt=St.map(Bt=>Bt[1]);Math.min(...Lt)-J,Math.max(...Lt)+J,Math.min(...Rt)-J,Math.max(...Rt)+J;const{ctx:Nt}=this;Nt.save(),Nt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Bt of this.bezierPath2D)Nt.stroke(Bt);Nt.stroke(t(this,A)),Nt.restore()},c=new WeakSet,zn=function(J,St,Lt,Rt,Nt,Bt,Jt){const yt=(St+Rt)/2,Yt=(Lt+Nt)/2,It=(Rt+Bt)/2,N=(Nt+Jt)/2;J.bezierCurveTo(yt+2*(Rt-yt)/3,Yt+2*(Nt-Yt)/3,It+2*(Rt-It)/3,N+2*(Nt-N)/3,It,N)},E=new WeakSet,qn=function(){const J=this.currentPath;if(J.length<=2)return[[J[0],J[0],J.at(-1),J.at(-1)]];const St=[];let Lt,[Rt,Nt]=J[0];for(Lt=1;Lt<J.length-2;Lt++){const[e,b]=J[Lt],[B,z]=J[Lt+1],K=(e+B)/2,at=(b+z)/2,bt=[Rt+2*(e-Rt)/3,Nt+2*(b-Nt)/3],xt=[K+2*(e-K)/3,at+2*(b-at)/3];St.push([[Rt,Nt],bt,xt,[K,at]]),[Rt,Nt]=[K,at]}const[Bt,Jt]=J[Lt],[yt,Yt]=J[Lt+1],It=[Rt+2*(Bt-Rt)/3,Nt+2*(Jt-Nt)/3],N=[yt+2*(Bt-yt)/3,Yt+2*(Jt-Yt)/3];return St.push([[Rt,Nt],It,N,[yt,Yt]]),St},j=new WeakSet,ae=function(){if(this.isEmpty()){X(this,tt,De).call(this);return}X(this,q,dn).call(this);const{canvas:J,ctx:St}=this;St.setTransform(1,0,0,1,0,0),St.clearRect(0,0,J.width,J.height),X(this,tt,De).call(this);for(const Lt of this.bezierPath2D)St.stroke(Lt)},Z=new WeakSet,fn=function(J){this.canvas.removeEventListener("pointerleave",t(this,I)),this.canvas.removeEventListener("pointermove",t(this,O)),this.canvas.removeEventListener("pointerup",t(this,x)),this.canvas.addEventListener("pointerdown",t(this,v)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",W.noContextMenu)},10),X(this,C,Gn).call(this,J.offsetX,J.offsetY),this.addToAnnotationStorage(),this.setInBackground()},dt=new WeakSet,Fe=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",u.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(J=>{var St;return(St=this.canvas)==null?void 0:St.setAttribute("aria-label",J)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},lt=new WeakSet,Me=function(){it(this,T,new ResizeObserver(J=>{const St=J[0].contentRect;St.width&&St.height&&this.setDimensions(St.width,St.height)})),t(this,T).observe(this.div)},Ot=new WeakSet,fe=function(){if(!t(this,P))return;const[J,St]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*J),this.canvas.height=Math.ceil(this.height*St),X(this,tt,De).call(this)},Dt=new WeakSet,pn=function(J,St){const Lt=X(this,ht,Le).call(this),Rt=(J-Lt)/t(this,g),Nt=(St-Lt)/t(this,w);this.scaleFactor=Math.min(Rt,Nt)},tt=new WeakSet,De=function(){const J=X(this,ht,Le).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+J,this.translationY*this.scaleFactor+J)},ft=new WeakSet,Xn=function(J){const St=new Path2D;for(let Lt=0,Rt=J.length;Lt<Rt;Lt++){const[Nt,Bt,Jt,yt]=J[Lt];Lt===0&&St.moveTo(...Nt),St.bezierCurveTo(Bt[0],Bt[1],Jt[0],Jt[1],yt[0],yt[1])}return St},Pt=new WeakSet,gn=function(J,St,Lt){const[Rt,Nt,Bt,Jt]=St;switch(Lt){case 0:for(let yt=0,Yt=J.length;yt<Yt;yt+=2)J[yt]+=Rt,J[yt+1]=Jt-J[yt+1];break;case 90:for(let yt=0,Yt=J.length;yt<Yt;yt+=2){const It=J[yt];J[yt]=J[yt+1]+Rt,J[yt+1]=It+Nt}break;case 180:for(let yt=0,Yt=J.length;yt<Yt;yt+=2)J[yt]=Bt-J[yt],J[yt+1]+=Nt;break;case 270:for(let yt=0,Yt=J.length;yt<Yt;yt+=2){const It=J[yt];J[yt]=Bt-J[yt+1],J[yt+1]=Jt-It}break;default:throw new Error("Invalid rotation")}return J},$t=new WeakSet,Yn=function(J,St,Lt){const[Rt,Nt,Bt,Jt]=St;switch(Lt){case 0:for(let yt=0,Yt=J.length;yt<Yt;yt+=2)J[yt]-=Rt,J[yt+1]=Jt-J[yt+1];break;case 90:for(let yt=0,Yt=J.length;yt<Yt;yt+=2){const It=J[yt];J[yt]=J[yt+1]-Nt,J[yt+1]=It-Rt}break;case 180:for(let yt=0,Yt=J.length;yt<Yt;yt+=2)J[yt]=Bt-J[yt],J[yt+1]-=Nt;break;case 270:for(let yt=0,Yt=J.length;yt<Yt;yt+=2){const It=J[yt];J[yt]=Jt-J[yt+1],J[yt+1]=Bt-It}break;default:throw new Error("Invalid rotation")}return J},qt=new WeakSet,Kn=function(J,St,Lt,Rt){var Yt,It;const Nt=[],Bt=this.thickness/2,Jt=J*St+Bt,yt=J*Lt+Bt;for(const N of this.paths){const e=[],b=[];for(let B=0,z=N.length;B<z;B++){const[K,at,bt,xt]=N[B],kt=J*K[0]+Jt,zt=J*K[1]+yt,Ft=J*at[0]+Jt,Mt=J*at[1]+yt,Ut=J*bt[0]+Jt,Xt=J*bt[1]+yt,Kt=J*xt[0]+Jt,Qt=J*xt[1]+yt;B===0&&(e.push(kt,zt),b.push(kt,zt)),e.push(Ft,Mt,Ut,Xt,Kt,Qt),b.push(Ft,Mt),B===z-1&&b.push(Kt,Qt)}Nt.push({bezier:X(Yt=At,Pt,gn).call(Yt,e,Rt,this.rotation),points:X(It=At,Pt,gn).call(It,b,Rt,this.rotation)})}return Nt},Wt=new WeakSet,mn=function(){let J=1/0,St=-1/0,Lt=1/0,Rt=-1/0;for(const Nt of this.paths)for(const[Bt,Jt,yt,Yt]of Nt){const It=r.Util.bezierBoundingBox(...Bt,...Jt,...yt,...Yt);J=Math.min(J,It[0]),Lt=Math.min(Lt,It[1]),St=Math.max(St,It[2]),Rt=Math.max(Rt,It[3])}return[J,Lt,St,Rt]},ht=new WeakSet,Le=function(){return t(this,f)?Math.ceil(this.thickness*this.parentScale):0},Y=new WeakSet,pe=function(J=!1){if(this.isEmpty())return;if(!t(this,f)){X(this,j,ae).call(this);return}const St=X(this,Wt,mn).call(this),Lt=X(this,ht,Le).call(this);it(this,g,Math.max(u.AnnotationEditor.MIN_SIZE,St[2]-St[0])),it(this,w,Math.max(u.AnnotationEditor.MIN_SIZE,St[3]-St[1]));const Rt=Math.ceil(Lt+t(this,g)*this.scaleFactor),Nt=Math.ceil(Lt+t(this,w)*this.scaleFactor),[Bt,Jt]=this.parentDimensions;this.width=Rt/Bt,this.height=Nt/Jt,this.setAspectRatio(Rt,Nt);const yt=this.translationX,Yt=this.translationY;this.translationX=-St[0],this.translationY=-St[1],X(this,Ot,fe).call(this),X(this,j,ae).call(this),it(this,y,Rt),it(this,o,Nt),this.setDims(Rt,Nt);const It=J?Lt/this.scaleFactor/2:0;this.translate(yt-this.translationX-It,Yt-this.translationY-It)},U(At,ft),U(At,Pt),U(At,$t),ee(At,"_defaultColor",null),ee(At,"_defaultOpacity",1),ee(At,"_defaultThickness",1),ee(At,"_type","ink");let F=At;s.InkEditor=F},(k,s,L)=>{var F,w,g,O,I,x,v,A,f,_,P,ve,y,Ee,h,Oe,m,bn,R,Jn,H,Qn,S,_n,nt,Ie,$,Zn;Object.defineProperty(s,"__esModule",{value:!0}),s.StampEditor=void 0;var r=L(1),u=L(4),G=L(6),W=L(29);const mt=class mt extends u.AnnotationEditor{constructor(C){super({...C,name:"stampEditor"});U(this,P);U(this,y);U(this,h);U(this,m);U(this,R);U(this,H);U(this,S);U(this,nt);U(this,$);U(this,F,null);U(this,w,null);U(this,g,null);U(this,O,null);U(this,I,null);U(this,x,null);U(this,v,null);U(this,A,null);U(this,f,!1);U(this,_,!1);it(this,O,C.bitmapUrl),it(this,I,C.bitmapFile)}static initialize(C){u.AnnotationEditor.initialize(C)}static get supportedTypes(){const C=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,r.shadow)(this,"supportedTypes",C.map(n=>"image/".concat(n)))}static get supportedTypesStr(){return(0,r.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(C){return this.supportedTypes.includes(C)}static paste(C,n){n.pasteEditor(r.AnnotationEditorType.STAMP,{bitmapFile:C.getAsFile()})}remove(){var C,n;t(this,w)&&(it(this,F,null),this._uiManager.imageManager.deleteId(t(this,w)),(C=t(this,x))==null||C.remove(),it(this,x,null),(n=t(this,v))==null||n.disconnect(),it(this,v,null)),super.remove()}rebuild(){if(!this.parent){t(this,w)&&X(this,h,Oe).call(this);return}super.rebuild(),this.div!==null&&(t(this,w)&&X(this,h,Oe).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,g)||t(this,F)||t(this,O)||t(this,I))}get isResizable(){return!0}render(){if(this.div)return this.div;let C,n;if(this.width&&(C=this.x,n=this.y),super.render(),this.div.hidden=!0,t(this,F)?X(this,m,bn).call(this):X(this,h,Oe).call(this),this.width){const[a,i]=this.parentDimensions;this.setAt(C*a,n*i,this.width*a,this.height*i)}return this.div}static deserialize(C,n,a){if(C instanceof W.StampAnnotationElement)return null;const i=super.deserialize(C,n,a),{rect:c,bitmapUrl:d,bitmapId:E,isSvg:D,accessibilityData:j}=C;E&&a.imageManager.isValidId(E)?it(i,w,E):it(i,O,d),it(i,f,D);const[st,Z]=i.pageDimensions;return i.width=(c[2]-c[0])/st,i.height=(c[3]-c[1])/Z,j&&(i.altTextData=j),i}serialize(C=!1,n=null){if(this.isEmpty())return null;const a={annotationType:r.AnnotationEditorType.STAMP,bitmapId:t(this,w),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,f),structTreeParentId:this._structTreeParentId};if(C)return a.bitmapUrl=X(this,nt,Ie).call(this,!0),a.accessibilityData=this.altTextData,a;const{decorative:i,altText:c}=this.altTextData;if(!i&&c&&(a.accessibilityData={type:"Figure",alt:c}),n===null)return a;n.stamps||(n.stamps=new Map);const d=t(this,f)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(t(this,w)))n.stamps.set(t(this,w),{area:d,serialized:a}),a.bitmap=X(this,nt,Ie).call(this,!1);else if(t(this,f)){const E=n.stamps.get(t(this,w));d>E.area&&(E.area=d,E.serialized.bitmap.close(),E.serialized.bitmap=X(this,nt,Ie).call(this,!1))}return a}};F=new WeakMap,w=new WeakMap,g=new WeakMap,O=new WeakMap,I=new WeakMap,x=new WeakMap,v=new WeakMap,A=new WeakMap,f=new WeakMap,_=new WeakMap,P=new WeakSet,ve=function(C,n=!1){if(!C){this.remove();return}it(this,F,C.bitmap),n||(it(this,w,C.id),it(this,f,C.isSvg)),X(this,m,bn).call(this)},y=new WeakSet,Ee=function(){it(this,g,null),this._uiManager.enableWaiting(!1),t(this,x)&&this.div.focus()},h=new WeakSet,Oe=function(){if(t(this,w)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,w)).then(n=>X(this,P,ve).call(this,n,!0)).finally(()=>X(this,y,Ee).call(this));return}if(t(this,O)){const n=t(this,O);it(this,O,null),this._uiManager.enableWaiting(!0),it(this,g,this._uiManager.imageManager.getFromUrl(n).then(a=>X(this,P,ve).call(this,a)).finally(()=>X(this,y,Ee).call(this)));return}if(t(this,I)){const n=t(this,I);it(this,I,null),this._uiManager.enableWaiting(!0),it(this,g,this._uiManager.imageManager.getFromFile(n).then(a=>X(this,P,ve).call(this,a)).finally(()=>X(this,y,Ee).call(this)));return}const C=document.createElement("input");C.type="file",C.accept=mt.supportedTypesStr,it(this,g,new Promise(n=>{C.addEventListener("change",async()=>{if(!C.files||C.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(C.files[0]);X(this,P,ve).call(this,a)}n()}),C.addEventListener("cancel",()=>{this.remove(),n()})}).finally(()=>X(this,y,Ee).call(this))),C.click()},m=new WeakSet,bn=function(){const{div:C}=this;let{width:n,height:a}=t(this,F);const[i,c]=this.pageDimensions,d=.75;if(this.width)n=this.width*i,a=this.height*c;else if(n>d*i||a>d*c){const st=Math.min(d*i/n,d*c/a);n*=st,a*=st}const[E,D]=this.parentDimensions;this.setDims(n*E/i,a*D/c),this._uiManager.enableWaiting(!1);const j=it(this,x,document.createElement("canvas"));C.append(j),C.hidden=!1,X(this,S,_n).call(this,n,a),X(this,$,Zn).call(this),t(this,_)||(this.parent.addUndoableEditor(this),it(this,_,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},R=new WeakSet,Jn=function(C,n){var d;const[a,i]=this.parentDimensions;this.width=C/a,this.height=n/i,this.setDims(C,n),(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,A)!==null&&clearTimeout(t(this,A)),it(this,A,setTimeout(()=>{it(this,A,null),X(this,S,_n).call(this,C,n)},200))},H=new WeakSet,Qn=function(C,n){const{width:a,height:i}=t(this,F);let c=a,d=i,E=t(this,F);for(;c>2*C||d>2*n;){const D=c,j=d;c>2*C&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),d>2*n&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const st=new OffscreenCanvas(c,d);st.getContext("2d").drawImage(E,0,0,D,j,0,0,c,d),E=st.transferToImageBitmap()}return E},S=new WeakSet,_n=function(C,n){C=Math.ceil(C),n=Math.ceil(n);const a=t(this,x);if(!a||a.width===C&&a.height===n)return;a.width=C,a.height=n;const i=t(this,f)?t(this,F):X(this,H,Qn).call(this,C,n),c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(i,0,0,i.width,i.height,0,0,C,n)},nt=new WeakSet,Ie=function(C){if(C){if(t(this,f)){const i=this._uiManager.imageManager.getSvgUrl(t(this,w));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=t(this,F),n.getContext("2d").drawImage(t(this,F),0,0),n.toDataURL()}if(t(this,f)){const[n,a]=this.pageDimensions,i=Math.round(this.width*n*G.PixelsPerInch.PDF_TO_CSS_UNITS),c=Math.round(this.height*a*G.PixelsPerInch.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(i,c);return d.getContext("2d").drawImage(t(this,F),0,0,t(this,F).width,t(this,F).height,0,0,i,c),d.transferToImageBitmap()}return structuredClone(t(this,F))},$=new WeakSet,Zn=function(){it(this,v,new ResizeObserver(C=>{const n=C[0].contentRect;n.width&&n.height&&X(this,R,Jn).call(this,n.width,n.height)})),t(this,v).observe(this.div)},ee(mt,"_type","stamp");let ut=mt;s.StampEditor=ut}],__webpack_module_cache__={};function __w_pdfjs_require__(k){var s=__webpack_module_cache__[k];if(s!==void 0)return s.exports;var L=__webpack_module_cache__[k]={exports:{}};return __webpack_modules__[k](L,L.exports,__w_pdfjs_require__),L.exports}var __webpack_exports__={};return(()=>{var k=__webpack_exports__;Object.defineProperty(k,"__esModule",{value:!0}),Object.defineProperty(k,"AbortException",{enumerable:!0,get:function(){return s.AbortException}}),Object.defineProperty(k,"AnnotationEditorLayer",{enumerable:!0,get:function(){return G.AnnotationEditorLayer}}),Object.defineProperty(k,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(k,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(k,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return W.AnnotationEditorUIManager}}),Object.defineProperty(k,"AnnotationLayer",{enumerable:!0,get:function(){return ut.AnnotationLayer}}),Object.defineProperty(k,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(k,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(k,"DOMSVGFactory",{enumerable:!0,get:function(){return r.DOMSVGFactory}}),Object.defineProperty(k,"FeatureTest",{enumerable:!0,get:function(){return s.FeatureTest}}),Object.defineProperty(k,"GlobalWorkerOptions",{enumerable:!0,get:function(){return F.GlobalWorkerOptions}}),Object.defineProperty(k,"ImageKind",{enumerable:!0,get:function(){return s.ImageKind}}),Object.defineProperty(k,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(k,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(k,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(k,"PDFDataRangeTransport",{enumerable:!0,get:function(){return L.PDFDataRangeTransport}}),Object.defineProperty(k,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(k,"PDFWorker",{enumerable:!0,get:function(){return L.PDFWorker}}),Object.defineProperty(k,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(k,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(k,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(k,"PromiseCapability",{enumerable:!0,get:function(){return s.PromiseCapability}}),Object.defineProperty(k,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(k,"SVGGraphics",{enumerable:!0,get:function(){return L.SVGGraphics}}),Object.defineProperty(k,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(k,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(k,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(k,"XfaLayer",{enumerable:!0,get:function(){return w.XfaLayer}}),Object.defineProperty(k,"build",{enumerable:!0,get:function(){return L.build}}),Object.defineProperty(k,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(k,"getDocument",{enumerable:!0,get:function(){return L.getDocument}}),Object.defineProperty(k,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(k,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(k,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(k,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(k,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(k,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(k,"noContextMenu",{enumerable:!0,get:function(){return r.noContextMenu}}),Object.defineProperty(k,"normalizeUnicode",{enumerable:!0,get:function(){return s.normalizeUnicode}}),Object.defineProperty(k,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(k,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(k,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(k,"updateTextLayer",{enumerable:!0,get:function(){return u.updateTextLayer}}),Object.defineProperty(k,"version",{enumerable:!0,get:function(){return L.version}});var s=__w_pdfjs_require__(1),L=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),u=__w_pdfjs_require__(26),G=__w_pdfjs_require__(27),W=__w_pdfjs_require__(5),ut=__w_pdfjs_require__(29),F=__w_pdfjs_require__(14),w=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function k(r,u,G,W,ut,F){if(F!==ReactPropTypesSecret){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}k.isRequired=k;function s(){return k}var L={array:k,bigint:k,bool:k,func:k,number:k,object:k,string:k,symbol:k,any:k,arrayOf:s,element:k,elementType:k,instanceOf:s,node:k,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return L.PropTypes=L,L};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=function(k,s,L){if(L||arguments.length===2)for(var r=0,u=s.length,G;r<u;r++)(G||!(r in s))&&(G||(G=Array.prototype.slice.call(s,0,r)),G[r]=s[r]);return k.concat(G||Array.prototype.slice.call(s))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(k,s){var L={};return allEvents.forEach(function(r){var u=k[r];u&&(s?L[r]=function(G){return u(G,s(r))}:L[r]=u)}),L}function makeCancellablePromise(k){var s=!1,L=new Promise(function(r,u){k.then(function(G){return!s&&r(G)}).catch(function(G){return!s&&u(G)})});return{promise:L,cancel:function(){s=!0}}}var isProduction=!0,prefix="Invariant failed";function invariant(k,s){if(!k){if(isProduction)throw new Error(prefix);var L=typeof s=="function"?s():s,r=L?"".concat(prefix,": ").concat(L):prefix;throw new Error(r)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(k,s,L){for(L of k.keys())if(dequal(L,s))return L}function dequal(k,s){var L,r,u;if(k===s)return!0;if(k&&s&&(L=k.constructor)===s.constructor){if(L===Date)return k.getTime()===s.getTime();if(L===RegExp)return k.toString()===s.toString();if(L===Array){if((r=k.length)===s.length)for(;r--&&dequal(k[r],s[r]););return r===-1}if(L===Set){if(k.size!==s.size)return!1;for(r of k)if(u=r,u&&typeof u=="object"&&(u=find(s,u),!u)||!s.has(u))return!1;return!0}if(L===Map){if(k.size!==s.size)return!1;for(r of k)if(u=r[0],u&&typeof u=="object"&&(u=find(s,u),!u)||!dequal(r[1],s.get(u)))return!1;return!0}if(L===ArrayBuffer)k=new Uint8Array(k),s=new Uint8Array(s);else if(L===DataView){if((r=k.byteLength)===s.byteLength)for(;r--&&k.getInt8(r)===s.getInt8(r););return r===-1}if(ArrayBuffer.isView(k)){if((r=k.byteLength)===s.byteLength)for(;r--&&k[r]===s[r];);return r===-1}if(!L||typeof k=="object"){r=0;for(L in k)if(has.call(k,L)&&++r&&!has.call(s,L)||!(L in s)||!dequal(k[L],s[L]))return!1;return Object.keys(s).length===r}}return k!==k&&s!==s}const DocumentContext=reactExports.createContext(null);function Message({children:k,type:s}){return React.createElement("div",{className:"react-pdf__message react-pdf__message--".concat(s)},k)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(s){this.pdfDocument=s}setViewer(s){this.pdfViewer=s}setExternalLinkRel(s){this.externalLinkRel=s}setExternalLinkTarget(s){this.externalLinkTarget=s}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(s){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=s}get rotation(){return 0}set rotation(s){}goToDestination(s){return new Promise(L=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(s,"Destination is not specified."),typeof s=="string"?this.pdfDocument.getDestination(s).then(L):Array.isArray(s)?L(s):s.then(L)}).then(L=>{invariant(Array.isArray(L),'"'.concat(L,'" is not a valid destination array.'));const r=L[0];new Promise(u=>{invariant(this.pdfDocument,"PDF document not loaded."),r instanceof Object?this.pdfDocument.getPageIndex(r).then(G=>{u(G)}).catch(()=>{invariant(!1,'"'.concat(r,'" is not a valid page reference.'))}):typeof r=="number"?u(r):invariant(!1,'"'.concat(r,'" is not a valid destination reference.'))}).then(u=>{const G=u+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(G>=1&&G<=this.pagesCount,'"'.concat(G,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({dest:L,pageIndex:u,pageNumber:G})})})}navigateTo(s){this.goToDestination(s)}goToPage(s){const L=s-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(s>=1&&s<=this.pagesCount,'"'.concat(s,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({pageIndex:L,pageNumber:s})}addLinkAttributes(s,L,r){s.href=L,s.rel=this.externalLinkRel||DEFAULT_LINK_REL,s.target=r?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(k){return typeof k<"u"}function isProvided(k){return isDefined(k)&&k!==null}function isString(k){return typeof k=="string"}function isArrayBuffer(k){return k instanceof ArrayBuffer}function isBlob(k){return invariant(isBrowser,"isBlob can only be used in a browser environment"),k instanceof Blob}function isDataURI(k){return isString(k)&&/^data:/.test(k)}function dataURItoByteString(k){invariant(isDataURI(k),"Invalid data URI.");const[s="",L=""]=k.split(",");return s.split(";").indexOf("base64")!==-1?atob(L):unescape(L)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(allowFileAccessFromFilesTip))}function displayWorkerWarning(){warning$1(!isLocalFileSystem,"Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ".concat(allowFileAccessFromFilesTip))}function cancelRunningTask(k){k&&k.cancel&&k.cancel()}function makePageCallback(k,s){return Object.defineProperty(k,"width",{get(){return this.view[2]*s},configurable:!0}),Object.defineProperty(k,"height",{get(){return this.view[3]*s},configurable:!0}),Object.defineProperty(k,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(k,"originalHeight",{get(){return this.view[3]},configurable:!0}),k}function isCancelException(k){return k.name==="RenderingCancelledException"}function loadFromFile(k){return new Promise((s,L)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return L(new Error("Error while reading a file."));s(r.result)},r.onerror=u=>{if(!u.target)return L(new Error("Error while reading a file."));const{error:G}=u.target;if(!G)return L(new Error("Error while reading a file."));switch(G.code){case G.NOT_FOUND_ERR:return L(new Error("Error while reading a file: File not found."));case G.SECURITY_ERR:return L(new Error("Error while reading a file: Security error."));case G.ABORT_ERR:return L(new Error("Error while reading a file: Aborted."));default:return L(new Error("Error while reading a file."))}},r.readAsArrayBuffer(k)})}function reducer(k,s){switch(s.type){case"RESOLVE":return{value:s.value,error:void 0};case"REJECT":return{value:!1,error:s.error};case"RESET":return{value:void 0,error:void 0};default:return k}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const k={};return allEvents.forEach(s=>{k[s]=PropTypes.func}),k})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function k(s,L,r){const{[L]:u,pageNumber:G,pdf:W}=s;if(!isDefined(W))return null;if(isDefined(u)){if(typeof u!="number")return new Error("`".concat(L,"` of type `").concat(typeof u,"` supplied to `").concat(r,"`, expected `number`."));if(u<0)return new Error("Expected `".concat(L,"` to be greater or equal to 0."));const{numPages:ut}=W;if(u+1>ut)return new Error("Expected `".concat(L,"` to be less or equal to ").concat(ut-1,"."))}else if(!isDefined(G))return new Error("`".concat(L,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(r,"`."));return null},isPageNumber=function k(s,L,r){const{[L]:u,pageIndex:G,pdf:W}=s;if(!isDefined(W))return null;if(isDefined(u)){if(typeof u!="number")return new Error("`".concat(L,"` of type `").concat(typeof u,"` supplied to `").concat(r,"`, expected `number`."));if(u<1)return new Error("Expected `".concat(L,"` to be greater or equal to 1."));const{numPages:ut}=W;if(u>ut)return new Error("Expected `".concat(L,"` to be less or equal to ").concat(ut,"."))}else if(!isDefined(G))return new Error("`".concat(L,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(r,"`."));return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(k,s,L,r){function u(G){return G instanceof L?G:new L(function(W){W(G)})}return new(L||(L=Promise))(function(G,W){function ut(g){try{w(r.next(g))}catch(O){W(O)}}function F(g){try{w(r.throw(g))}catch(O){W(O)}}function w(g){g.done?G(g.value):u(g.value).then(ut,F)}w((r=r.apply(k,s||[])).next())})},__rest$1=function(k,s){var L={};for(var r in k)Object.prototype.hasOwnProperty.call(k,r)&&s.indexOf(r)<0&&(L[r]=k[r]);if(k!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,r=Object.getOwnPropertySymbols(k);u<r.length;u++)s.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(k,r[u])&&(L[r[u]]=k[r[u]]);return L};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(k,s)=>{switch(s){case PasswordResponses.NEED_PASSWORD:{const L=prompt("Enter the password to open this PDF file.");k(L);break}case PasswordResponses.INCORRECT_PASSWORD:{const L=prompt("Invalid password. Please try again.");k(L);break}}};function isParameterObject(k){return typeof k=="object"&&k!==null&&("data"in k||"range"in k||"url"in k)}const Document=reactExports.forwardRef(function k(s,L){var{children:r,className:u,error:G="Failed to load PDF file.",externalLinkRel:W,externalLinkTarget:ut,file:F,inputRef:w,imageResourcesPath:g,loading:O="Loading PDF…",noData:I="No PDF file specified.",onItemClick:x,onLoadError:v,onLoadProgress:A,onLoadSuccess:f,onPassword:_=defaultOnPassword,onSourceError:P,onSourceSuccess:T,options:y,renderMode:o,rotate:h}=s,M=__rest$1(s,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[m,l]=useResolver(),{value:R,error:p}=m,[H,V]=useResolver(),{value:S,error:q}=H,nt=reactExports.useRef(new LinkService),ot=reactExports.useRef([]),$=reactExports.useRef(),ct=reactExports.useRef();reactExports.useEffect(()=>{F&&F!==$.current&&isParameterObject(F)&&(warning$1(!dequal(F,$.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),$.current=F)},[F]),reactExports.useEffect(()=>{y&&y!==ct.current&&(warning$1(!dequal(y,ct.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),ct.current=y)},[y]);const mt=reactExports.useRef({scrollPageIntoView:pt=>{const{dest:lt,pageNumber:Ct,pageIndex:Ot=Ct-1}=pt;if(x){x({dest:lt,pageIndex:Ot,pageNumber:Ct});return}const vt=ot.current[Ot];if(vt){vt.scrollIntoView();return}warning$1(!1,"An internal link leading to page ".concat(Ct," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}});reactExports.useImperativeHandle(L,()=>({linkService:nt,pages:ot,viewer:mt}),[]);function Et(){T&&T()}function Tt(){p&&(warning$1(!1,p.toString()),P&&P(p))}function C(){l({type:"RESET"})}reactExports.useEffect(C,[F,l]);const n=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!F)return null;if(typeof F=="string")return isDataURI(F)?{data:dataURItoByteString(F)}:(displayCORSWarning(),{url:F});if(F instanceof PDFDataRangeTransport)return{range:F};if(isArrayBuffer(F))return{data:F};if(isBrowser&&isBlob(F))return{data:yield loadFromFile(F)};if(invariant(typeof F=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(F),"Invalid parameter object: need either .data, .range or .url"),"url"in F&&typeof F.url=="string"){if(isDataURI(F.url)){const{url:pt}=F,lt=__rest$1(F,["url"]),Ct=dataURItoByteString(pt);return Object.assign({data:Ct},lt)}displayCORSWarning()}return F}),[F]);reactExports.useEffect(()=>{const pt=makeCancellablePromise(n());return pt.promise.then(lt=>{l({type:"RESOLVE",value:lt})}).catch(lt=>{l({type:"REJECT",error:lt})}),()=>{cancelRunningTask(pt)}},[n,l]),reactExports.useEffect(()=>{if(!(typeof R>"u")){if(R===!1){Tt();return}Et()}},[R]);function a(){S&&(f&&f(S),ot.current=new Array(S.numPages),nt.current.setDocument(S))}function i(){q&&(warning$1(!1,q.toString()),v&&v(q))}function c(){V({type:"RESET"})}reactExports.useEffect(c,[V,R]);function d(){if(!R)return;const pt=y?Object.assign(Object.assign({},R),y):R,lt=pdfjs.getDocument(pt);A&&(lt.onProgress=A),_&&(lt.onPassword=_);const Ct=lt;return Ct.promise.then(Ot=>{V({type:"RESOLVE",value:Ot})}).catch(Ot=>{Ct.destroyed||V({type:"REJECT",error:Ot})}),()=>{Ct.destroy()}}reactExports.useEffect(d,[y,V,R]),reactExports.useEffect(()=>{if(!(typeof S>"u")){if(S===!1){i();return}a()}},[S]);function E(){nt.current.setViewer(mt.current),nt.current.setExternalLinkRel(W),nt.current.setExternalLinkTarget(ut)}reactExports.useEffect(E,[W,ut]);function D(pt,lt){ot.current[pt]=lt}function j(pt){delete ot.current[pt]}const st=reactExports.useMemo(()=>({imageResourcesPath:g,linkService:nt.current,onItemClick:x,pdf:S,registerPage:D,renderMode:o,rotate:h,unregisterPage:j}),[g,x,S,o,h]),Z=reactExports.useMemo(()=>makeEventProps(M,()=>S),[M,S]);function rt(){return React.createElement(DocumentContext.Provider,{value:st},r)}function dt(){return F?S==null?React.createElement(Message,{type:"loading"},typeof O=="function"?O():O):S===!1?React.createElement(Message,{type:"error"},typeof G=="function"?G():G):rt():React.createElement(Message,{type:"no-data"},typeof I=="function"?I():I)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",u),ref:w,style:{"--scale-factor":"1"}},Z),dt())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var k=[],s=0;s<arguments.length;s++)k[s]=arguments[s];var L=k.filter(Boolean);if(L.length<=1){var r=L[0];return r||null}return function(G){L.forEach(function(W){typeof W=="function"?W(G):W&&(W.current=G)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(k){return k in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(k){return"children"in k}function isStructTreeNodeWithOnlyContentChild(k){return isStructTreeNode(k)?k.children.length===1&&0 in k.children&&"id"in k.children[0]:!1}function getRoleAttributes(k){const s={};if(isStructTreeNode(k)){const{role:L}=k,r=L.match(HEADING_PATTERN);if(r)s.role="heading",s["aria-level"]=Number(r[1]);else if(isPdfRole(L)){const u=PDF_ROLE_TO_HTML_ROLE[L];u&&(s.role=u)}}return s}function getBaseAttributes(k){const s={};if(isStructTreeNode(k)){if(k.alt!==void 0&&(s["aria-label"]=k.alt),k.lang!==void 0&&(s.lang=k.lang),isStructTreeNodeWithOnlyContentChild(k)){const[L]=k.children;if(L){const r=getBaseAttributes(L);return Object.assign(Object.assign({},s),r)}}}else"id"in k&&(s["aria-owns"]=k.id);return s}function getAttributes(k){return k?Object.assign(Object.assign({},getRoleAttributes(k)),getBaseAttributes(k)):null}function StructTreeItem({className:k,node:s}){const L=reactExports.useMemo(()=>getAttributes(s),[s]),r=reactExports.useMemo(()=>!isStructTreeNode(s)||isStructTreeNodeWithOnlyContentChild(s)?null:s.children.map((u,G)=>React.createElement(StructTreeItem,{key:G,node:u})),[s]);return React.createElement("span",Object.assign({className:k},L),r)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const k=usePageContext();invariant(k,"Unable to find Page context.");const{onGetStructTreeError:s,onGetStructTreeSuccess:L}=k,[r,u]=useResolver(),{value:G,error:W}=r,{customTextRenderer:ut,page:F}=k;function w(){G&&L&&L(G)}function g(){W&&(warning$1(!1,W.toString()),s&&s(W))}function O(){u({type:"RESET"})}reactExports.useEffect(O,[u,F]);function I(){if(ut||!F)return;const x=makeCancellablePromise(F.getStructTree()),v=x;return x.promise.then(A=>{u({type:"RESOLVE",value:A})}).catch(A=>{u({type:"REJECT",error:A})}),()=>cancelRunningTask(v)}return reactExports.useEffect(I,[ut,F,u]),reactExports.useEffect(()=>{if(G!==void 0){if(G===!1){g();return}w()}},[G]),G?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:G}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(k){const s=usePageContext();invariant(s,"Unable to find Page context.");const L=Object.assign(Object.assign({},s),k),{_className:r,canvasBackground:u,devicePixelRatio:G=getDevicePixelRatio(),onRenderError:W,onRenderSuccess:ut,page:F,renderForms:w,renderTextLayer:g,rotate:O,scale:I}=L,{canvasRef:x}=k;invariant(F,"Attempted to render page canvas, but no page was specified.");const v=reactExports.useRef(null);function A(){F&&ut&&ut(makePageCallback(F,I))}function f(o){isCancelException(o)||(warning$1(!1,o.toString()),W&&W(o))}const _=reactExports.useMemo(()=>F.getViewport({scale:I*G,rotation:O}),[G,F,O,I]),P=reactExports.useMemo(()=>F.getViewport({scale:I,rotation:O}),[F,O,I]);function T(){if(!F)return;F.cleanup();const{current:o}=v;if(!o)return;o.width=_.width,o.height=_.height,o.style.width="".concat(Math.floor(P.width),"px"),o.style.height="".concat(Math.floor(P.height),"px"),o.style.visibility="hidden";const h={annotationMode:w?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:o.getContext("2d",{alpha:!1}),viewport:_};u&&(h.background=u);const M=F.render(h),m=M;return M.promise.then(()=>{o.style.visibility="",A()}).catch(f),()=>cancelRunningTask(m)}reactExports.useEffect(T,[u,v,G,F,w,_,P]);const y=reactExports.useCallback(()=>{const{current:o}=v;o&&(o.width=0,o.height=0)},[v]);return reactExports.useEffect(()=>y,[y]),React.createElement("canvas",{className:"".concat(r,"__canvas"),dir:"ltr",ref:mergeRefs(x,v),style:{display:"block",userSelect:"none"}},g?React.createElement(StructTree,null):null)}function PageSVG(){const k=usePageContext();invariant(k,"Unable to find Page context.");const{_className:s,onRenderSuccess:L,onRenderError:r,page:u,rotate:G,scale:W}=k;invariant(u,"Attempted to render page SVG, but no page was specified.");const[ut,F]=useResolver(),{value:w,error:g}=ut;function O(){u&&L&&L(makePageCallback(u,W))}function I(){g&&(isCancelException(g)||(warning$1(!1,g.toString()),r&&r(g)))}const x=reactExports.useMemo(()=>u.getViewport({scale:W,rotation:G}),[u,G,W]);function v(){F({type:"RESET"})}reactExports.useEffect(v,[u,F,x]);function A(){if(!u)return;const T=makeCancellablePromise(u.getOperatorList());return T.promise.then(y=>{new pdfjs.SVGGraphics(u.commonObjs,u.objs).getSVG(y,x).then(h=>{if(!(h instanceof SVGElement))throw new Error("getSVG returned unexpected result.");F({type:"RESOLVE",value:h})}).catch(h=>{F({type:"REJECT",error:h})})}).catch(y=>{F({type:"REJECT",error:y})}),()=>cancelRunningTask(T)}reactExports.useEffect(A,[u,F,x]),reactExports.useEffect(()=>{if(w!==void 0){if(w===!1){I();return}O()}},[w]);function f(T){if(!T||!w)return;T.firstElementChild||T.appendChild(w);const{width:y,height:o}=x;w.setAttribute("width","".concat(y)),w.setAttribute("height","".concat(o))}const{width:_,height:P}=x;return React.createElement("div",{className:"".concat(s,"__svg"),ref:T=>f(T),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:_,height:P,userSelect:"none"}})}function isTextItem(k){return"str"in k}function TextLayer(){const k=usePageContext();invariant(k,"Unable to find Page context.");const{customTextRenderer:s,onGetTextError:L,onGetTextSuccess:r,onRenderTextLayerError:u,onRenderTextLayerSuccess:G,page:W,pageIndex:ut,pageNumber:F,rotate:w,scale:g}=k;invariant(W,"Attempted to load page text content, but no page was specified.");const[O,I]=useResolver(),{value:x,error:v}=O,A=reactExports.useRef(null),f=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function _(){x&&r&&r(x)}function P(){v&&(warning$1(!1,v.toString()),L&&L(v))}function T(){I({type:"RESET"})}reactExports.useEffect(T,[W,I]);function y(){if(!W)return;const p=makeCancellablePromise(W.getTextContent()),H=p;return p.promise.then(V=>{I({type:"RESOLVE",value:V})}).catch(V=>{I({type:"REJECT",error:V})}),()=>cancelRunningTask(H)}reactExports.useEffect(y,[W,I]),reactExports.useEffect(()=>{if(x!==void 0){if(x===!1){P();return}_()}},[x]);const o=reactExports.useCallback(()=>{G&&G()},[G]),h=reactExports.useCallback(p=>{warning$1(!1,p.toString()),u&&u(p)},[u]);function M(){const p=f.current;p&&p.classList.add("active")}function m(){const p=f.current;p&&p.classList.remove("active")}const l=reactExports.useMemo(()=>W.getViewport({scale:g,rotation:w}),[W,w,g]);function R(){if(!W||!x)return;const{current:p}=A;if(!p)return;p.innerHTML="";const H=W.streamTextContent({includeMarkedContent:!0}),V={container:p,textContentSource:H,viewport:l},S=pdfjs.renderTextLayer(V),q=S;return S.promise.then(()=>{const nt=document.createElement("div");nt.className="endOfContent",p.append(nt),f.current=nt;const ot=p.querySelectorAll('[role="presentation"]');if(s){let $=0;x.items.forEach((ct,mt)=>{if(!isTextItem(ct))return;const Et=ot[$];if(!Et)return;const Tt=s(Object.assign({pageIndex:ut,pageNumber:F,itemIndex:mt},ct));Et.innerHTML=Tt,$+=ct.str&&ct.hasEOL?2:1})}o()}).catch(h),()=>cancelRunningTask(q)}return reactExports.useLayoutEffect(R,[s,h,o,W,ut,F,x,l]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:m,onMouseDown:M,ref:A})}function AnnotationLayer(){const k=useDocumentContext();invariant(k,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const s=usePageContext();invariant(s,"Unable to find Page context.");const L=Object.assign(Object.assign({},k),s),{imageResourcesPath:r,linkService:u,onGetAnnotationsError:G,onGetAnnotationsSuccess:W,onRenderAnnotationLayerError:ut,onRenderAnnotationLayerSuccess:F,page:w,pdf:g,renderForms:O,rotate:I,scale:x=1}=L;invariant(w,"Attempted to load page annotations, but no page was specified.");const[v,A]=useResolver(),{value:f,error:_}=v,P=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function T(){f&&W&&W(f)}function y(){_&&(warning$1(!1,_.toString()),G&&G(_))}function o(){A({type:"RESET"})}reactExports.useEffect(o,[A,w]);function h(){if(!w)return;const p=makeCancellablePromise(w.getAnnotations()),H=p;return p.promise.then(V=>{A({type:"RESOLVE",value:V})}).catch(V=>{A({type:"REJECT",error:V})}),()=>{cancelRunningTask(H)}}reactExports.useEffect(h,[A,w,O]),reactExports.useEffect(()=>{if(f!==void 0){if(f===!1){y();return}T()}},[f]);function M(){F&&F()}function m(p){warning$1(!1,"".concat(p)),ut&&ut(p)}const l=reactExports.useMemo(()=>w.getViewport({scale:x,rotation:I}),[w,I,x]);function R(){if(!g||!w||!f)return;const{current:p}=P;if(!p)return;const H=l.clone({dontFlip:!0}),V={accessibilityManager:null,annotationCanvasMap:null,div:p,l10n:null,page:w,viewport:H},S={annotations:f,annotationStorage:g.annotationStorage,div:p,downloadManager:null,imageResourcesPath:r,linkService:u,page:w,renderForms:O,viewport:H};p.innerHTML="";try{new pdfjs.AnnotationLayer(V).render(S),M()}catch(q){m(q)}return()=>{}}return reactExports.useEffect(R,[f,r,u,w,O,l]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:P})}var __rest=function(k,s){var L={};for(var r in k)Object.prototype.hasOwnProperty.call(k,r)&&s.indexOf(r)<0&&(L[r]=k[r]);if(k!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,r=Object.getOwnPropertySymbols(k);u<r.length;u++)s.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(k,r[u])&&(L[r[u]]=k[r[u]]);return L};const defaultScale=1,Page=function k(s){const L=useDocumentContext();invariant(L,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const r=Object.assign(Object.assign({},L),s),{_className:u="react-pdf__Page",_enableRegisterUnregisterPage:G=!0,canvasBackground:W,canvasRef:ut,children:F,className:w,customRenderer:g,customTextRenderer:O,devicePixelRatio:I,error:x="Failed to load the page.",height:v,inputRef:A,loading:f="Loading page…",noData:_="No page specified.",onGetAnnotationsError:P,onGetAnnotationsSuccess:T,onGetStructTreeError:y,onGetStructTreeSuccess:o,onGetTextError:h,onGetTextSuccess:M,onLoadError:m,onLoadSuccess:l,onRenderAnnotationLayerError:R,onRenderAnnotationLayerSuccess:p,onRenderError:H,onRenderSuccess:V,onRenderTextLayerError:S,onRenderTextLayerSuccess:q,pageIndex:nt,pageNumber:ot,pdf:$,registerPage:ct,renderAnnotationLayer:mt=!0,renderForms:Et=!1,renderMode:Tt="canvas",renderTextLayer:C=!0,rotate:n,scale:a=defaultScale,unregisterPage:i,width:c}=r,d=__rest(r,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[E,D]=useResolver(),{value:j,error:st}=E,Z=reactExports.useRef(null);invariant($,"Attempted to load a page, but no document was specified.");const rt=isProvided(ot)?ot-1:nt!=null?nt:null,dt=ot!=null?ot:isProvided(nt)?nt+1:null,pt=n!=null?n:j?j.rotate:null,lt=reactExports.useMemo(()=>{if(!j)return null;let Gt=1;const Wt=a!=null?a:defaultScale;if(c||v){const Vt=j.getViewport({scale:1,rotation:pt});c?Gt=c/Vt.width:v&&(Gt=v/Vt.height)}return Wt*Gt},[v,j,pt,a,c]);function Ct(){return()=>{isProvided(rt)&&G&&i&&i(rt)}}reactExports.useEffect(Ct,[G,$,rt,i]);function Ot(){if(l){if(!j||!lt)return;l(makePageCallback(j,lt))}if(G&&ct){if(!isProvided(rt)||!Z.current)return;ct(rt,Z.current)}}function vt(){st&&(warning$1(!1,st.toString()),m&&m(st))}function Dt(){D({type:"RESET"})}reactExports.useEffect(Dt,[D,$,rt]);function gt(){if(!$||!dt)return;const Gt=makeCancellablePromise($.getPage(dt)),Wt=Gt;return Gt.promise.then(Vt=>{D({type:"RESOLVE",value:Vt})}).catch(Vt=>{D({type:"REJECT",error:Vt})}),()=>cancelRunningTask(Wt)}reactExports.useEffect(gt,[D,$,rt,dt,ct]),reactExports.useEffect(()=>{if(j!==void 0){if(j===!1){vt();return}Ot()}},[j,lt]);const tt=reactExports.useMemo(()=>j&&isProvided(rt)&&dt&&isProvided(pt)&&isProvided(lt)?{_className:u,canvasBackground:W,customTextRenderer:O,devicePixelRatio:I,onGetAnnotationsError:P,onGetAnnotationsSuccess:T,onGetStructTreeError:y,onGetStructTreeSuccess:o,onGetTextError:h,onGetTextSuccess:M,onRenderAnnotationLayerError:R,onRenderAnnotationLayerSuccess:p,onRenderError:H,onRenderSuccess:V,onRenderTextLayerError:S,onRenderTextLayerSuccess:q,page:j,pageIndex:rt,pageNumber:dt,renderForms:Et,renderTextLayer:C,rotate:pt,scale:lt}:null,[u,W,O,I,P,T,y,o,h,M,R,p,H,V,S,q,j,rt,dt,Et,C,pt,lt]),et=reactExports.useMemo(()=>makeEventProps(d,()=>j&&(lt?makePageCallback(j,lt):void 0)),[d,j,lt]),ft="".concat(rt,"@").concat(lt,"/").concat(pt),wt="".concat(rt,"/").concat(pt);function Pt(){switch(Tt){case"custom":return invariant(g,'renderMode was set to "custom", but no customRenderer was passed.'),React.createElement(g,{key:"".concat(ft,"_custom")});case"none":return null;case"svg":return React.createElement(PageSVG,{key:"".concat(wt,"_svg")});case"canvas":default:return React.createElement(PageCanvas,{key:"".concat(ft,"_canvas"),canvasRef:ut})}}function Ht(){return C?React.createElement(TextLayer,{key:"".concat(ft,"_text")}):null}function $t(){return mt?React.createElement(AnnotationLayer,{key:"".concat(ft,"_annotations")}):null}function jt(){return React.createElement(PageContext.Provider,{value:tt},Pt(),Ht(),$t(),F)}function qt(){return dt?$===null||j===void 0||j===null?React.createElement(Message,{type:"loading"},typeof f=="function"?f():f):$===!1||j===!1?React.createElement(Message,{type:"error"},typeof x=="function"?x():x):jt():React.createElement(Message,{type:"no-data"},typeof _=="function"?_():_)}return React.createElement("div",Object.assign({className:clsx(u,w),"data-page-number":dt,ref:mergeRefs(A,Z),style:{"--scale-factor":"".concat(lt),backgroundColor:W||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},et),qt())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";const styles$1={"pdf-page":"_pdf-page_bahwt_1","pdf-loader":"_pdf-loader_bahwt_24"};pdfjs.GlobalWorkerOptions.workerSrc="//unpkg.com/pdfjs-dist@".concat(pdfjs.version,"/legacy/build/pdf.worker.min.js");const _Document=({width:k,file:s,className:L=""})=>{const[r,u]=reactExports.useState(0);return jsxRuntimeExports.jsx(Document,{file:s,className:classNames({[L]:!!L}),loading:jsxRuntimeExports.jsx(Loader,{className:styles$1["pdf-loader"]}),onLoadSuccess:({numPages:G})=>u(G),children:[...Array(r)].map((G,W)=>jsxRuntimeExports.jsx(Page,{className:styles$1["pdf-page"],width:k-4,pageNumber:W+1,renderMode:"svg",renderTextLayer:!1,loading:jsxRuntimeExports.jsx(Loader,{})},"pdf_".concat(W,"_").concat(k)))})},view__header="_view__header_sqsl2_6",styles={"view-resume":"_view-resume_sqsl2_1",view__header,"document-viewer":"_document-viewer_sqsl2_24","document-viewer__button":"_document-viewer__button_sqsl2_30","react-pdf-viewer":"_react-pdf-viewer_sqsl2_42"};function Resume(){const{ref:k,width:s=1}=useResizeObserver();return jsxRuntimeExports.jsxs("div",{className:styles["view-resume"],children:[jsxRuntimeExports.jsx("header",{className:styles.view__header,children:jsxRuntimeExports.jsx("h2",{children:"Resume"})}),jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsx(Fade,{children:jsxRuntimeExports.jsxs("div",{ref:k,className:styles["document-viewer"],children:[jsxRuntimeExports.jsx(Button,{buttonType:"link",href:pdf$2,iconName:"BsDownload",className:styles["document-viewer__button"],title:"Download Resume",children:"Download"}),jsxRuntimeExports.jsx(_Document,{width:s,file:pdf$2,className:styles["react-pdf-viewer"]}),jsxRuntimeExports.jsx(Button,{buttonType:"link",href:pdf$2,iconName:"BsDownload",className:styles["document-viewer__button"],title:"Download Resume",children:"Download"})]})})})]})}export{Resume as default};
